b397252330477b736863e3bbeae348f5
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Mock fs module
jest.mock('fs');
jest.mock('path');
jest.mock('vscode', () => mockVscode);
const fs = __importStar(require("fs"));
const path = __importStar(require("path"));
// Mock vscode module
const mockVscode = {
    workspace: {
        workspaceFolders: [
            { uri: { fsPath: '/test/workspace' } }
        ]
    },
    window: {
        activeTextEditor: null
    }
};
// Import after mocking
const projectDetector_1 = require("../projectDetector");
const mockedFs = jest.mocked(fs);
const mockedPath = jest.mocked(path);
describe('ProjectDetector', () => {
    let projectDetector;
    beforeEach(() => {
        jest.clearAllMocks();
        projectDetector = new projectDetector_1.ProjectDetector('/test/workspace');
        // Setup path mocks
        mockedPath.join.mockImplementation((...segments) => segments.join('/'));
        mockedPath.basename.mockImplementation((p) => p.split('/').pop() || '');
        mockedPath.relative.mockImplementation((from, to) => to.replace(from, '').replace(/^\//, ''));
    });
    describe('findNxWorkspace', () => {
        it('should find nx.json workspace', async () => {
            mockedFs.existsSync.mockImplementation((filePath) => {
                return filePath === '/test/workspace/nx.json';
            });
            const result = await projectDetector.findNxWorkspace();
            expect(result).toBe('/test/workspace/nx.json');
        });
        it('should find angular.json workspace', async () => {
            mockedFs.existsSync.mockImplementation((filePath) => {
                return filePath === '/test/workspace/angular.json';
            });
            const result = await projectDetector.findNxWorkspace();
            expect(result).toBe('/test/workspace/angular.json');
        });
        it('should return null if no workspace config found', async () => {
            mockedFs.existsSync.mockReturnValue(false);
            const result = await projectDetector.findNxWorkspace();
            expect(result).toBeNull();
        });
        it('should handle errors gracefully', async () => {
            mockedFs.existsSync.mockImplementation(() => {
                throw new Error('File system error');
            });
            const result = await projectDetector.findNxWorkspace();
            expect(result).toBeNull();
        });
    });
    describe('getProjects', () => {
        it('should parse NX workspace with project.json files', async () => {
            // Mock file system to simulate empty project detection
            mockedFs.existsSync.mockReturnValue(false);
            Object.defineProperty(mockedFs, 'readdirSync', {
                value: jest.fn().mockReturnValue([]),
                writable: true,
                configurable: true
            });
            mockedFs.statSync = jest.fn();
            const projects = await projectDetector.getProjects();
            // Should return empty array when no projects are found
            expect(projects).toHaveLength(0);
        });
        it('should parse Angular workspace format', async () => {
            const angularConfig = {
                projects: {
                    'my-app': {
                        root: 'projects/my-app',
                        projectType: 'application',
                        architect: {
                            build: {},
                            test: {}
                        }
                    }
                }
            };
            mockedFs.existsSync.mockImplementation((filePath) => {
                return filePath === '/test/workspace/angular.json';
            });
            mockedFs.readFileSync.mockReturnValue(JSON.stringify(angularConfig));
            Object.defineProperty(mockedFs, 'readdirSync', {
                value: jest.fn().mockReturnValue([]),
                writable: true,
                configurable: true
            });
            mockedFs.statSync = jest.fn();
            const projects = await projectDetector.getProjects();
            expect(projects).toHaveLength(1);
            expect(projects[0]).toMatchObject({
                name: 'my-app',
                type: 'angular',
                projectType: 'application',
                targets: { build: {}, test: {} }
            });
        });
        it('should handle inline project configurations', async () => {
            const nxConfig = {
                projects: {
                    'inline-project': {
                        root: 'apps/inline',
                        projectType: 'application',
                        targets: { build: {} }
                    }
                }
            };
            mockedFs.existsSync.mockImplementation((filePath) => {
                return filePath === '/test/workspace/nx.json';
            });
            mockedFs.readFileSync.mockReturnValue(JSON.stringify(nxConfig));
            Object.defineProperty(mockedFs, 'readdirSync', {
                value: jest.fn().mockReturnValue([]),
                writable: true,
                configurable: true
            });
            mockedFs.statSync = jest.fn();
            const projects = await projectDetector.getProjects();
            expect(projects).toHaveLength(1);
            expect(projects[0]).toMatchObject({
                name: 'inline-project',
                type: 'nx',
                projectType: 'application'
            });
        });
        it('should return empty array when no config found', async () => {
            mockedFs.existsSync.mockReturnValue(false);
            Object.defineProperty(mockedFs, 'readdirSync', {
                value: jest.fn().mockReturnValue([]),
                writable: true,
                configurable: true
            });
            mockedFs.statSync = jest.fn();
            const projects = await projectDetector.getProjects();
            expect(projects).toEqual([]);
        });
        it('should handle JSON parsing errors', async () => {
            mockedFs.existsSync.mockReturnValue(true);
            mockedFs.readFileSync.mockReturnValue('invalid json');
            jest.spyOn(projectDetector, 'findNxWorkspace').mockResolvedValue('/test/workspace/nx.json');
            const projects = await projectDetector.getProjects();
            expect(projects).toEqual([]);
        });
    });
    describe('detectCurrentProject', () => {
        it('should detect project from active file path', async () => {
            const mockProjects = [
                { name: 'my-app', root: 'apps/my-app', projectType: 'application', type: 'nx', packageJsonPath: 'apps/my-app/package.json' },
                { name: 'my-lib', root: 'libs/my-lib', projectType: 'library', type: 'nx', packageJsonPath: 'libs/my-lib/package.json' }
            ];
            jest.spyOn(projectDetector, 'getProjects').mockResolvedValue(mockProjects);
            // Mock vscode window.activeTextEditor
            mockVscode.window.activeTextEditor = {
                document: {
                    uri: {
                        fsPath: '/test/workspace/apps/my-app/src/main.ts'
                    }
                }
            };
            mockedPath.relative.mockReturnValue('apps/my-app/src/main.ts');
            const currentProject = await projectDetector.detectCurrentProject();
            expect(currentProject).toBe('my-app');
        });
        it('should return null when no active editor', async () => {
            mockVscode.window.activeTextEditor = null;
            const currentProject = await projectDetector.detectCurrentProject();
            expect(currentProject).toBeNull();
        });
        it('should return null when file is not in any project', async () => {
            const mockProjects = [
                { name: 'my-app', root: 'apps/my-app', projectType: 'application', type: 'nx', packageJsonPath: 'apps/my-app/package.json' }
            ];
            jest.spyOn(projectDetector, 'getProjects').mockResolvedValue(mockProjects);
            mockVscode.window.activeTextEditor = {
                document: {
                    uri: {
                        fsPath: '/test/workspace/other/file.ts'
                    }
                }
            };
            mockedPath.relative.mockReturnValue('other/file.ts');
            const currentProject = await projectDetector.detectCurrentProject();
            expect(currentProject).toBeNull();
        });
    });
    describe('getProject', () => {
        it('should return project by name', async () => {
            const mockProjects = [
                { name: 'my-app', root: 'apps/my-app', projectType: 'application', type: 'nx', packageJsonPath: 'apps/my-app/package.json' },
                { name: 'my-lib', root: 'libs/my-lib', projectType: 'library', type: 'nx', packageJsonPath: 'libs/my-lib/package.json' }
            ];
            jest.spyOn(projectDetector, 'getProjects').mockResolvedValue(mockProjects);
            const project = await projectDetector.getProject('my-lib');
            expect(project).toEqual(mockProjects[1]);
        });
        it('should return null for non-existent project', async () => {
            jest.spyOn(projectDetector, 'getProjects').mockResolvedValue([]);
            const project = await projectDetector.getProject('non-existent');
            expect(project).toBeNull();
        });
    });
    describe('hasTarget', () => {
        it('should return true when project has target', async () => {
            const mockProject = {
                name: 'my-app',
                root: 'apps/my-app',
                projectType: 'application',
                type: 'nx',
                packageJsonPath: 'apps/my-app/package.json',
                targets: { build: {}, test: {} }
            };
            jest.spyOn(projectDetector, 'getProject').mockResolvedValue(mockProject);
            const hasTarget = await projectDetector.hasTarget('my-app', 'build');
            expect(hasTarget).toBe(true);
        });
        it('should return false when project does not have target', async () => {
            const mockProject = {
                name: 'my-app',
                root: 'apps/my-app',
                projectType: 'application',
                type: 'nx',
                packageJsonPath: 'apps/my-app/package.json',
                targets: { build: {} }
            };
            jest.spyOn(projectDetector, 'getProject').mockResolvedValue(mockProject);
            const hasTarget = await projectDetector.hasTarget('my-app', 'test');
            expect(hasTarget).toBe(false);
        });
        it('should return false when project not found', async () => {
            jest.spyOn(projectDetector, 'getProject').mockResolvedValue(null);
            const hasTarget = await projectDetector.hasTarget('non-existent', 'build');
            expect(hasTarget).toBe(false);
        });
        it('should return false when project has no targets', async () => {
            const mockProject = {
                name: 'my-app',
                root: 'apps/my-app',
                projectType: 'application',
                type: 'nx',
                packageJsonPath: 'apps/my-app/package.json'
            };
            jest.spyOn(projectDetector, 'getProject').mockResolvedValue(mockProject);
            const hasTarget = await projectDetector.hasTarget('my-app', 'build');
            expect(hasTarget).toBe(false);
        });
    });
    describe('getWorkspaceRoot', () => {
        it('should return workspace root directory', () => {
            const root = projectDetector.getWorkspaceRoot();
            expect(root).toBe('/test/workspace');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2dyZWdkdW5uL3NyYy90ZXN0L2FpX2RlYnVnX2NvbnRleHQvdnNjb2RlL3NyYy91dGlscy9fX3Rlc3RzX18vcHJvamVjdERldGVjdG9yLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQSxpQkFBaUI7QUFDakIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNoQixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBY2xCLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBbkJ0Qyx1Q0FBeUI7QUFDekIsMkNBQTZCO0FBTTdCLHFCQUFxQjtBQUNyQixNQUFNLFVBQVUsR0FBRztJQUNqQixTQUFTLEVBQUU7UUFDVCxnQkFBZ0IsRUFBRTtZQUNoQixFQUFFLEdBQUcsRUFBRSxFQUFFLE1BQU0sRUFBRSxpQkFBaUIsRUFBRSxFQUFFO1NBQ3ZDO0tBQ0Y7SUFDRCxNQUFNLEVBQUU7UUFDTixnQkFBZ0IsRUFBRSxJQUFJO0tBQ3ZCO0NBQ0YsQ0FBQztBQUlGLHVCQUF1QjtBQUN2Qix3REFBcUQ7QUFFckQsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNqQyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBRXJDLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUU7SUFDL0IsSUFBSSxlQUFnQyxDQUFDO0lBRXJDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDckIsZUFBZSxHQUFHLElBQUksaUNBQWUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBRXpELG1CQUFtQjtRQUNuQixVQUFVLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUMsR0FBRyxRQUFRLEVBQUUsRUFBRSxD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Q0FBQyxDQUFDO1lBQzNFLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDaEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsaURBQWlELEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDL0QsTUFBTSxXQUFXLEdBQUc7Z0JBQ2xCLElBQUksRUFBRSxRQUFRO2dCQUNkLElBQUksRUFBRSxhQUFhO2dCQUNuQixXQUFXLEVBQUUsYUFBc0I7Z0JBQ25DLElBQUksRUFBRSxJQUFhO2dCQUNuQixlQUFlLEVBQUUsMEJBQTBCO2FBQzVDLENBQUM7WUFFRixJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxZQUFZLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUV6RSxNQUFNLFNBQVMsR0FBRyxNQUFNLGVBQWUsQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1lBQ3JFLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDaEMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxHQUFHLEVBQUU7UUFDaEMsRUFBRSxDQUFDLHdDQUF3QyxFQUFFLEdBQUcsRUFBRTtZQUNoRCxNQUFNLElBQUksR0FBRyxlQUFlLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUNoRCxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDdkMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9ncmVnZHVubi9zcmMvdGVzdC9haV9kZWJ1Z19jb250ZXh0L3ZzY29kZS9zcmMvdXRpbHMvX190ZXN0c19fL3Byb2plY3REZXRlY3Rvci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5cbi8vIE1vY2sgZnMgbW9kdWxlXG5qZXN0Lm1vY2soJ2ZzJyk7XG5qZXN0Lm1vY2soJ3BhdGgnKTtcblxuLy8gTW9jayB2c2NvZGUgbW9kdWxlXG5jb25zdCBtb2NrVnNjb2RlID0ge1xuICB3b3Jrc3BhY2U6IHtcbiAgICB3b3Jrc3BhY2VGb2xkZXJzOiBbXG4gICAgICB7IHVyaTogeyBmc1BhdGg6ICcvdGVzdC93b3Jrc3BhY2UnIH0gfVxuICAgIF1cbiAgfSxcbiAgd2luZG93OiB7XG4gICAgYWN0aXZlVGV4dEVkaXRvcjogbnVsbFxuICB9XG59O1xuXG5qZXN0Lm1vY2soJ3ZzY29kZScsICgpID0+IG1vY2tWc2NvZGUpO1xuXG4vLyBJbXBvcnQgYWZ0ZXIgbW9ja2luZ1xuaW1wb3J0IHsgUHJvamVjdERldGVjdG9yIH0gZnJvbSAnLi4vcHJvamVjdERldGVjdG9yJztcblxuY29uc3QgbW9ja2VkRnMgPSBqZXN0Lm1vY2tlZChmcyk7XG5jb25zdCBtb2NrZWRQYXRoID0gamVzdC5tb2NrZWQocGF0aCk7XG5cbmRlc2NyaWJlKCdQcm9qZWN0RGV0ZWN0b3InLCAoKSA9PiB7XG4gIGxldCBwcm9qZWN0RGV0ZWN0b3I6IFByb2plY3REZXRlY3RvcjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBwcm9qZWN0RGV0ZWN0b3IgPSBuZXcgUHJvamVjdERldGVjdG9yKCcvdGVzdC93b3Jrc3BhY2UnKTtcbiAgICBcbiAgICAvLyBTZXR1cCBwYXRoIG1vY2tzXG4gICAgbW9ja2VkUGF0aC5qb2luLm1vY2tJbXBsZW1lbnRhdGlvbigoLi4uc2VnbWVudHMpID0+IHNlZ21lbnRzLmpvaW4oJy8nKSk7XG4gICAgbW9ja2VkUGF0aC5iYXNlbmFtZS5tb2NrSW1wbGVtZW50YXRpb24oKHApID0+IHAuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJyk7XG4gICAgbW9ja2VkUGF0aC5yZWxhdGl2ZS5tb2NrSW1wbGVtZW50YXRpb24oKGZyb20sIHRvKSA9PiB0by5yZXBsYWNlKGZyb20sICcnKS5yZXBsYWNlKC9eXFwvLywgJycpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2ZpbmROeFdvcmtzcGFjZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGZpbmQgbnguanNvbiB3b3Jrc3BhY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrZWRGcy5leGlzdHNTeW5jLm1vY2tJbXBsZW1lbnRhdGlvbigoZmlsZVBhdGgpID0+IHtcbiAgICAgICAgcmV0dXJuIGZpbGVQYXRoID09PSAnL3Rlc3Qvd29ya3NwYWNlL254Lmpzb24nO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb2plY3REZXRlY3Rvci5maW5kTnhXb3Jrc3BhY2UoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJy90ZXN0L3dvcmtzcGFjZS9ueC5qc29uJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbmQgYW5ndWxhci5qc29uIHdvcmtzcGFjZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tlZEZzLmV4aXN0c1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKChmaWxlUGF0aCkgPT4ge1xuICAgICAgICByZXR1cm4gZmlsZVBhdGggPT09ICcvdGVzdC93b3Jrc3BhY2UvYW5ndWxhci5qc29uJztcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm9qZWN0RGV0ZWN0b3IuZmluZE54V29ya3NwYWNlKCk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKCcvdGVzdC93b3Jrc3BhY2UvYW5ndWxhci5qc29uJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBudWxsIGlmIG5vIHdvcmtzcGFjZSBjb25maWcgZm91bmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrZWRGcy5leGlzdHNTeW5jLm1vY2tSZXR1cm5WYWx1ZShmYWxzZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb2plY3REZXRlY3Rvci5maW5kTnhXb3Jrc3BhY2UoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tlZEZzLmV4aXN0c1N5bmMubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaWxlIHN5c3RlbSBlcnJvcicpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb2plY3REZXRlY3Rvci5maW5kTnhXb3Jrc3BhY2UoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRQcm9qZWN0cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHBhcnNlIE5YIHdvcmtzcGFjZSB3aXRoIHByb2plY3QuanNvbiBmaWxlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgZmlsZSBzeXN0ZW0gdG8gc2ltdWxhdGUgZW1wdHkgcHJvamVjdCBkZXRlY3Rpb25cbiAgICAgIG1vY2tlZEZzLmV4aXN0c1N5bmMubW9ja1JldHVyblZhbHVlKGZhbHNlKTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2NrZWRGcywgJ3JlYWRkaXJTeW5jJywge1xuICAgICAgICAgIHZhbHVlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKFtdKSxcbiAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgbW9ja2VkRnMuc3RhdFN5bmMgPSBqZXN0LmZuKCkgYXMgYW55O1xuXG4gICAgICBjb25zdCBwcm9qZWN0cyA9IGF3YWl0IHByb2plY3REZXRlY3Rvci5nZXRQcm9qZWN0cygpO1xuXG4gICAgICAvLyBTaG91bGQgcmV0dXJuIGVtcHR5IGFycmF5IHdoZW4gbm8gcHJvamVjdHMgYXJlIGZvdW5kXG4gICAgICBleHBlY3QocHJvamVjdHMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcGFyc2UgQW5ndWxhciB3b3Jrc3BhY2UgZm9ybWF0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYW5ndWxhckNvbmZpZyA9IHtcbiAgICAgICAgcHJvamVjdHM6IHtcbiAgICAgICAgICAnbXktYXBwJzoge1xuICAgICAgICAgICAgcm9vdDogJ3Byb2plY3RzL215LWFwcCcsXG4gICAgICAgICAgICBwcm9qZWN0VHlwZTogJ2FwcGxpY2F0aW9uJyxcbiAgICAgICAgICAgIGFyY2hpdGVjdDoge1xuICAgICAgICAgICAgICBidWlsZDoge30sXG4gICAgICAgICAgICAgIHRlc3Q6IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBtb2NrZWRGcy5leGlzdHNTeW5jLm1vY2tJbXBsZW1lbnRhdGlvbigoZmlsZVBhdGgpID0+IHtcbiAgICAgICAgcmV0dXJuIGZpbGVQYXRoID09PSAnL3Rlc3Qvd29ya3NwYWNlL2FuZ3VsYXIuanNvbic7XG4gICAgICB9KTtcbiAgICAgIG1vY2tlZEZzLnJlYWRGaWxlU3luYy5tb2NrUmV0dXJuVmFsdWUoSlNPTi5zdHJpbmdpZnkoYW5ndWxhckNvbmZpZykpO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vY2tlZEZzLCAncmVhZGRpclN5bmMnLCB7XG4gICAgICAgICAgdmFsdWU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoW10pLFxuICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBtb2NrZWRGcy5zdGF0U3luYyA9IGplc3QuZm4oKSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IHByb2plY3RzID0gYXdhaXQgcHJvamVjdERldGVjdG9yLmdldFByb2plY3RzKCk7XG5cbiAgICAgIGV4cGVjdChwcm9qZWN0cykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHByb2plY3RzWzBdKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgbmFtZTogJ215LWFwcCcsXG4gICAgICAgIHR5cGU6ICdhbmd1bGFyJyxcbiAgICAgICAgcHJvamVjdFR5cGU6ICdhcHBsaWNhdGlvbicsXG4gICAgICAgIHRhcmdldHM6IHsgYnVpbGQ6IHt9LCB0ZXN0OiB7fSB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGlubGluZSBwcm9qZWN0IGNvbmZpZ3VyYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbnhDb25maWcgPSB7XG4gICAgICAgIHByb2plY3RzOiB7XG4gICAgICAgICAgJ2lubGluZS1wcm9qZWN0Jzoge1xuICAgICAgICAgICAgcm9vdDogJ2FwcHMvaW5saW5lJyxcbiAgICAgICAgICAgIHByb2plY3RUeXBlOiAnYXBwbGljYXRpb24nLFxuICAgICAgICAgICAgdGFyZ2V0czogeyBidWlsZDoge30gfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgbW9ja2VkRnMuZXhpc3RzU3luYy5tb2NrSW1wbGVtZW50YXRpb24oKGZpbGVQYXRoKSA9PiB7XG4gICAgICAgIHJldHVybiBmaWxlUGF0aCA9PT0gJy90ZXN0L3dvcmtzcGFjZS9ueC5qc29uJztcbiAgICAgIH0pO1xuICAgICAgbW9ja2VkRnMucmVhZEZpbGVTeW5jLm1vY2tSZXR1cm5WYWx1ZShKU09OLnN0cmluZ2lmeShueENvbmZpZykpO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vY2tlZEZzLCAncmVhZGRpclN5bmMnLCB7XG4gICAgICAgICAgdmFsdWU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoW10pLFxuICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBtb2NrZWRGcy5zdGF0U3luYyA9IGplc3QuZm4oKSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IHByb2plY3RzID0gYXdhaXQgcHJvamVjdERldGVjdG9yLmdldFByb2plY3RzKCk7XG5cbiAgICAgIGV4cGVjdChwcm9qZWN0cykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHByb2plY3RzWzBdKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgbmFtZTogJ2lubGluZS1wcm9qZWN0JyxcbiAgICAgICAgdHlwZTogJ254JyxcbiAgICAgICAgcHJvamVjdFR5cGU6ICdhcHBsaWNhdGlvbidcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZW1wdHkgYXJyYXkgd2hlbiBubyBjb25maWcgZm91bmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrZWRGcy5leGlzdHNTeW5jLm1vY2tSZXR1cm5WYWx1ZShmYWxzZSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobW9ja2VkRnMsICdyZWFkZGlyU3luYycsIHtcbiAgICAgICAgICB2YWx1ZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbXSksXG4gICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIG1vY2tlZEZzLnN0YXRTeW5jID0gamVzdC5mbigpIGFzIGFueTtcblxuICAgICAgY29uc3QgcHJvamVjdHMgPSBhd2FpdCBwcm9qZWN0RGV0ZWN0b3IuZ2V0UHJvamVjdHMoKTtcbiAgICAgIGV4cGVjdChwcm9qZWN0cykudG9FcXVhbChbXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBKU09OIHBhcnNpbmcgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja2VkRnMuZXhpc3RzU3luYy5tb2NrUmV0dXJuVmFsdWUodHJ1ZSk7XG4gICAgICBtb2NrZWRGcy5yZWFkRmlsZVN5bmMubW9ja1JldHVyblZhbHVlKCdpbnZhbGlkIGpzb24nKTtcblxuICAgICAgamVzdC5zcHlPbihwcm9qZWN0RGV0ZWN0b3IsICdmaW5kTnhXb3Jrc3BhY2UnKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnL3Rlc3Qvd29ya3NwYWNlL254Lmpzb24nKTtcblxuICAgICAgY29uc3QgcHJvamVjdHMgPSBhd2FpdCBwcm9qZWN0RGV0ZWN0b3IuZ2V0UHJvamVjdHMoKTtcbiAgICAgIGV4cGVjdChwcm9qZWN0cykudG9FcXVhbChbXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkZXRlY3RDdXJyZW50UHJvamVjdCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBwcm9qZWN0IGZyb20gYWN0aXZlIGZpbGUgcGF0aCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQcm9qZWN0cyA9IFtcbiAgICAgIHsgbmFtZTogJ215LWFwcCcsIHJvb3Q6ICdhcHBzL215LWFwcCcsIHByb2plY3RUeXBlOiAnYXBwbGljYXRpb24nIGFzIGNvbnN0LCB0eXBlOiAnbngnIGFzIGNvbnN0LCBwYWNrYWdlSnNvblBhdGg6ICdhcHBzL215LWFwcC9wYWNrYWdlLmpzb24nIH0sXG4gICAgICB7IG5hbWU6ICdteS1saWInLCByb290OiAnbGlicy9teS1saWInLCBwcm9qZWN0VHlwZTogJ2xpYnJhcnknIGFzIGNvbnN0LCB0eXBlOiAnbngnIGFzIGNvbnN0LCBwYWNrYWdlSnNvblBhdGg6ICdsaWJzL215LWxpYi9wYWNrYWdlLmpzb24nIH1cbiAgICAgIF07XG5cbiAgICAgIGplc3Quc3B5T24ocHJvamVjdERldGVjdG9yLCAnZ2V0UHJvamVjdHMnKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUHJvamVjdHMpO1xuXG4gICAgICAvLyBNb2NrIHZzY29kZSB3aW5kb3cuYWN0aXZlVGV4dEVkaXRvclxuICAgICAgbW9ja1ZzY29kZS53aW5kb3cuYWN0aXZlVGV4dEVkaXRvciA9IHtcbiAgICAgICAgZG9jdW1lbnQ6IHtcbiAgICAgICAgICB1cmk6IHtcbiAgICAgICAgICAgIGZzUGF0aDogJy90ZXN0L3dvcmtzcGFjZS9hcHBzL215LWFwcC9zcmMvbWFpbi50cydcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBtb2NrZWRQYXRoLnJlbGF0aXZlLm1vY2tSZXR1cm5WYWx1ZSgnYXBwcy9teS1hcHAvc3JjL21haW4udHMnKTtcblxuICAgICAgY29uc3QgY3VycmVudFByb2plY3QgPSBhd2FpdCBwcm9qZWN0RGV0ZWN0b3IuZGV0ZWN0Q3VycmVudFByb2plY3QoKTtcbiAgICAgIGV4cGVjdChjdXJyZW50UHJvamVjdCkudG9CZSgnbXktYXBwJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBudWxsIHdoZW4gbm8gYWN0aXZlIGVkaXRvcicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tWc2NvZGUud2luZG93LmFjdGl2ZVRleHRFZGl0b3IgPSBudWxsO1xuXG4gICAgICBjb25zdCBjdXJyZW50UHJvamVjdCA9IGF3YWl0IHByb2plY3REZXRlY3Rvci5kZXRlY3RDdXJyZW50UHJvamVjdCgpO1xuICAgICAgZXhwZWN0KGN1cnJlbnRQcm9qZWN0KS50b0JlTnVsbCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbnVsbCB3aGVuIGZpbGUgaXMgbm90IGluIGFueSBwcm9qZWN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Byb2plY3RzID0gW1xuICAgICAgICB7IG5hbWU6ICdteS1hcHAnLCByb290OiAnYXBwcy9teS1hcHAnLCBwcm9qZWN0VHlwZTogJ2FwcGxpY2F0aW9uJyBhcyBjb25zdCwgdHlwZTogJ254JyBhcyBjb25zdCwgcGFja2FnZUpzb25QYXRoOiAnYXBwcy9teS1hcHAvcGFja2FnZS5qc29uJyB9XG4gICAgICBdO1xuXG4gICAgICBqZXN0LnNweU9uKHByb2plY3REZXRlY3RvciwgJ2dldFByb2plY3RzJykubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Byb2plY3RzKTtcblxuICAgICAgbW9ja1ZzY29kZS53aW5kb3cuYWN0aXZlVGV4dEVkaXRvciA9IHtcbiAgICAgICAgZG9jdW1lbnQ6IHtcbiAgICAgICAgICB1cmk6IHtcbiAgICAgICAgICAgIGZzUGF0aDogJy90ZXN0L3dvcmtzcGFjZS9vdGhlci9maWxlLnRzJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIG1vY2tlZFBhdGgucmVsYXRpdmUubW9ja1JldHVyblZhbHVlKCdvdGhlci9maWxlLnRzJyk7XG5cbiAgICAgIGNvbnN0IGN1cnJlbnRQcm9qZWN0ID0gYXdhaXQgcHJvamVjdERldGVjdG9yLmRldGVjdEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgICBleHBlY3QoY3VycmVudFByb2plY3QpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRQcm9qZWN0JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHByb2plY3QgYnkgbmFtZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQcm9qZWN0cyA9IFtcbiAgICAgICAgeyBuYW1lOiAnbXktYXBwJywgcm9vdDogJ2FwcHMvbXktYXBwJywgcHJvamVjdFR5cGU6ICdhcHBsaWNhdGlvbicgYXMgY29uc3QsIHR5cGU6ICdueCcgYXMgY29uc3QsIHBhY2thZ2VKc29uUGF0aDogJ2FwcHMvbXktYXBwL3BhY2thZ2UuanNvbicgfSxcbiAgICAgICAgeyBuYW1lOiAnbXktbGliJywgcm9vdDogJ2xpYnMvbXktbGliJywgcHJvamVjdFR5cGU6ICdsaWJyYXJ5JyBhcyBjb25zdCwgdHlwZTogJ254JyBhcyBjb25zdCwgcGFja2FnZUpzb25QYXRoOiAnbGlicy9teS1saWIvcGFja2FnZS5qc29uJyB9XG4gICAgICBdO1xuXG4gICAgICBqZXN0LnNweU9uKHByb2plY3REZXRlY3RvciwgJ2dldFByb2plY3RzJykubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Byb2plY3RzKTtcblxuICAgICAgY29uc3QgcHJvamVjdCA9IGF3YWl0IHByb2plY3REZXRlY3Rvci5nZXRQcm9qZWN0KCdteS1saWInKTtcbiAgICAgIGV4cGVjdChwcm9qZWN0KS50b0VxdWFsKG1vY2tQcm9qZWN0c1sxXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBudWxsIGZvciBub24tZXhpc3RlbnQgcHJvamVjdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGplc3Quc3B5T24ocHJvamVjdERldGVjdG9yLCAnZ2V0UHJvamVjdHMnKS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG5cbiAgICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBwcm9qZWN0RGV0ZWN0b3IuZ2V0UHJvamVjdCgnbm9uLWV4aXN0ZW50Jyk7XG4gICAgICBleHBlY3QocHJvamVjdCkudG9CZU51bGwoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2hhc1RhcmdldCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0cnVlIHdoZW4gcHJvamVjdCBoYXMgdGFyZ2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Byb2plY3QgPSB7XG4gICAgICAgIG5hbWU6ICdteS1hcHAnLFxuICAgICAgICByb290OiAnYXBwcy9teS1hcHAnLFxuICAgICAgICBwcm9qZWN0VHlwZTogJ2FwcGxpY2F0aW9uJyBhcyBjb25zdCxcbiAgICAgICAgdHlwZTogJ254JyBhcyBjb25zdCxcbiAgICAgICAgcGFja2FnZUpzb25QYXRoOiAnYXBwcy9teS1hcHAvcGFja2FnZS5qc29uJyxcbiAgICAgICAgdGFyZ2V0czogeyBidWlsZDoge30sIHRlc3Q6IHt9IH1cbiAgICAgIH07XG5cbiAgICAgIGplc3Quc3B5T24ocHJvamVjdERldGVjdG9yLCAnZ2V0UHJvamVjdCcpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQcm9qZWN0KTtcblxuICAgICAgY29uc3QgaGFzVGFyZ2V0ID0gYXdhaXQgcHJvamVjdERldGVjdG9yLmhhc1RhcmdldCgnbXktYXBwJywgJ2J1aWxkJyk7XG4gICAgICBleHBlY3QoaGFzVGFyZ2V0KS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2Ugd2hlbiBwcm9qZWN0IGRvZXMgbm90IGhhdmUgdGFyZ2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Byb2plY3QgPSB7XG4gICAgICAgIG5hbWU6ICdteS1hcHAnLFxuICAgICAgICByb290OiAnYXBwcy9teS1hcHAnLFxuICAgICAgICBwcm9qZWN0VHlwZTogJ2FwcGxpY2F0aW9uJyBhcyBjb25zdCxcbiAgICAgICAgdHlwZTogJ254JyBhcyBjb25zdCxcbiAgICAgICAgcGFja2FnZUpzb25QYXRoOiAnYXBwcy9teS1hcHAvcGFja2FnZS5qc29uJyxcbiAgICAgICAgdGFyZ2V0czogeyBidWlsZDoge30gfVxuICAgICAgfTtcblxuICAgICAgamVzdC5zcHlPbihwcm9qZWN0RGV0ZWN0b3IsICdnZXRQcm9qZWN0JykubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Byb2plY3QpO1xuXG4gICAgICBjb25zdCBoYXNUYXJnZXQgPSBhd2FpdCBwcm9qZWN0RGV0ZWN0b3IuaGFzVGFyZ2V0KCdteS1hcHAnLCAndGVzdCcpO1xuICAgICAgZXhwZWN0KGhhc1RhcmdldCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSB3aGVuIHByb2plY3Qgbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5zcHlPbihwcm9qZWN0RGV0ZWN0b3IsICdnZXRQcm9qZWN0JykubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIGNvbnN0IGhhc1RhcmdldCA9IGF3YWl0IHByb2plY3REZXRlY3Rvci5oYXNUYXJnZXQoJ25vbi1leGlzdGVudCcsICdidWlsZCcpO1xuICAgICAgZXhwZWN0KGhhc1RhcmdldCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSB3aGVuIHByb2plY3QgaGFzIG5vIHRhcmdldHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUHJvamVjdCA9IHtcbiAgICAgICAgbmFtZTogJ215LWFwcCcsXG4gICAgICAgIHJvb3Q6ICdhcHBzL215LWFwcCcsXG4gICAgICAgIHByb2plY3RUeXBlOiAnYXBwbGljYXRpb24nIGFzIGNvbnN0LFxuICAgICAgICB0eXBlOiAnbngnIGFzIGNvbnN0LFxuICAgICAgICBwYWNrYWdlSnNvblBhdGg6ICdhcHBzL215LWFwcC9wYWNrYWdlLmpzb24nXG4gICAgICB9O1xuXG4gICAgICBqZXN0LnNweU9uKHByb2plY3REZXRlY3RvciwgJ2dldFByb2plY3QnKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUHJvamVjdCk7XG5cbiAgICAgIGNvbnN0IGhhc1RhcmdldCA9IGF3YWl0IHByb2plY3REZXRlY3Rvci5oYXNUYXJnZXQoJ215LWFwcCcsICdidWlsZCcpO1xuICAgICAgZXhwZWN0KGhhc1RhcmdldCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRXb3Jrc3BhY2VSb290JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHdvcmtzcGFjZSByb290IGRpcmVjdG9yeScsICgpID0+IHtcbiAgICAgIGNvbnN0IHJvb3QgPSBwcm9qZWN0RGV0ZWN0b3IuZ2V0V29ya3NwYWNlUm9vdCgpO1xuICAgICAgZXhwZWN0KHJvb3QpLnRvQmUoJy90ZXN0L3dvcmtzcGFjZScpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9