c6354400fe35f4b217e112c0d015a7b0
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Mock VSCode completely for integration tests
jest.mock('vscode', () => ({
    StatusBarAlignment: {
        Left: 1,
        Right: 2
    },
    Uri: {
        joinPath: jest.fn(() => ({ toString: () => 'mock://uri' })),
        parse: jest.fn(() => ({ toString: () => 'mock://uri' }))
    },
    workspace: {
        workspaceFolders: [{ uri: { fsPath: '/test/workspace' } }],
        getConfiguration: jest.fn(() => ({
            get: jest.fn(() => true)
        }))
    },
    window: {
        createStatusBarItem: jest.fn(() => ({
            show: jest.fn(),
            hide: jest.fn(),
            dispose: jest.fn(),
            text: '',
            tooltip: '',
            command: ''
        })),
        showInformationMessage: jest.fn(),
        showErrorMessage: jest.fn(),
        createOutputChannel: jest.fn(() => ({
            append: jest.fn(),
            appendLine: jest.fn(),
            show: jest.fn(),
            hide: jest.fn(),
            dispose: jest.fn()
        }))
    }
}));
const provider_1 = require("../webview/provider");
const statusTracker_1 = require("../utils/statusTracker");
const vscode = __importStar(require("vscode"));
describe('Integration Tests', () => {
    let provider;
    let mockProjectDetector;
    let mockCommandRunner;
    let mockFileManager;
    let mockWebviewView;
    let mockWebview;
    let receivedMessages = [];
    beforeEach(() => {
        jest.clearAllMocks();
        receivedMessages = [];
        // Setup mocked dependencies
        mockProjectDetector = {
            getProjects: jest.fn().mockResolvedValue([
                { name: 'test-app', root: 'apps/test-app', projectType: 'application' }
            ]),
            getCurrentProject: jest.fn().mockResolvedValue({ name: 'test-app', root: 'apps/test-app', projectType: 'application' })
        };
        mockCommandRunner = {
            runAiDebug: jest.fn().mockResolvedValue({ success: true, exitCode: 0, output: 'AI debug complete', duration: 2000 }),
            runNxTest: jest.fn().mockResolvedValue({ success: true, exitCode: 0, output: 'Tests passed', duration: 5000 }),
            runGitDiff: jest.fn().mockResolvedValue({ success: true, exitCode: 0, output: 'Diff complete', duration: 1000 }),
            runPrepareToPush: jest.fn().mockResolvedValue({ success: true, exitCode: 0, output: 'Prepared to push', duration: 3000 })
        };
        mockFileManager = {
            watchFiles: jest.fn(),
            getFileContent: jest.fn().mockResolvedValue('test file content'),
            openFile: jest.fn()
        };
        // Setup webview mocks that capture messages
        mockWebview = {
            asWebviewUri: jest.fn().mockReturnValue('mock://webview-uri'),
            postMessage: jest.fn((message) => {
                receivedMessages.push(message);
                return Promise.resolve(true);
            }),
            onDidReceiveMessage: jest.fn(),
            html: '',
            options: {}
        };
        mockWebviewView = {
            webview: mockWebview,
            show: jest.fn()
        };
        // Create provider
        const mockStatusTracker = new statusTracker_1.StatusTracker();
        provider = new provider_1.WebviewProvider(vscode.Uri.parse('test://extension'), mockProjectDetector, mockCommandRunner, mockFileManager, mockStatusTracker);
    });
    describe('webview integration', () => {
        beforeEach(() => {
            provider.resolveWebviewView(mockWebviewView, {}, {});
        });
        it('should handle runCommand message for nxTest', async () => {
            // Arrange
            const message = {
                command: 'runCommand',
                data: {
                    action: 'nxTest',
                    project: 'test-app',
                    options: {}
                }
            };
            const messageHandler = mockWebview.onDidReceiveMessage.mock.calls[0][0];
            // Act
            await messageHandler(message);
            // Assert
            expect(mockCommandRunner.runNxTest).toHaveBeenCalledWith('test-app', {});
            expect(receivedMessages.some(msg => msg.type === 'commandResult')).toBe(true);
            const resultMessage = receivedMessages.find(msg => msg.type === 'commandResult');
            expect(resultMessage.data.action).toBe('nxTest');
            expect(resultMessage.data.result.success).toBe(true);
        });
        it('should handle runCommand message for gitDiff', async () => {
            // Arrange
            const message = {
                command: 'runCommand',
                data: {
                    action: 'gitDiff',
                    options: {}
                }
            };
            const messageHandler = mockWebview.onDidReceiveMessage.mock.calls[0][0];
            // Act
            await messageHandler(message);
            // Assert
            expect(mockCommandRunner.runGitDiff).toHaveBeenCalledWith({});
            expect(receivedMessages.some(msg => msg.type === 'commandResult')).toBe(true);
        });
        it('should handle runCommand message for aiDebug', async () => {
            // Arrange
            const message = {
                command: 'runCommand',
                data: {
                    action: 'aiDebug',
                    project: 'test-app',
                    options: {}
                }
            };
            const messageHandler = mockWebview.onDidReceiveMessage.mock.calls[0][0];
            // Act
            await messageHandler(message);
            // Assert
            expect(mockCommandRunner.runAiDebug).toHaveBeenCalledWith('test-app', {});
            expect(receivedMessages.some(msg => msg.type === 'commandResult')).toBe(true);
        });
        it('should handle getProjects message', async () => {
            // Arrange
            const message = {
                command: 'getProjects',
                data: {}
            };
            const messageHandler = mockWebview.onDidReceiveMessage.mock.calls[0][0];
            // Act
            await messageHandler(message);
            // Assert
            expect(mockProjectDetector.getProjects).toHaveBeenCalled();
            expect(receivedMessages.some(msg => msg.type === 'projects')).toBe(true);
            const projectsMessage = receivedMessages.find(msg => msg.type === 'projects');
            expect(projectsMessage.data.projects).toHaveLength(1);
            expect(projectsMessage.data.projects[0].name).toBe('test-app');
        });
        it('should handle openFile message', async () => {
            // Arrange
            const message = {
                command: 'openFile',
                data: {
                    filePath: '/test/file.ts'
                }
            };
            const messageHandler = mockWebview.onDidReceiveMessage.mock.calls[0][0];
            // Act
            await messageHandler(message);
            // Assert
            expect(mockFileManager.openFile).toHaveBeenCalledWith('/test/file.ts');
        });
        it('should handle clearOutput message', async () => {
            // Arrange
            const message = {
                command: 'clearOutput',
                data: {}
            };
            const messageHandler = mockWebview.onDidReceiveMessage.mock.calls[0][0];
            // Act
            await messageHandler(message);
            // Assert
            expect(receivedMessages.some(msg => msg.type === 'outputCleared')).toBe(true);
        });
        it('should handle unknown message command', async () => {
            // Arrange
            const consoleSpy = jest.spyOn(console, 'warn').mockImplementation();
            const message = {
                command: 'unknownCommand',
                data: {}
            };
            const messageHandler = mockWebview.onDidReceiveMessage.mock.calls[0][0];
            // Act
            await messageHandler(message);
            // Assert
            expect(consoleSpy).toHaveBeenCalledWith('Unknown message command:', 'unknownCommand');
            consoleSpy.mockRestore();
        });
        it('should handle command errors gracefully', async () => {
            // Arrange
            mockCommandRunner.runNxTest.mockRejectedValue(new Error('Command failed'));
            const message = {
                command: 'runCommand',
                data: {
                    action: 'nxTest',
                    project: 'test-app'
                }
            };
            const messageHandler = mockWebview.onDidReceiveMessage.mock.calls[0][0];
            // Act
            await messageHandler(message);
            // Assert
            expect(receivedMessages.some(msg => msg.type === 'commandError')).toBe(true);
            const errorMessage = receivedMessages.find(msg => msg.type === 'commandError');
            expect(errorMessage.data.action).toBe('nxTest');
            expect(errorMessage.data.error).toBe('Command failed');
        });
        it('should handle project detection errors', async () => {
            // Arrange
            mockProjectDetector.getProjects.mockRejectedValue(new Error('Project detection failed'));
            const message = {
                command: 'getProjects',
                data: {}
            };
            const messageHandler = mockWebview.onDidReceiveMessage.mock.calls[0][0];
            // Act
            await messageHandler(message);
            // Assert
            expect(receivedMessages.some(msg => msg.type === 'error')).toBe(true);
            const errorMessage = receivedMessages.find(msg => msg.type === 'error');
            expect(errorMessage.data.error).toBe('Project detection failed');
        });
        it('should handle file operation errors', async () => {
            // Arrange
            mockFileManager.openFile.mockRejectedValue(new Error('File not found'));
            const message = {
                command: 'openFile',
                data: {
                    filePath: '/non/existent/file.ts'
                }
            };
            const messageHandler = mockWebview.onDidReceiveMessage.mock.calls[0][0];
            // Act
            await messageHandler(message);
            // Assert
            expect(receivedMessages.some(msg => msg.type === 'error')).toBe(true);
            const errorMessage = receivedMessages.find(msg => msg.type === 'error');
            expect(errorMessage.data.error).toBe('File not found');
        });
        it('should handle invalid action in runCommand', async () => {
            // Arrange
            vscode.window.showErrorMessage = jest.fn();
            const message = {
                command: 'runCommand',
                data: {
                    action: 'invalidAction',
                    project: 'test-app'
                }
            };
            const messageHandler = mockWebview.onDidReceiveMessage.mock.calls[0][0];
            // Act
            await messageHandler(message);
            // Assert
            expect(receivedMessages.some(msg => msg.type === 'commandError')).toBe(true);
            const errorMessage = receivedMessages.find(msg => msg.type === 'commandError');
            expect(errorMessage.data.error).toContain('Unknown action: invalidAction');
        });
    });
    describe('webview setup', () => {
        it('should set up webview correctly', () => {
            // Act
            provider.resolveWebviewView(mockWebviewView, {}, {});
            // Assert
            expect(mockWebviewView.webview.options.enableScripts).toBe(true);
            expect(mockWebviewView.webview.options.localResourceRoots).toEqual([vscode.Uri.parse('test://extension')]);
            expect(mockWebviewView.webview.html).toContain('<!DOCTYPE html>');
            expect(mockWebviewView.webview.onDidReceiveMessage).toHaveBeenCalled();
            expect(mockFileManager.watchFiles).toHaveBeenCalled();
        });
        it('should set up file watcher', () => {
            // Arrange
            provider.resolveWebviewView(mockWebviewView, {}, {});
            // Get the file watcher callback
            const watchFilesCallback = mockFileManager.watchFiles.mock.calls[0][0];
            // Act
            watchFilesCallback('/test/file.ts', 'modified');
            // Assert
            expect(receivedMessages.some(msg => msg.type === 'fileChanged')).toBe(true);
            const fileChangedMessage = receivedMessages.find(msg => msg.type === 'fileChanged');
            expect(fileChangedMessage.data.filePath).toBe('/test/file.ts');
            expect(fileChangedMessage.data.eventType).toBe('modified');
        });
        it('should generate correct HTML for webview', () => {
            // Act
            provider.resolveWebviewView(mockWebviewView, {}, {});
            // Assert
            const html = mockWebviewView.webview.html;
            expect(html).toContain('<!DOCTYPE html>');
            expect(html).toContain('<title>AI Debug Utilities</title>');
            expect(html).toContain('<div id="root"></div>');
            expect(html).toContain('mock://webview-uri');
        });
    });
    describe('public methods', () => {
        beforeEach(() => {
            provider.resolveWebviewView(mockWebviewView, {}, {});
        });
        it('should show webview when show() is called', () => {
            // Act
            provider.show();
            // Assert
            expect(mockWebviewView.show).toHaveBeenCalled();
        });
        it('should run command when runCommand() is called', async () => {
            // Act
            await provider.runCommand('nxTest', { project: 'test-app' });
            // Assert
            expect(mockCommandRunner.runNxTest).toHaveBeenCalledWith('test-app', undefined);
        });
        it('should dispose cleanly', () => {
            // Act
            provider.dispose();
            // Assert - should not throw
            expect(() => provider.dispose()).not.toThrow();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2dyZWdkdW5uL3NyYy90ZXN0L2FpX2RlYnVnX2NvbnRleHQvdnNjb2RlL3NyYy9fX3Rlc3RzX18vc3RyZWFtaW5nLmludGVncmF0aW9uLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRQSwrQ0FBK0M7QUFDL0MsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUN2QixrQkFBa0IsRUFBRTtRQUNoQixJQUFJLEVBQUUsQ0FBQztRQUNQLEtBQUssRUFBRSxDQUFDO0tBQ1g7SUFDRCxHQUFHLEVBQUU7UUFDRCxRQUFRLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsUUFBUSxFQUFFLEdBQUcsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUM7UUFDM0QsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDO0tBQzNEO0lBQ0QsU0FBUyxFQUFFO1FBQ1AsZ0JBQWdCLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxFQUFFLE1BQU0sRUFBRSxpQkFBaUIsRUFBRSxFQUFFLENBQUM7UUFDMUQsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQzdCLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQztTQUMzQixDQUFDLENBQUM7S0FDTjtJQUNELE1BQU0sRUFBRTtRQUNKLG1CQUFtQixFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztZQUNoQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNmLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2YsT0FBTyxFQUFF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QUFDLENBQUMsb0JBQW9CLENBQUMsVUFBVSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQ3BGLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHdCQUF3QixFQUFFLEdBQUcsRUFBRTtZQUM5QixNQUFNO1lBQ04sUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBRW5CLDRCQUE0QjtZQUM1QixNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ25ELENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvZ3JlZ2R1bm4vc3JjL3Rlc3QvYWlfZGVidWdfY29udGV4dC92c2NvZGUvc3JjL19fdGVzdHNfXy9zdHJlYW1pbmcuaW50ZWdyYXRpb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBXZWJ2aWV3UHJvdmlkZXIgfSBmcm9tICcuLi93ZWJ2aWV3L3Byb3ZpZGVyJztcbmltcG9ydCB7IFByb2plY3REZXRlY3RvciB9IGZyb20gJy4uL3V0aWxzL3Byb2plY3REZXRlY3Rvcic7XG5pbXBvcnQgeyBDb21tYW5kUnVubmVyIH0gZnJvbSAnLi4vdXRpbHMvc2hlbGxSdW5uZXInO1xuaW1wb3J0IHsgRmlsZU1hbmFnZXIgfSBmcm9tICcuLi91dGlscy9maWxlTWFuYWdlcic7XG5pbXBvcnQgeyBTdGF0dXNUcmFja2VyIH0gZnJvbSAnLi4vdXRpbHMvc3RhdHVzVHJhY2tlcic7XG5pbXBvcnQgeyBXZWJ2aWV3TWVzc2FnZSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCAqIGFzIHZzY29kZSBmcm9tICd2c2NvZGUnO1xuXG4vLyBNb2NrIFZTQ29kZSBjb21wbGV0ZWx5IGZvciBpbnRlZ3JhdGlvbiB0ZXN0c1xuamVzdC5tb2NrKCd2c2NvZGUnLCAoKSA9PiAoe1xuICAgIFN0YXR1c0JhckFsaWdubWVudDoge1xuICAgICAgICBMZWZ0OiAxLFxuICAgICAgICBSaWdodDogMlxuICAgIH0sXG4gICAgVXJpOiB7XG4gICAgICAgIGpvaW5QYXRoOiBqZXN0LmZuKCgpID0+ICh7IHRvU3RyaW5nOiAoKSA9PiAnbW9jazovL3VyaScgfSkpLFxuICAgICAgICBwYXJzZTogamVzdC5mbigoKSA9PiAoeyB0b1N0cmluZzogKCkgPT4gJ21vY2s6Ly91cmknIH0pKVxuICAgIH0sXG4gICAgd29ya3NwYWNlOiB7XG4gICAgICAgIHdvcmtzcGFjZUZvbGRlcnM6IFt7IHVyaTogeyBmc1BhdGg6ICcvdGVzdC93b3Jrc3BhY2UnIH0gfV0sXG4gICAgICAgIGdldENvbmZpZ3VyYXRpb246IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICAgIGdldDogamVzdC5mbigoKSA9PiB0cnVlKVxuICAgICAgICB9KSlcbiAgICB9LFxuICAgIHdpbmRvdzoge1xuICAgICAgICBjcmVhdGVTdGF0dXNCYXJJdGVtOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgICAgICBzaG93OiBqZXN0LmZuKCksXG4gICAgICAgICAgICBoaWRlOiBqZXN0LmZuKCksXG4gICAgICAgICAgICBkaXNwb3NlOiBqZXN0LmZuKCksXG4gICAgICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgICAgIHRvb2x0aXA6ICcnLFxuICAgICAgICAgICAgY29tbWFuZDogJydcbiAgICAgICAgfSkpLFxuICAgICAgICBzaG93SW5mb3JtYXRpb25NZXNzYWdlOiBqZXN0LmZuKCksXG4gICAgICAgIHNob3dFcnJvck1lc3NhZ2U6IGplc3QuZm4oKSxcbiAgICAgICAgY3JlYXRlT3V0cHV0Q2hhbm5lbDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgICAgYXBwZW5kOiBqZXN0LmZuKCksXG4gICAgICAgICAgICBhcHBlbmRMaW5lOiBqZXN0LmZuKCksXG4gICAgICAgICAgICBzaG93OiBqZXN0LmZuKCksXG4gICAgICAgICAgICBoaWRlOiBqZXN0LmZuKCksXG4gICAgICAgICAgICBkaXNwb3NlOiBqZXN0LmZuKClcbiAgICAgICAgfSkpXG4gICAgfVxufSkpO1xuXG5kZXNjcmliZSgnSW50ZWdyYXRpb24gVGVzdHMnLCAoKSA9PiB7XG4gICAgbGV0IHByb3ZpZGVyOiBXZWJ2aWV3UHJvdmlkZXI7XG4gICAgbGV0IG1vY2tQcm9qZWN0RGV0ZWN0b3I6IGplc3QuTW9ja2VkPFByb2plY3REZXRlY3Rvcj47XG4gICAgbGV0IG1vY2tDb21tYW5kUnVubmVyOiBqZXN0Lk1vY2tlZDxDb21tYW5kUnVubmVyPjtcbiAgICBsZXQgbW9ja0ZpbGVNYW5hZ2VyOiBqZXN0Lk1vY2tlZDxGaWxlTWFuYWdlcj47XG4gICAgbGV0IG1vY2tXZWJ2aWV3VmlldzogamVzdC5Nb2NrZWQ8dnNjb2RlLldlYnZpZXdWaWV3PjtcbiAgICBsZXQgbW9ja1dlYnZpZXc6IGplc3QuTW9ja2VkPHZzY29kZS5XZWJ2aWV3PjtcbiAgICBsZXQgcmVjZWl2ZWRNZXNzYWdlczogYW55W10gPSBbXTtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICAgICAgcmVjZWl2ZWRNZXNzYWdlcyA9IFtdO1xuXG4gICAgICAgIC8vIFNldHVwIG1vY2tlZCBkZXBlbmRlbmNpZXNcbiAgICAgICAgbW9ja1Byb2plY3REZXRlY3RvciA9IHtcbiAgICAgICAgICAgIGdldFByb2plY3RzOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW1xuICAgICAgICAgICAgICAgIHsgbmFtZTogJ3Rlc3QtYXBwJywgcm9vdDogJ2FwcHMvdGVzdC1hcHAnLCBwcm9qZWN0VHlwZTogJ2FwcGxpY2F0aW9uJyB9XG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIGdldEN1cnJlbnRQcm9qZWN0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBuYW1lOiAndGVzdC1hcHAnLCByb290OiAnYXBwcy90ZXN0LWFwcCcsIHByb2plY3RUeXBlOiAnYXBwbGljYXRpb24nIH0pXG4gICAgICAgIH0gYXMgYW55O1xuXG4gICAgICAgIG1vY2tDb21tYW5kUnVubmVyID0ge1xuICAgICAgICAgICAgcnVuQWlEZWJ1ZzogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgc3VjY2VzczogdHJ1ZSwgZXhpdENvZGU6IDAsIG91dHB1dDogJ0FJIGRlYnVnIGNvbXBsZXRlJywgZHVyYXRpb246IDIwMDAgfSksXG4gICAgICAgICAgICBydW5OeFRlc3Q6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHN1Y2Nlc3M6IHRydWUsIGV4aXRDb2RlOiAwLCBvdXRwdXQ6ICdUZXN0cyBwYXNzZWQnLCBkdXJhdGlvbjogNTAwMCB9KSxcbiAgICAgICAgICAgIHJ1bkdpdERpZmY6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHN1Y2Nlc3M6IHRydWUsIGV4aXRDb2RlOiAwLCBvdXRwdXQ6ICdEaWZmIGNvbXBsZXRlJywgZHVyYXRpb246IDEwMDAgfSksXG4gICAgICAgICAgICBydW5QcmVwYXJlVG9QdXNoOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBzdWNjZXNzOiB0cnVlLCBleGl0Q29kZTogMCwgb3V0cHV0OiAnUHJlcGFyZWQgdG8gcHVzaCcsIGR1cmF0aW9uOiAzMDAwIH0pXG4gICAgICAgIH0gYXMgYW55O1xuXG4gICAgICAgIG1vY2tGaWxlTWFuYWdlciA9IHtcbiAgICAgICAgICAgIHdhdGNoRmlsZXM6IGplc3QuZm4oKSxcbiAgICAgICAgICAgIGdldEZpbGVDb250ZW50OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJ3Rlc3QgZmlsZSBjb250ZW50JyksXG4gICAgICAgICAgICBvcGVuRmlsZTogamVzdC5mbigpXG4gICAgICAgIH0gYXMgYW55O1xuXG4gICAgICAgIC8vIFNldHVwIHdlYnZpZXcgbW9ja3MgdGhhdCBjYXB0dXJlIG1lc3NhZ2VzXG4gICAgICAgIG1vY2tXZWJ2aWV3ID0ge1xuICAgICAgICAgICAgYXNXZWJ2aWV3VXJpOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCdtb2NrOi8vd2Vidmlldy11cmknKSxcbiAgICAgICAgICAgIHBvc3RNZXNzYWdlOiBqZXN0LmZuKChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZWRNZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG9uRGlkUmVjZWl2ZU1lc3NhZ2U6IGplc3QuZm4oKSxcbiAgICAgICAgICAgIGh0bWw6ICcnLFxuICAgICAgICAgICAgb3B0aW9uczoge31cbiAgICAgICAgfSBhcyBhbnk7XG5cbiAgICAgICAgbW9ja1dlYnZpZXdWaWV3ID0ge1xuICAgICAgICAgICAgd2VidmlldzogbW9ja1dlYnZpZXcsXG4gICAgICAgICAgICBzaG93OiBqZXN0LmZuKClcbiAgICAgICAgfSBhcyBhbnk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHByb3ZpZGVyXG4gICAgICAgIGNvbnN0IG1vY2tTdGF0dXNUcmFja2VyID0gbmV3IFN0YXR1c1RyYWNrZXIoKTtcbiAgICAgICAgcHJvdmlkZXIgPSBuZXcgV2Vidmlld1Byb3ZpZGVyKFxuICAgICAgICAgICAgdnNjb2RlLlVyaS5wYXJzZSgndGVzdDovL2V4dGVuc2lvbicpLFxuICAgICAgICAgICAgbW9ja1Byb2plY3REZXRlY3RvcixcbiAgICAgICAgICAgIG1vY2tDb21tYW5kUnVubmVyLFxuICAgICAgICAgICAgbW9ja0ZpbGVNYW5hZ2VyLFxuICAgICAgICAgICAgbW9ja1N0YXR1c1RyYWNrZXJcbiAgICAgICAgKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCd3ZWJ2aWV3IGludGVncmF0aW9uJywgKCkgPT4ge1xuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgICAgIHByb3ZpZGVyLnJlc29sdmVXZWJ2aWV3Vmlldyhtb2NrV2Vidmlld1ZpZXcsIHt9IGFzIGFueSwge30gYXMgYW55KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgcnVuQ29tbWFuZCBtZXNzYWdlIGZvciBueFRlc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBBcnJhbmdlXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlOiBXZWJ2aWV3TWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAncnVuQ29tbWFuZCcsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdueFRlc3QnLFxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiAndGVzdC1hcHAnLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7fVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VIYW5kbGVyID0gbW9ja1dlYnZpZXcub25EaWRSZWNlaXZlTWVzc2FnZS5tb2NrLmNhbGxzWzBdWzBdO1xuXG4gICAgICAgICAgICAvLyBBY3RcbiAgICAgICAgICAgIGF3YWl0IG1lc3NhZ2VIYW5kbGVyKG1lc3NhZ2UpO1xuXG4gICAgICAgICAgICAvLyBBc3NlcnRcbiAgICAgICAgICAgIGV4cGVjdChtb2NrQ29tbWFuZFJ1bm5lci5ydW5OeFRlc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd0ZXN0LWFwcCcsIHt9KTtcbiAgICAgICAgICAgIGV4cGVjdChyZWNlaXZlZE1lc3NhZ2VzLnNvbWUobXNnID0+IG1zZy50eXBlID09PSAnY29tbWFuZFJlc3VsdCcpKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHRNZXNzYWdlID0gcmVjZWl2ZWRNZXNzYWdlcy5maW5kKG1zZyA9PiBtc2cudHlwZSA9PT0gJ2NvbW1hbmRSZXN1bHQnKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHRNZXNzYWdlLmRhdGEuYWN0aW9uKS50b0JlKCdueFRlc3QnKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHRNZXNzYWdlLmRhdGEucmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIHJ1bkNvbW1hbmQgbWVzc2FnZSBmb3IgZ2l0RGlmZicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIEFycmFuZ2VcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2U6IFdlYnZpZXdNZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICdydW5Db21tYW5kJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2dpdERpZmYnLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7fVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VIYW5kbGVyID0gbW9ja1dlYnZpZXcub25EaWRSZWNlaXZlTWVzc2FnZS5tb2NrLmNhbGxzWzBdWzBdO1xuXG4gICAgICAgICAgICAvLyBBY3RcbiAgICAgICAgICAgIGF3YWl0IG1lc3NhZ2VIYW5kbGVyKG1lc3NhZ2UpO1xuXG4gICAgICAgICAgICAvLyBBc3NlcnRcbiAgICAgICAgICAgIGV4cGVjdChtb2NrQ29tbWFuZFJ1bm5lci5ydW5HaXREaWZmKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7fSk7XG4gICAgICAgICAgICBleHBlY3QocmVjZWl2ZWRNZXNzYWdlcy5zb21lKG1zZyA9PiBtc2cudHlwZSA9PT0gJ2NvbW1hbmRSZXN1bHQnKSkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgcnVuQ29tbWFuZCBtZXNzYWdlIGZvciBhaURlYnVnJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gQXJyYW5nZVxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZTogV2Vidmlld01lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3J1bkNvbW1hbmQnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnYWlEZWJ1ZycsXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Q6ICd0ZXN0LWFwcCcsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZUhhbmRsZXIgPSBtb2NrV2Vidmlldy5vbkRpZFJlY2VpdmVNZXNzYWdlLm1vY2suY2FsbHNbMF1bMF07XG5cbiAgICAgICAgICAgIC8vIEFjdFxuICAgICAgICAgICAgYXdhaXQgbWVzc2FnZUhhbmRsZXIobWVzc2FnZSk7XG5cbiAgICAgICAgICAgIC8vIEFzc2VydFxuICAgICAgICAgICAgZXhwZWN0KG1vY2tDb21tYW5kUnVubmVyLnJ1bkFpRGVidWcpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd0ZXN0LWFwcCcsIHt9KTtcbiAgICAgICAgICAgIGV4cGVjdChyZWNlaXZlZE1lc3NhZ2VzLnNvbWUobXNnID0+IG1zZy50eXBlID09PSAnY29tbWFuZFJlc3VsdCcpKS50b0JlKHRydWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBnZXRQcm9qZWN0cyBtZXNzYWdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gQXJyYW5nZVxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZTogV2Vidmlld01lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ2dldFByb2plY3RzJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7fVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZUhhbmRsZXIgPSBtb2NrV2Vidmlldy5vbkRpZFJlY2VpdmVNZXNzYWdlLm1vY2suY2FsbHNbMF1bMF07XG5cbiAgICAgICAgICAgIC8vIEFjdFxuICAgICAgICAgICAgYXdhaXQgbWVzc2FnZUhhbmRsZXIobWVzc2FnZSk7XG5cbiAgICAgICAgICAgIC8vIEFzc2VydFxuICAgICAgICAgICAgZXhwZWN0KG1vY2tQcm9qZWN0RGV0ZWN0b3IuZ2V0UHJvamVjdHMpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgICAgICAgIGV4cGVjdChyZWNlaXZlZE1lc3NhZ2VzLnNvbWUobXNnID0+IG1zZy50eXBlID09PSAncHJvamVjdHMnKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcHJvamVjdHNNZXNzYWdlID0gcmVjZWl2ZWRNZXNzYWdlcy5maW5kKG1zZyA9PiBtc2cudHlwZSA9PT0gJ3Byb2plY3RzJyk7XG4gICAgICAgICAgICBleHBlY3QocHJvamVjdHNNZXNzYWdlLmRhdGEucHJvamVjdHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgICAgICAgIGV4cGVjdChwcm9qZWN0c01lc3NhZ2UuZGF0YS5wcm9qZWN0c1swXS5uYW1lKS50b0JlKCd0ZXN0LWFwcCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBvcGVuRmlsZSBtZXNzYWdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gQXJyYW5nZVxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZTogV2Vidmlld01lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ29wZW5GaWxlJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVQYXRoOiAnL3Rlc3QvZmlsZS50cydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlSGFuZGxlciA9IG1vY2tXZWJ2aWV3Lm9uRGlkUmVjZWl2ZU1lc3NhZ2UubW9jay5jYWxsc1swXVswXTtcblxuICAgICAgICAgICAgLy8gQWN0XG4gICAgICAgICAgICBhd2FpdCBtZXNzYWdlSGFuZGxlcihtZXNzYWdlKTtcblxuICAgICAgICAgICAgLy8gQXNzZXJ0XG4gICAgICAgICAgICBleHBlY3QobW9ja0ZpbGVNYW5hZ2VyLm9wZW5GaWxlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL3Rlc3QvZmlsZS50cycpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBjbGVhck91dHB1dCBtZXNzYWdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gQXJyYW5nZVxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZTogV2Vidmlld01lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ2NsZWFyT3V0cHV0JyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7fVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZUhhbmRsZXIgPSBtb2NrV2Vidmlldy5vbkRpZFJlY2VpdmVNZXNzYWdlLm1vY2suY2FsbHNbMF1bMF07XG5cbiAgICAgICAgICAgIC8vIEFjdFxuICAgICAgICAgICAgYXdhaXQgbWVzc2FnZUhhbmRsZXIobWVzc2FnZSk7XG5cbiAgICAgICAgICAgIC8vIEFzc2VydFxuICAgICAgICAgICAgZXhwZWN0KHJlY2VpdmVkTWVzc2FnZXMuc29tZShtc2cgPT4gbXNnLnR5cGUgPT09ICdvdXRwdXRDbGVhcmVkJykpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIHVua25vd24gbWVzc2FnZSBjb21tYW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gQXJyYW5nZVxuICAgICAgICAgICAgY29uc3QgY29uc29sZVNweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ3dhcm4nKS5tb2NrSW1wbGVtZW50YXRpb24oKTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2U6IFdlYnZpZXdNZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICd1bmtub3duQ29tbWFuZCcgYXMgYW55LFxuICAgICAgICAgICAgICAgIGRhdGE6IHt9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlSGFuZGxlciA9IG1vY2tXZWJ2aWV3Lm9uRGlkUmVjZWl2ZU1lc3NhZ2UubW9jay5jYWxsc1swXVswXTtcblxuICAgICAgICAgICAgLy8gQWN0XG4gICAgICAgICAgICBhd2FpdCBtZXNzYWdlSGFuZGxlcihtZXNzYWdlKTtcblxuICAgICAgICAgICAgLy8gQXNzZXJ0XG4gICAgICAgICAgICBleHBlY3QoY29uc29sZVNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ1Vua25vd24gbWVzc2FnZSBjb21tYW5kOicsICd1bmtub3duQ29tbWFuZCcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlU3B5Lm1vY2tSZXN0b3JlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbW1hbmQgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBBcnJhbmdlXG4gICAgICAgICAgICBtb2NrQ29tbWFuZFJ1bm5lci5ydW5OeFRlc3QubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdDb21tYW5kIGZhaWxlZCcpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZTogV2Vidmlld01lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3J1bkNvbW1hbmQnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnbnhUZXN0JyxcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogJ3Rlc3QtYXBwJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VIYW5kbGVyID0gbW9ja1dlYnZpZXcub25EaWRSZWNlaXZlTWVzc2FnZS5tb2NrLmNhbGxzWzBdWzBdO1xuXG4gICAgICAgICAgICAvLyBBY3RcbiAgICAgICAgICAgIGF3YWl0IG1lc3NhZ2VIYW5kbGVyKG1lc3NhZ2UpO1xuXG4gICAgICAgICAgICAvLyBBc3NlcnRcbiAgICAgICAgICAgIGV4cGVjdChyZWNlaXZlZE1lc3NhZ2VzLnNvbWUobXNnID0+IG1zZy50eXBlID09PSAnY29tbWFuZEVycm9yJykpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHJlY2VpdmVkTWVzc2FnZXMuZmluZChtc2cgPT4gbXNnLnR5cGUgPT09ICdjb21tYW5kRXJyb3InKTtcbiAgICAgICAgICAgIGV4cGVjdChlcnJvck1lc3NhZ2UuZGF0YS5hY3Rpb24pLnRvQmUoJ254VGVzdCcpO1xuICAgICAgICAgICAgZXhwZWN0KGVycm9yTWVzc2FnZS5kYXRhLmVycm9yKS50b0JlKCdDb21tYW5kIGZhaWxlZCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBwcm9qZWN0IGRldGVjdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBBcnJhbmdlXG4gICAgICAgICAgICBtb2NrUHJvamVjdERldGVjdG9yLmdldFByb2plY3RzLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignUHJvamVjdCBkZXRlY3Rpb24gZmFpbGVkJykpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlOiBXZWJ2aWV3TWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAnZ2V0UHJvamVjdHMnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHt9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlSGFuZGxlciA9IG1vY2tXZWJ2aWV3Lm9uRGlkUmVjZWl2ZU1lc3NhZ2UubW9jay5jYWxsc1swXVswXTtcblxuICAgICAgICAgICAgLy8gQWN0XG4gICAgICAgICAgICBhd2FpdCBtZXNzYWdlSGFuZGxlcihtZXNzYWdlKTtcblxuICAgICAgICAgICAgLy8gQXNzZXJ0XG4gICAgICAgICAgICBleHBlY3QocmVjZWl2ZWRNZXNzYWdlcy5zb21lKG1zZyA9PiBtc2cudHlwZSA9PT0gJ2Vycm9yJykpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHJlY2VpdmVkTWVzc2FnZXMuZmluZChtc2cgPT4gbXNnLnR5cGUgPT09ICdlcnJvcicpO1xuICAgICAgICAgICAgZXhwZWN0KGVycm9yTWVzc2FnZS5kYXRhLmVycm9yKS50b0JlKCdQcm9qZWN0IGRldGVjdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgZmlsZSBvcGVyYXRpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gQXJyYW5nZVxuICAgICAgICAgICAgbW9ja0ZpbGVNYW5hZ2VyLm9wZW5GaWxlLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignRmlsZSBub3QgZm91bmQnKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2U6IFdlYnZpZXdNZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICdvcGVuRmlsZScsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aDogJy9ub24vZXhpc3RlbnQvZmlsZS50cydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlSGFuZGxlciA9IG1vY2tXZWJ2aWV3Lm9uRGlkUmVjZWl2ZU1lc3NhZ2UubW9jay5jYWxsc1swXVswXTtcblxuICAgICAgICAgICAgLy8gQWN0XG4gICAgICAgICAgICBhd2FpdCBtZXNzYWdlSGFuZGxlcihtZXNzYWdlKTtcblxuICAgICAgICAgICAgLy8gQXNzZXJ0XG4gICAgICAgICAgICBleHBlY3QocmVjZWl2ZWRNZXNzYWdlcy5zb21lKG1zZyA9PiBtc2cudHlwZSA9PT0gJ2Vycm9yJykpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHJlY2VpdmVkTWVzc2FnZXMuZmluZChtc2cgPT4gbXNnLnR5cGUgPT09ICdlcnJvcicpO1xuICAgICAgICAgICAgZXhwZWN0KGVycm9yTWVzc2FnZS5kYXRhLmVycm9yKS50b0JlKCdGaWxlIG5vdCBmb3VuZCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIGFjdGlvbiBpbiBydW5Db21tYW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gQXJyYW5nZVxuICAgICAgICAgICAgdnNjb2RlLndpbmRvdy5zaG93RXJyb3JNZXNzYWdlID0gamVzdC5mbigpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlOiBXZWJ2aWV3TWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAncnVuQ29tbWFuZCcsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdpbnZhbGlkQWN0aW9uJyBhcyBhbnksXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Q6ICd0ZXN0LWFwcCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlSGFuZGxlciA9IG1vY2tXZWJ2aWV3Lm9uRGlkUmVjZWl2ZU1lc3NhZ2UubW9jay5jYWxsc1swXVswXTtcblxuICAgICAgICAgICAgLy8gQWN0XG4gICAgICAgICAgICBhd2FpdCBtZXNzYWdlSGFuZGxlcihtZXNzYWdlKTtcblxuICAgICAgICAgICAgLy8gQXNzZXJ0XG4gICAgICAgICAgICBleHBlY3QocmVjZWl2ZWRNZXNzYWdlcy5zb21lKG1zZyA9PiBtc2cudHlwZSA9PT0gJ2NvbW1hbmRFcnJvcicpKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSByZWNlaXZlZE1lc3NhZ2VzLmZpbmQobXNnID0+IG1zZy50eXBlID09PSAnY29tbWFuZEVycm9yJyk7XG4gICAgICAgICAgICBleHBlY3QoZXJyb3JNZXNzYWdlLmRhdGEuZXJyb3IpLnRvQ29udGFpbignVW5rbm93biBhY3Rpb246IGludmFsaWRBY3Rpb24nKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnd2VidmlldyBzZXR1cCcsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCBzZXQgdXAgd2VidmlldyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBBY3RcbiAgICAgICAgICAgIHByb3ZpZGVyLnJlc29sdmVXZWJ2aWV3Vmlldyhtb2NrV2Vidmlld1ZpZXcsIHt9IGFzIGFueSwge30gYXMgYW55KTtcblxuICAgICAgICAgICAgLy8gQXNzZXJ0XG4gICAgICAgICAgICBleHBlY3QobW9ja1dlYnZpZXdWaWV3LndlYnZpZXcub3B0aW9ucy5lbmFibGVTY3JpcHRzKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KG1vY2tXZWJ2aWV3Vmlldy53ZWJ2aWV3Lm9wdGlvbnMubG9jYWxSZXNvdXJjZVJvb3RzKS50b0VxdWFsKFt2c2NvZGUuVXJpLnBhcnNlKCd0ZXN0Oi8vZXh0ZW5zaW9uJyldKTtcbiAgICAgICAgICAgIGV4cGVjdChtb2NrV2Vidmlld1ZpZXcud2Vidmlldy5odG1sKS50b0NvbnRhaW4oJzwhRE9DVFlQRSBodG1sPicpO1xuICAgICAgICAgICAgZXhwZWN0KG1vY2tXZWJ2aWV3Vmlldy53ZWJ2aWV3Lm9uRGlkUmVjZWl2ZU1lc3NhZ2UpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgICAgICAgIGV4cGVjdChtb2NrRmlsZU1hbmFnZXIud2F0Y2hGaWxlcykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHNldCB1cCBmaWxlIHdhdGNoZXInLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBBcnJhbmdlXG4gICAgICAgICAgICBwcm92aWRlci5yZXNvbHZlV2Vidmlld1ZpZXcobW9ja1dlYnZpZXdWaWV3LCB7fSBhcyBhbnksIHt9IGFzIGFueSk7XG5cbiAgICAgICAgICAgIC8vIEdldCB0aGUgZmlsZSB3YXRjaGVyIGNhbGxiYWNrXG4gICAgICAgICAgICBjb25zdCB3YXRjaEZpbGVzQ2FsbGJhY2sgPSBtb2NrRmlsZU1hbmFnZXIud2F0Y2hGaWxlcy5tb2NrLmNhbGxzWzBdWzBdO1xuXG4gICAgICAgICAgICAvLyBBY3RcbiAgICAgICAgICAgIHdhdGNoRmlsZXNDYWxsYmFjaygnL3Rlc3QvZmlsZS50cycsICdtb2RpZmllZCcpO1xuXG4gICAgICAgICAgICAvLyBBc3NlcnRcbiAgICAgICAgICAgIGV4cGVjdChyZWNlaXZlZE1lc3NhZ2VzLnNvbWUobXNnID0+IG1zZy50eXBlID09PSAnZmlsZUNoYW5nZWQnKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZmlsZUNoYW5nZWRNZXNzYWdlID0gcmVjZWl2ZWRNZXNzYWdlcy5maW5kKG1zZyA9PiBtc2cudHlwZSA9PT0gJ2ZpbGVDaGFuZ2VkJyk7XG4gICAgICAgICAgICBleHBlY3QoZmlsZUNoYW5nZWRNZXNzYWdlLmRhdGEuZmlsZVBhdGgpLnRvQmUoJy90ZXN0L2ZpbGUudHMnKTtcbiAgICAgICAgICAgIGV4cGVjdChmaWxlQ2hhbmdlZE1lc3NhZ2UuZGF0YS5ldmVudFR5cGUpLnRvQmUoJ21vZGlmaWVkJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgY29ycmVjdCBIVE1MIGZvciB3ZWJ2aWV3JywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gQWN0XG4gICAgICAgICAgICBwcm92aWRlci5yZXNvbHZlV2Vidmlld1ZpZXcobW9ja1dlYnZpZXdWaWV3LCB7fSBhcyBhbnksIHt9IGFzIGFueSk7XG5cbiAgICAgICAgICAgIC8vIEFzc2VydFxuICAgICAgICAgICAgY29uc3QgaHRtbCA9IG1vY2tXZWJ2aWV3Vmlldy53ZWJ2aWV3Lmh0bWw7XG4gICAgICAgICAgICBleHBlY3QoaHRtbCkudG9Db250YWluKCc8IURPQ1RZUEUgaHRtbD4nKTtcbiAgICAgICAgICAgIGV4cGVjdChodG1sKS50b0NvbnRhaW4oJzx0aXRsZT5BSSBEZWJ1ZyBVdGlsaXRpZXM8L3RpdGxlPicpO1xuICAgICAgICAgICAgZXhwZWN0KGh0bWwpLnRvQ29udGFpbignPGRpdiBpZD1cInJvb3RcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgIGV4cGVjdChodG1sKS50b0NvbnRhaW4oJ21vY2s6Ly93ZWJ2aWV3LXVyaScpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdwdWJsaWMgbWV0aG9kcycsICgpID0+IHtcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICBwcm92aWRlci5yZXNvbHZlV2Vidmlld1ZpZXcobW9ja1dlYnZpZXdWaWV3LCB7fSBhcyBhbnksIHt9IGFzIGFueSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2hvdyB3ZWJ2aWV3IHdoZW4gc2hvdygpIGlzIGNhbGxlZCcsICgpID0+IHtcbiAgICAgICAgICAgIC8vIEFjdFxuICAgICAgICAgICAgcHJvdmlkZXIuc2hvdygpO1xuXG4gICAgICAgICAgICAvLyBBc3NlcnRcbiAgICAgICAgICAgIGV4cGVjdChtb2NrV2Vidmlld1ZpZXcuc2hvdykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHJ1biBjb21tYW5kIHdoZW4gcnVuQ29tbWFuZCgpIGlzIGNhbGxlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIEFjdFxuICAgICAgICAgICAgYXdhaXQgcHJvdmlkZXIucnVuQ29tbWFuZCgnbnhUZXN0JywgeyBwcm9qZWN0OiAndGVzdC1hcHAnIH0pO1xuXG4gICAgICAgICAgICAvLyBBc3NlcnRcbiAgICAgICAgICAgIGV4cGVjdChtb2NrQ29tbWFuZFJ1bm5lci5ydW5OeFRlc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd0ZXN0LWFwcCcsIHVuZGVmaW5lZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgZGlzcG9zZSBjbGVhbmx5JywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gQWN0XG4gICAgICAgICAgICBwcm92aWRlci5kaXNwb3NlKCk7XG5cbiAgICAgICAgICAgIC8vIEFzc2VydCAtIHNob3VsZCBub3QgdGhyb3dcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiBwcm92aWRlci5kaXNwb3NlKCkpLm5vdC50b1Rocm93KCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=