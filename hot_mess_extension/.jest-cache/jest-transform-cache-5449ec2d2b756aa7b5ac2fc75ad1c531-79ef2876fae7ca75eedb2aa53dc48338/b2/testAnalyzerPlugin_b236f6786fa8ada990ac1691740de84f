43d90c0846b276170aae9d8b6ed5bba2
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.TestAnalyzerPlugin = void 0;
const vscode = __importStar(require("vscode"));
class TestAnalyzerPlugin {
    metadata = {
        id: 'builtin-test-analyzer',
        name: 'Test Analyzer',
        version: '1.0.0',
        description: 'Advanced test analysis with coverage insights and quality recommendations',
        author: 'AI Debug Team',
        license: 'MIT',
        enabled: true,
        capabilities: [
            {
                type: 'analyzer',
                name: 'test-analyzer',
                description: 'Analyze test files and results',
                permissions: ['file-system:test-files:Analyze test files and coverage reports']
            },
            {
                type: 'formatter',
                name: 'test-formatter',
                description: 'Format test results for better readability'
            },
            {
                type: 'command',
                name: 'test-insights',
                description: 'Generate test insights and recommendations'
            }
        ]
    };
    api;
    get analyzers() {
        return [
            {
                id: 'test-file-analyzer',
                name: 'Test File Analyzer',
                description: 'Analyze individual test files for quality and coverage',
                filePatterns: ['**/*.test.ts', '**/*.test.js', '**/*.spec.ts', '**/*.spec.js'],
                analyze: async (content, filePath, context) => {
                    const issues = [];
                    const metrics = {};
                    const suggestions = [];
                    try {
                        // Analyze test structure
                        const structureAnalysis = await this.analyzeTestStructure(content, filePath);
                        issues.push(...structureAnalysis.issues);
                        Object.assign(metrics, structureAnalysis.metrics);
                        suggestions.push(...structureAnalysis.suggestions);
                        // Analyze test coverage
                        const coverageAnalysis = await this.analyzeCoverage(content, filePath, context);
                        issues.push(...coverageAnalysis.issues);
                        Object.assign(metrics, coverageAnalysis.metrics);
                        suggestions.push(...coverageAnalysis.suggestions);
                        // Analyze test patterns
                        const patternAnalysis = await this.analyzeTestPatterns(content, filePath);
                        issues.push(...patternAnalysis.issues);
                        Object.assign(metrics, patternAnalysis.metrics);
                        suggestions.push(...patternAnalysis.suggestions);
                    }
                    catch (error) {
                        issues.push({
                            id: 'test-analysis-error',
                            type: 'error',
                            message: `Test analysis failed: ${error.message}`,
                            severity: 'medium',
                            fixable: false
                        });
                    }
                    return {
                        id: 'test-file-analysis',
                        summary: 'Test file analysis completed',
                        issues,
                        metrics,
                        suggestions,
                        confidence: 0.88
                    };
                }
            }
        ];
    }
    get formatters() {
        return [
            {
                id: 'test-result-formatter',
                name: 'Test Result Formatter',
                description: 'Format test results for better readability',
                filePatterns: ['**/*.test.json', '**/test-results.json'],
                format: async (content, filePath, context) => {
                    try {
                        const testResults = JSON.parse(content);
                        return this.formatTestResults(testResults);
                    }
                    catch (error) {
                        return content; // Return original if parsing fails
                    }
                }
            }
        ];
    }
    get commands() {
        return [
            {
                id: 'test-coverage-report',
                title: 'Generate Test Coverage Report',
                description: 'Generate comprehensive test coverage report',
                category: 'Testing',
                icon: 'graph',
                execute: async (context, args) => {
                    const coverageReport = await this.generateCoverageReport(context);
                    // Show results in a new document
                    const doc = await vscode.workspace.openTextDocument({
                        content: this.formatCoverageReport(coverageReport),
                        language: 'markdown'
                    });
                    await vscode.window.showTextDocument(doc);
                    return coverageReport;
                }
            },
            {
                id: 'test-quality-analysis',
                title: 'Test Quality Analysis',
                description: 'Analyze test quality and suggest improvements',
                category: 'Testing',
                icon: 'checklist',
                execute: async (context, args) => {
                    const qualityAnalysis = await this.analyzeTestQuality(context);
                    // Show quality insights
                    const items = qualityAnalysis.suggestions.map((suggestion) => ({
                        label: suggestion.title,
                        description: suggestion.description,
                        detail: `Impact: ${suggestion.impact} | Effort: ${suggestion.effort}`
                    }));
                    const selected = await vscode.window.showQuickPick(items, {
                        placeHolder: 'Select improvement to apply',
                        canPickMany: false
                    });
                    if (selected) {
                        const suggestion = qualityAnalysis.suggestions.find((s) => s.title === selected?.label);
                        if (suggestion) {
                            await this.applySuggestion(suggestion, context);
                        }
                    }
                    return qualityAnalysis;
                }
            },
            {
                id: 'test-performance-analysis',
                title: 'Test Performance Analysis',
                description: 'Analyze test performance and identify slow tests',
                category: 'Testing',
                icon: 'pulse',
                execute: async (context, args) => {
                    const performanceAnalysis = await this.analyzeTestPerformance(context);
                    // Show performance insights
                    const report = this.formatPerformanceReport(performanceAnalysis);
                    const doc = await vscode.workspace.openTextDocument({
                        content: report,
                        language: 'markdown'
                    });
                    await vscode.window.showTextDocument(doc);
                    return performanceAnalysis;
                }
            }
        ];
    }
    async activate(api, context) {
        this.api = api;
        // Register analyzers
        for (const analyzer of this.analyzers) {
            api.registerAnalyzer?.(analyzer);
        }
        // Register formatters
        for (const formatter of this.formatters) {
            api.registerFormatter?.(formatter);
        }
        // Register commands
        for (const command of this.commands) {
            api.registerCommand(command.id, command.execute);
        }
        // Listen for test events
        api.on?.('test:run', (data) => this.onTestRun(data, context));
        api.on?.('test:complete', (data) => this.onTestComplete(data, context));
        console.log('Test Analyzer Plugin activated');
    }
    async deactivate(api, context) {
        // Cleanup
        api.off?.('test:run');
        api.off?.('test:complete');
        console.log('Test Analyzer Plugin deactivated');
    }
    async analyzeTestStructure(content, filePath) {
        const issues = [];
        const metrics = {};
        const suggestions = [];
        // Count test blocks
        const describeBlocks = (content.match(/describe\s*\(/g) || []).length;
        const testBlocks = (content.match(/(?:it|test)\s*\(/g) || []).length;
        const beforeBlocks = (content.match(/before(?:Each|All)?\s*\(/g) || []).length;
        const afterBlocks = (content.match(/after(?:Each|All)?\s*\(/g) || []).length;
        metrics['describe-blocks'] = describeBlocks;
        metrics['test-blocks'] = testBlocks;
        metrics['before-blocks'] = beforeBlocks;
        metrics['after-blocks'] = afterBlocks;
        // Analyze test structure
        if (describeBlocks === 0 && testBlocks > 0) {
            issues.push({
                id: 'missing-describe-blocks',
                type: 'warning',
                message: 'Tests should be organized in describe blocks',
                severity: 'medium',
                fixable: true,
                suggestedFix: 'Wrap tests in describe blocks for better organization'
            });
            suggestions.push('Group related tests using describe blocks');
        }
        if (testBlocks === 0) {
            issues.push({
                id: 'no-tests',
                type: 'error',
                message: 'No tests found in file',
                severity: 'high',
                fixable: true,
                suggestedFix: 'Add test cases to verify functionality'
            });
        }
        // Check for test naming conventions
        const testNames = content.match(/(?:it|test)\s*\(\s*['"`]([^'"`]+)['"`]/g) || [];
        const poorTestNames = testNames.filter(name => {
            const testName = name.match(/['"`]([^'"`]+)['"`]/)?.[1] || '';
            return testName.length < 10 || !testName.includes('should');
        });
        if (poorTestNames.length > 0) {
            issues.push({
                id: 'poor-test-names',
                type: 'info',
                message: `${poorTestNames.length} test(s) have unclear names`,
                severity: 'low',
                fixable: true,
                suggestedFix: 'Use descriptive test names that explain the expected behavior'
            });
            suggestions.push('Use "should" in test names to describe expected behavior');
        }
        return {
            id: 'test-structure-analysis',
            summary: 'Test structure analysis completed',
            issues,
            metrics,
            suggestions,
            confidence: 0.9
        };
    }
    async analyzeCoverage(content, filePath, context) {
        const issues = [];
        const metrics = {};
        const suggestions = [];
        // Simulate coverage analysis
        const sourceFile = this.getSourceFileForTest(filePath);
        const coverage = await this.getCoverageForFile(sourceFile, context);
        metrics['line-coverage'] = coverage.lines;
        metrics['branch-coverage'] = coverage.branches;
        metrics['function-coverage'] = coverage.functions;
        if (coverage.lines < 0.8) {
            issues.push({
                id: 'low-line-coverage',
                type: 'warning',
                message: `Line coverage is ${Math.round(coverage.lines * 100)}% (target: 80%)`,
                severity: 'medium',
                fixable: true,
                suggestedFix: 'Add more test cases to increase line coverage'
            });
            suggestions.push('Add tests for uncovered code paths');
        }
        if (coverage.branches < 0.7) {
            issues.push({
                id: 'low-branch-coverage',
                type: 'warning',
                message: `Branch coverage is ${Math.round(coverage.branches * 100)}% (target: 70%)`,
                severity: 'medium',
                fixable: true,
                suggestedFix: 'Add tests for different code branches and conditions'
            });
            suggestions.push('Test both true and false conditions in your code');
        }
        if (coverage.functions < 0.9) {
            issues.push({
                id: 'low-function-coverage',
                type: 'info',
                message: `Function coverage is ${Math.round(coverage.functions * 100)}% (target: 90%)`,
                severity: 'low',
                fixable: true,
                suggestedFix: 'Add tests for uncovered functions'
            });
        }
        return {
            id: 'test-coverage-analysis',
            summary: 'Test coverage analysis completed',
            issues,
            metrics,
            suggestions,
            confidence: 0.85
        };
    }
    async analyzeTestPatterns(content, filePath) {
        const issues = [];
        const metrics = {};
        const suggestions = [];
        // Check for anti-patterns
        const hasOnlyTests = content.includes('.only(');
        const hasSkippedTests = content.includes('.skip(') || content.includes('x.it(') || content.includes('x.test(');
        const hasConsoleLog = content.includes('console.log');
        const hasHardcodedValues = (content.match(/(?:expect|toBe|toEqual)\s*\([^)]*(?:\d{4}|\d{2}\/\d{2}\/\d{4})/g) || []).length;
        if (hasOnlyTests) {
            issues.push({
                id: 'only-tests',
                type: 'error',
                message: 'Test file contains .only() which will skip other tests',
                severity: 'high',
                fixable: true,
                suggestedFix: 'Remove .only() to run all tests'
            });
        }
        if (hasSkippedTests) {
            issues.push({
                id: 'skipped-tests',
                type: 'warning',
                message: 'Test file contains skipped tests',
                severity: 'medium',
                fixable: true,
                suggestedFix: 'Fix or remove skipped tests'
            });
        }
        if (hasConsoleLog) {
            issues.push({
                id: 'console-log-in-tests',
                type: 'info',
                message: 'Test file contains console.log statements',
                severity: 'low',
                fixable: true,
                suggestedFix: 'Remove console.log statements from tests'
            });
        }
        if (hasHardcodedValues > 0) {
            issues.push({
                id: 'hardcoded-values',
                type: 'info',
                message: `${hasHardcodedValues} hardcoded value(s) found in assertions`,
                severity: 'low',
                fixable: true,
                suggestedFix: 'Use variables or constants instead of hardcoded values'
            });
            suggestions.push('Extract hardcoded values into variables for better maintainability');
        }
        // Check for good patterns
        const hasSetup = content.includes('beforeEach') || content.includes('beforeAll');
        const hasCleanup = content.includes('afterEach') || content.includes('afterAll');
        const hasMocks = content.includes('jest.mock') || content.includes('jest.fn');
        metrics['has-setup'] = hasSetup ? 1 : 0;
        metrics['has-cleanup'] = hasCleanup ? 1 : 0;
        metrics['has-mocks'] = hasMocks ? 1 : 0;
        if (!hasSetup && metrics['test-blocks'] > 1) {
            suggestions.push('Consider using beforeEach/beforeAll for test setup');
        }
        if (!hasCleanup && hasMocks) {
            suggestions.push('Consider using afterEach/afterAll for cleanup');
        }
        return {
            id: 'test-pattern-analysis',
            summary: 'Test pattern analysis completed',
            issues,
            metrics,
            suggestions,
            confidence: 0.8
        };
    }
    async generateCoverageReport(context) {
        // Simulate coverage report generation
        const testFiles = await this.getTestFiles(context);
        const coverage = {
            overall: {
                lines: 0.82,
                branches: 0.75,
                functions: 0.88,
                statements: 0.80
            },
            files: testFiles.map(file => ({
                path: file,
                lines: Math.random() * 0.4 + 0.6,
                branches: Math.random() * 0.4 + 0.5,
                functions: Math.random() * 0.3 + 0.7,
                statements: Math.random() * 0.4 + 0.6
            })),
            trends: {
                lastWeek: 0.78,
                lastMonth: 0.75,
                improvement: 0.04
            }
        };
        return coverage;
    }
    async analyzeTestQuality(context) {
        const quality = {
            score: 0.78,
            categories: {
                structure: 0.85,
                coverage: 0.72,
                patterns: 0.80,
                performance: 0.75
            },
            suggestions: [
                {
                    title: 'Improve Branch Coverage',
                    description: 'Add tests for missing code branches',
                    impact: 'High',
                    effort: 'Medium',
                    category: 'coverage'
                },
                {
                    title: 'Optimize Test Performance',
                    description: 'Reduce test execution time by optimizing slow tests',
                    impact: 'Medium',
                    effort: 'High',
                    category: 'performance'
                },
                {
                    title: 'Enhance Test Organization',
                    description: 'Better organize tests with describe blocks',
                    impact: 'Low',
                    effort: 'Low',
                    category: 'structure'
                }
            ]
        };
        return quality;
    }
    async analyzeTestPerformance(context) {
        const performance = {
            totalTime: 2.5,
            averageTime: 0.12,
            slowTests: [
                { name: 'complex integration test', time: 0.8, file: 'integration.test.ts' },
                { name: 'database operations', time: 0.6, file: 'database.test.ts' },
                { name: 'api endpoint tests', time: 0.4, file: 'api.test.ts' }
            ],
            recommendations: [
                'Mock external dependencies to improve test speed',
                'Use beforeAll for expensive setup operations',
                'Consider splitting large test files',
                'Use test.concurrent for independent tests'
            ]
        };
        return performance;
    }
    formatTestResults(testResults) {
        const { stats, tests } = testResults;
        let formatted = `# Test Results\n\n`;
        formatted += `**Total Tests:** ${stats.total}\n`;
        formatted += `**Passed:** ${stats.passed}\n`;
        formatted += `**Failed:** ${stats.failed}\n`;
        formatted += `**Skipped:** ${stats.skipped}\n\n`;
        if (stats.failed > 0) {
            formatted += `## Failed Tests\n\n`;
            const failedTests = tests.filter((t) => t.status === 'failed');
            for (const test of failedTests) {
                formatted += `### ${test.name}\n`;
                formatted += `**File:** ${test.file}\n`;
                formatted += `**Error:** ${test.error}\n\n`;
            }
        }
        return formatted;
    }
    formatCoverageReport(coverage) {
        let report = `# Test Coverage Report\n\n`;
        report += `## Overall Coverage\n`;
        report += `- **Lines:** ${Math.round(coverage.overall.lines * 100)}%\n`;
        report += `- **Branches:** ${Math.round(coverage.overall.branches * 100)}%\n`;
        report += `- **Functions:** ${Math.round(coverage.overall.functions * 100)}%\n`;
        report += `- **Statements:** ${Math.round(coverage.overall.statements * 100)}%\n\n`;
        report += `## File Coverage\n`;
        for (const file of coverage.files) {
            report += `### ${file.path}\n`;
            report += `- Lines: ${Math.round(file.lines * 100)}%\n`;
            report += `- Branches: ${Math.round(file.branches * 100)}%\n`;
            report += `- Functions: ${Math.round(file.functions * 100)}%\n\n`;
        }
        report += `## Trends\n`;
        report += `- Last Week: ${Math.round(coverage.trends.lastWeek * 100)}%\n`;
        report += `- Last Month: ${Math.round(coverage.trends.lastMonth * 100)}%\n`;
        report += `- Improvement: +${Math.round(coverage.trends.improvement * 100)}%\n\n`;
        return report;
    }
    formatPerformanceReport(performance) {
        let report = `# Test Performance Report\n\n`;
        report += `## Overall Performance\n`;
        report += `- **Total Time:** ${performance.totalTime}s\n`;
        report += `- **Average Time:** ${performance.averageTime}s\n\n`;
        report += `## Slowest Tests\n`;
        for (const test of performance.slowTests) {
            report += `- **${test.name}** (${test.time}s) - ${test.file}\n`;
        }
        report += `\n## Recommendations\n`;
        for (const rec of performance.recommendations) {
            report += `- ${rec}\n`;
        }
        return report;
    }
    getSourceFileForTest(testFilePath) {
        // Convert test file path to source file path
        return testFilePath
            .replace(/\.test\.(ts|js)$/, '.$1')
            .replace(/\.spec\.(ts|js)$/, '.$1')
            .replace(/\/test\//, '/src/')
            .replace(/\/tests\//, '/src/');
    }
    async getCoverageForFile(filePath, context) {
        // Simulate coverage data
        return {
            lines: Math.random() * 0.4 + 0.6,
            branches: Math.random() * 0.4 + 0.5,
            functions: Math.random() * 0.3 + 0.7
        };
    }
    async getTestFiles(context) {
        // Simulate test file discovery
        return [
            'src/components/Button.test.ts',
            'src/services/ApiService.test.ts',
            'src/utils/helpers.test.ts',
            'src/hooks/useAuth.test.ts'
        ];
    }
    async applySuggestion(suggestion, context) {
        // Implementation for applying suggestions
        this.api?.showNotification?.(`Applied suggestion: ${suggestion.title}`, 'info');
    }
    async onTestRun(data, context) {
        // Handle test run events
        console.log('Test run started:', data);
    }
    async onTestComplete(data, context) {
        // Handle test completion events
        console.log('Test run completed:', data);
    }
}
exports.TestAnalyzerPlugin = TestAnalyzerPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2dyZWdkdW5uL3NyYy90ZXN0L2FpX2RlYnVnX2NvbnRleHQvdnNjb2RlL3NyYy9zZXJ2aWNlcy9wbHVnaW5zL2J1aWx0aW4vdGVzdEFuYWx5emVyUGx1Z2luLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVdBLCtDQUFpQztBQUdqQyxNQUFhLGtCQUFrQjtJQUM3QixRQUFRLEdBQW1CO1FBQ3pCLEVBQUUsRUFBRSx1QkFBdUI7UUFDM0IsSUFBSSxFQUFFLGVBQWU7UUFDckIsT0FBTyxFQUFFLE9BQU87UUFDaEIsV0FBVyxFQUFFLDJFQUEyRTtRQUN4RixNQUFNLEVBQUUsZUFBZTtRQUN2QixPQUFPLEVBQUUsS0FBSztRQUNkLE9BQU8sRUFBRSxJQUFJO1FBQ2IsWUFBWSxFQUFFO1lBQ1o7Z0JBQ0UsSUFBSSxFQUFFLFVBQVU7Z0JBQ2hCLElBQUksRUFBRSxlQUFlO2dCQUNyQixXQUFXLEVBQUUsZ0NBQWdDO2dCQUM3QyxXQUFXLEVBQUUsQ0FBQyxnRUFBZ0UsQ0FBQzthQUNoRjtZQUNEO2dCQUNFLElBQUksRUFBRSxXQUFXO2dCQUNqQixJQUFJLEVBQUUsZ0JBQWdCO2dCQUN0QixXQUFXLEVBQUUsNENBQTRDO2FBQzFEO1lBQ0Q7Z0JBQ0UsSUFBSSxFQUFFLFNBQVM7Z0JBQ2YsSUFBSSxFQUFFLGVBQWU7Z0JBQ3JCLFdBQVcsRUFBRSw0Q0FBNEM7YUFDMUQ7U0FDRjtLQUNGLENBQUM7SUFFTSxHQUFHLENBQWE7SUFFeEIsSUFBSSxTQUFTO1FBQ1gsT0FBTztZQUNMO2dCQUNFLEVBQUUsRUFBRSxvQkFBb0I7Z0JBQ3hCLElBQUksRUFBRSxvQkFBb0I7Z0JBQzFCLFdBQVcsRUFBRSx3REFBd0Q7Z0JBQ3JFLFlBQVksRUFBRSxDQUFDLGNBQWMsRUFBRSxjQUFjLEVBQUUsY0FBYyxFQUFFLGNBQWMsQ0FBQztnQkFFOUUsT0FBTyxFQUFFLEtBQUssRUFBRSxPQUFlLEVBQUUsUUFBZ0IsRUFBRSxPQUFzQixFQUEyQixFQUFFO29C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QUFDO0lBQ2xGLENBQUM7SUFFTyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQVMsRUFBRSxPQUFzQjtRQUN2RCx5QkFBeUI7UUFDekIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRU8sS0FBSyxDQUFDLGNBQWMsQ0FBQyxJQUFTLEVBQUUsT0FBc0I7UUFDNUQsZ0NBQWdDO1FBQ2hDLE9BQU8sQ0FBQyxHQUFHLENBQUMscUJBQXFCLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDM0MsQ0FBQztDQUNGO0FBcG5CRCxnREFvbkJDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9ncmVnZHVubi9zcmMvdGVzdC9haV9kZWJ1Z19jb250ZXh0L3ZzY29kZS9zcmMvc2VydmljZXMvcGx1Z2lucy9idWlsdGluL3Rlc3RBbmFseXplclBsdWdpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBcbiAgUGx1Z2luLCBcbiAgUGx1Z2luTWV0YWRhdGEsIFxuICBQbHVnaW5BUEksIFxuICBQbHVnaW5Db250ZXh0LCBcbiAgUGx1Z2luQW5hbHl6ZXIsIFxuICBBbmFseXNpc1Jlc3VsdCxcbiAgSXNzdWUsXG4gIFBsdWdpbkNvbW1hbmQsXG4gIFBsdWdpbkZvcm1hdHRlclxufSBmcm9tICcuLi8uLi8uLi90eXBlcy9wbHVnaW4nO1xuaW1wb3J0ICogYXMgdnNjb2RlIGZyb20gJ3ZzY29kZSc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuXG5leHBvcnQgY2xhc3MgVGVzdEFuYWx5emVyUGx1Z2luIGltcGxlbWVudHMgUGx1Z2luIHtcbiAgbWV0YWRhdGE6IFBsdWdpbk1ldGFkYXRhID0ge1xuICAgIGlkOiAnYnVpbHRpbi10ZXN0LWFuYWx5emVyJyxcbiAgICBuYW1lOiAnVGVzdCBBbmFseXplcicsXG4gICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICBkZXNjcmlwdGlvbjogJ0FkdmFuY2VkIHRlc3QgYW5hbHlzaXMgd2l0aCBjb3ZlcmFnZSBpbnNpZ2h0cyBhbmQgcXVhbGl0eSByZWNvbW1lbmRhdGlvbnMnLFxuICAgIGF1dGhvcjogJ0FJIERlYnVnIFRlYW0nLFxuICAgIGxpY2Vuc2U6ICdNSVQnLFxuICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgY2FwYWJpbGl0aWVzOiBbXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICdhbmFseXplcicsXG4gICAgICAgIG5hbWU6ICd0ZXN0LWFuYWx5emVyJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdBbmFseXplIHRlc3QgZmlsZXMgYW5kIHJlc3VsdHMnLFxuICAgICAgICBwZXJtaXNzaW9uczogWydmaWxlLXN5c3RlbTp0ZXN0LWZpbGVzOkFuYWx5emUgdGVzdCBmaWxlcyBhbmQgY292ZXJhZ2UgcmVwb3J0cyddXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0eXBlOiAnZm9ybWF0dGVyJyxcbiAgICAgICAgbmFtZTogJ3Rlc3QtZm9ybWF0dGVyJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdGb3JtYXQgdGVzdCByZXN1bHRzIGZvciBiZXR0ZXIgcmVhZGFiaWxpdHknXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0eXBlOiAnY29tbWFuZCcsXG4gICAgICAgIG5hbWU6ICd0ZXN0LWluc2lnaHRzJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdHZW5lcmF0ZSB0ZXN0IGluc2lnaHRzIGFuZCByZWNvbW1lbmRhdGlvbnMnXG4gICAgICB9XG4gICAgXVxuICB9O1xuXG4gIHByaXZhdGUgYXBpPzogUGx1Z2luQVBJO1xuICBcbiAgZ2V0IGFuYWx5emVycygpOiBQbHVnaW5BbmFseXplcltdIHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICBpZDogJ3Rlc3QtZmlsZS1hbmFseXplcicsXG4gICAgICAgIG5hbWU6ICdUZXN0IEZpbGUgQW5hbHl6ZXInLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0FuYWx5emUgaW5kaXZpZHVhbCB0ZXN0IGZpbGVzIGZvciBxdWFsaXR5IGFuZCBjb3ZlcmFnZScsXG4gICAgICAgIGZpbGVQYXR0ZXJuczogWycqKi8qLnRlc3QudHMnLCAnKiovKi50ZXN0LmpzJywgJyoqLyouc3BlYy50cycsICcqKi8qLnNwZWMuanMnXSxcbiAgICAgICAgXG4gICAgICAgIGFuYWx5emU6IGFzeW5jIChjb250ZW50OiBzdHJpbmcsIGZpbGVQYXRoOiBzdHJpbmcsIGNvbnRleHQ6IFBsdWdpbkNvbnRleHQpOiBQcm9taXNlPEFuYWx5c2lzUmVzdWx0PiA9PiB7XG4gICAgICAgICAgY29uc3QgaXNzdWVzOiBJc3N1ZVtdID0gW107XG4gICAgICAgICAgY29uc3QgbWV0cmljczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgICAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBBbmFseXplIHRlc3Qgc3RydWN0dXJlXG4gICAgICAgICAgICBjb25zdCBzdHJ1Y3R1cmVBbmFseXNpcyA9IGF3YWl0IHRoaXMuYW5hbHl6ZVRlc3RTdHJ1Y3R1cmUoY29udGVudCwgZmlsZVBhdGgpO1xuICAgICAgICAgICAgaXNzdWVzLnB1c2goLi4uc3RydWN0dXJlQW5hbHlzaXMuaXNzdWVzKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obWV0cmljcywgc3RydWN0dXJlQW5hbHlzaXMubWV0cmljcyk7XG4gICAgICAgICAgICBzdWdnZXN0aW9ucy5wdXNoKC4uLnN0cnVjdHVyZUFuYWx5c2lzLnN1Z2dlc3Rpb25zKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQW5hbHl6ZSB0ZXN0IGNvdmVyYWdlXG4gICAgICAgICAgICBjb25zdCBjb3ZlcmFnZUFuYWx5c2lzID0gYXdhaXQgdGhpcy5hbmFseXplQ292ZXJhZ2UoY29udGVudCwgZmlsZVBhdGgsIGNvbnRleHQpO1xuICAgICAgICAgICAgaXNzdWVzLnB1c2goLi4uY292ZXJhZ2VBbmFseXNpcy5pc3N1ZXMpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihtZXRyaWNzLCBjb3ZlcmFnZUFuYWx5c2lzLm1ldHJpY3MpO1xuICAgICAgICAgICAgc3VnZ2VzdGlvbnMucHVzaCguLi5jb3ZlcmFnZUFuYWx5c2lzLnN1Z2dlc3Rpb25zKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQW5hbHl6ZSB0ZXN0IHBhdHRlcm5zXG4gICAgICAgICAgICBjb25zdCBwYXR0ZXJuQW5hbHlzaXMgPSBhd2FpdCB0aGlzLmFuYWx5emVUZXN0UGF0dGVybnMoY29udGVudCwgZmlsZVBhdGgpO1xuICAgICAgICAgICAgaXNzdWVzLnB1c2goLi4ucGF0dGVybkFuYWx5c2lzLmlzc3Vlcyk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG1ldHJpY3MsIHBhdHRlcm5BbmFseXNpcy5tZXRyaWNzKTtcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zLnB1c2goLi4ucGF0dGVybkFuYWx5c2lzLnN1Z2dlc3Rpb25zKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgIGlkOiAndGVzdC1hbmFseXNpcy1lcnJvcicsXG4gICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGBUZXN0IGFuYWx5c2lzIGZhaWxlZDogJHsoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2V9YCxcbiAgICAgICAgICAgICAgc2V2ZXJpdHk6ICdtZWRpdW0nLFxuICAgICAgICAgICAgICBmaXhhYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogJ3Rlc3QtZmlsZS1hbmFseXNpcycsXG4gICAgICAgICAgICBzdW1tYXJ5OiAnVGVzdCBmaWxlIGFuYWx5c2lzIGNvbXBsZXRlZCcsXG4gICAgICAgICAgICBpc3N1ZXMsXG4gICAgICAgICAgICBtZXRyaWNzLFxuICAgICAgICAgICAgc3VnZ2VzdGlvbnMsXG4gICAgICAgICAgICBjb25maWRlbmNlOiAwLjg4XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIF07XG4gIH1cblxuICBnZXQgZm9ybWF0dGVycygpOiBQbHVnaW5Gb3JtYXR0ZXJbXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICd0ZXN0LXJlc3VsdC1mb3JtYXR0ZXInLFxuICAgICAgICBuYW1lOiAnVGVzdCBSZXN1bHQgRm9ybWF0dGVyJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdGb3JtYXQgdGVzdCByZXN1bHRzIGZvciBiZXR0ZXIgcmVhZGFiaWxpdHknLFxuICAgICAgICBmaWxlUGF0dGVybnM6IFsnKiovKi50ZXN0Lmpzb24nLCAnKiovdGVzdC1yZXN1bHRzLmpzb24nXSxcbiAgICAgICAgXG4gICAgICAgIGZvcm1hdDogYXN5bmMgKGNvbnRlbnQ6IHN0cmluZywgZmlsZVBhdGg/OiBzdHJpbmcsIGNvbnRleHQ/OiBQbHVnaW5Db250ZXh0KTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGVzdFJlc3VsdHMgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VGVzdFJlc3VsdHModGVzdFJlc3VsdHMpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gY29udGVudDsgLy8gUmV0dXJuIG9yaWdpbmFsIGlmIHBhcnNpbmcgZmFpbHNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBdO1xuICB9XG5cbiAgZ2V0IGNvbW1hbmRzKCk6IFBsdWdpbkNvbW1hbmRbXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICd0ZXN0LWNvdmVyYWdlLXJlcG9ydCcsXG4gICAgICAgIHRpdGxlOiAnR2VuZXJhdGUgVGVzdCBDb3ZlcmFnZSBSZXBvcnQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0dlbmVyYXRlIGNvbXByZWhlbnNpdmUgdGVzdCBjb3ZlcmFnZSByZXBvcnQnLFxuICAgICAgICBjYXRlZ29yeTogJ1Rlc3RpbmcnLFxuICAgICAgICBpY29uOiAnZ3JhcGgnLFxuICAgICAgICBcbiAgICAgICAgZXhlY3V0ZTogYXN5bmMgKGNvbnRleHQ6IFBsdWdpbkNvbnRleHQsIGFyZ3M/OiBhbnlbXSk6IFByb21pc2U8YW55PiA9PiB7XG4gICAgICAgICAgY29uc3QgY292ZXJhZ2VSZXBvcnQgPSBhd2FpdCB0aGlzLmdlbmVyYXRlQ292ZXJhZ2VSZXBvcnQoY29udGV4dCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2hvdyByZXN1bHRzIGluIGEgbmV3IGRvY3VtZW50XG4gICAgICAgICAgY29uc3QgZG9jID0gYXdhaXQgdnNjb2RlLndvcmtzcGFjZS5vcGVuVGV4dERvY3VtZW50KHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuZm9ybWF0Q292ZXJhZ2VSZXBvcnQoY292ZXJhZ2VSZXBvcnQpLFxuICAgICAgICAgICAgbGFuZ3VhZ2U6ICdtYXJrZG93bidcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBhd2FpdCB2c2NvZGUud2luZG93LnNob3dUZXh0RG9jdW1lbnQoZG9jKTtcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gY292ZXJhZ2VSZXBvcnQ7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAndGVzdC1xdWFsaXR5LWFuYWx5c2lzJyxcbiAgICAgICAgdGl0bGU6ICdUZXN0IFF1YWxpdHkgQW5hbHlzaXMnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0FuYWx5emUgdGVzdCBxdWFsaXR5IGFuZCBzdWdnZXN0IGltcHJvdmVtZW50cycsXG4gICAgICAgIGNhdGVnb3J5OiAnVGVzdGluZycsXG4gICAgICAgIGljb246ICdjaGVja2xpc3QnLFxuICAgICAgICBcbiAgICAgICAgZXhlY3V0ZTogYXN5bmMgKGNvbnRleHQ6IFBsdWdpbkNvbnRleHQsIGFyZ3M/OiBhbnlbXSk6IFByb21pc2U8YW55PiA9PiB7XG4gICAgICAgICAgY29uc3QgcXVhbGl0eUFuYWx5c2lzID0gYXdhaXQgdGhpcy5hbmFseXplVGVzdFF1YWxpdHkoY29udGV4dCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2hvdyBxdWFsaXR5IGluc2lnaHRzXG4gICAgICAgICAgY29uc3QgaXRlbXMgPSBxdWFsaXR5QW5hbHlzaXMuc3VnZ2VzdGlvbnMubWFwKChzdWdnZXN0aW9uOiBhbnkpID0+ICh7XG4gICAgICAgICAgICBsYWJlbDogc3VnZ2VzdGlvbi50aXRsZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzdWdnZXN0aW9uLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgZGV0YWlsOiBgSW1wYWN0OiAke3N1Z2dlc3Rpb24uaW1wYWN0fSB8IEVmZm9ydDogJHtzdWdnZXN0aW9uLmVmZm9ydH1gXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gYXdhaXQgdnNjb2RlLndpbmRvdy5zaG93UXVpY2tQaWNrKGl0ZW1zLCB7XG4gICAgICAgICAgICBwbGFjZUhvbGRlcjogJ1NlbGVjdCBpbXByb3ZlbWVudCB0byBhcHBseScsXG4gICAgICAgICAgICBjYW5QaWNrTWFueTogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHN1Z2dlc3Rpb24gPSBxdWFsaXR5QW5hbHlzaXMuc3VnZ2VzdGlvbnMuZmluZCgoczogYW55KSA9PiBzLnRpdGxlID09PSAoc2VsZWN0ZWQgYXMgYW55KT8ubGFiZWwpO1xuICAgICAgICAgICAgaWYgKHN1Z2dlc3Rpb24pIHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHBseVN1Z2dlc3Rpb24oc3VnZ2VzdGlvbiwgY29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiBxdWFsaXR5QW5hbHlzaXM7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAndGVzdC1wZXJmb3JtYW5jZS1hbmFseXNpcycsXG4gICAgICAgIHRpdGxlOiAnVGVzdCBQZXJmb3JtYW5jZSBBbmFseXNpcycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQW5hbHl6ZSB0ZXN0IHBlcmZvcm1hbmNlIGFuZCBpZGVudGlmeSBzbG93IHRlc3RzJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdUZXN0aW5nJyxcbiAgICAgICAgaWNvbjogJ3B1bHNlJyxcbiAgICAgICAgXG4gICAgICAgIGV4ZWN1dGU6IGFzeW5jIChjb250ZXh0OiBQbHVnaW5Db250ZXh0LCBhcmdzPzogYW55W10pOiBQcm9taXNlPGFueT4gPT4ge1xuICAgICAgICAgIGNvbnN0IHBlcmZvcm1hbmNlQW5hbHlzaXMgPSBhd2FpdCB0aGlzLmFuYWx5emVUZXN0UGVyZm9ybWFuY2UoY29udGV4dCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2hvdyBwZXJmb3JtYW5jZSBpbnNpZ2h0c1xuICAgICAgICAgIGNvbnN0IHJlcG9ydCA9IHRoaXMuZm9ybWF0UGVyZm9ybWFuY2VSZXBvcnQocGVyZm9ybWFuY2VBbmFseXNpcyk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgZG9jID0gYXdhaXQgdnNjb2RlLndvcmtzcGFjZS5vcGVuVGV4dERvY3VtZW50KHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IHJlcG9ydCxcbiAgICAgICAgICAgIGxhbmd1YWdlOiAnbWFya2Rvd24nXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgYXdhaXQgdnNjb2RlLndpbmRvdy5zaG93VGV4dERvY3VtZW50KGRvYyk7XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHBlcmZvcm1hbmNlQW5hbHlzaXM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBdO1xuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGUoYXBpOiBQbHVnaW5BUEksIGNvbnRleHQ6IFBsdWdpbkNvbnRleHQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLmFwaSA9IGFwaTtcbiAgICBcbiAgICAvLyBSZWdpc3RlciBhbmFseXplcnNcbiAgICBmb3IgKGNvbnN0IGFuYWx5emVyIG9mIHRoaXMuYW5hbHl6ZXJzKSB7XG4gICAgICBhcGkucmVnaXN0ZXJBbmFseXplcj8uKGFuYWx5emVyKTtcbiAgICB9XG4gICAgXG4gICAgLy8gUmVnaXN0ZXIgZm9ybWF0dGVyc1xuICAgIGZvciAoY29uc3QgZm9ybWF0dGVyIG9mIHRoaXMuZm9ybWF0dGVycykge1xuICAgICAgYXBpLnJlZ2lzdGVyRm9ybWF0dGVyPy4oZm9ybWF0dGVyKTtcbiAgICB9XG4gICAgXG4gICAgLy8gUmVnaXN0ZXIgY29tbWFuZHNcbiAgICBmb3IgKGNvbnN0IGNvbW1hbmQgb2YgdGhpcy5jb21tYW5kcykge1xuICAgICAgYXBpLnJlZ2lzdGVyQ29tbWFuZChjb21tYW5kLmlkLCBjb21tYW5kLmV4ZWN1dGUpO1xuICAgIH1cbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIHRlc3QgZXZlbnRzXG4gICAgYXBpLm9uPy4oJ3Rlc3Q6cnVuJywgKGRhdGEpID0+IHRoaXMub25UZXN0UnVuKGRhdGEsIGNvbnRleHQpKTtcbiAgICBhcGkub24/LigndGVzdDpjb21wbGV0ZScsIChkYXRhKSA9PiB0aGlzLm9uVGVzdENvbXBsZXRlKGRhdGEsIGNvbnRleHQpKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnVGVzdCBBbmFseXplciBQbHVnaW4gYWN0aXZhdGVkJyk7XG4gIH1cblxuICBhc3luYyBkZWFjdGl2YXRlKGFwaTogUGx1Z2luQVBJLCBjb250ZXh0OiBQbHVnaW5Db250ZXh0KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQ2xlYW51cFxuICAgIGFwaS5vZmY/LigndGVzdDpydW4nKTtcbiAgICBhcGkub2ZmPy4oJ3Rlc3Q6Y29tcGxldGUnKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnVGVzdCBBbmFseXplciBQbHVnaW4gZGVhY3RpdmF0ZWQnKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZVRlc3RTdHJ1Y3R1cmUoY29udGVudDogc3RyaW5nLCBmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTxBbmFseXNpc1Jlc3VsdD4ge1xuICAgIGNvbnN0IGlzc3VlczogSXNzdWVbXSA9IFtdO1xuICAgIGNvbnN0IG1ldHJpY3M6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgICBjb25zdCBzdWdnZXN0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICAvLyBDb3VudCB0ZXN0IGJsb2Nrc1xuICAgIGNvbnN0IGRlc2NyaWJlQmxvY2tzID0gKGNvbnRlbnQubWF0Y2goL2Rlc2NyaWJlXFxzKlxcKC9nKSB8fCBbXSkubGVuZ3RoO1xuICAgIGNvbnN0IHRlc3RCbG9ja3MgPSAoY29udGVudC5tYXRjaCgvKD86aXR8dGVzdClcXHMqXFwoL2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgY29uc3QgYmVmb3JlQmxvY2tzID0gKGNvbnRlbnQubWF0Y2goL2JlZm9yZSg/OkVhY2h8QWxsKT9cXHMqXFwoL2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgY29uc3QgYWZ0ZXJCbG9ja3MgPSAoY29udGVudC5tYXRjaCgvYWZ0ZXIoPzpFYWNofEFsbCk/XFxzKlxcKC9nKSB8fCBbXSkubGVuZ3RoO1xuICAgIFxuICAgIG1ldHJpY3NbJ2Rlc2NyaWJlLWJsb2NrcyddID0gZGVzY3JpYmVCbG9ja3M7XG4gICAgbWV0cmljc1sndGVzdC1ibG9ja3MnXSA9IHRlc3RCbG9ja3M7XG4gICAgbWV0cmljc1snYmVmb3JlLWJsb2NrcyddID0gYmVmb3JlQmxvY2tzO1xuICAgIG1ldHJpY3NbJ2FmdGVyLWJsb2NrcyddID0gYWZ0ZXJCbG9ja3M7XG4gICAgXG4gICAgLy8gQW5hbHl6ZSB0ZXN0IHN0cnVjdHVyZVxuICAgIGlmIChkZXNjcmliZUJsb2NrcyA9PT0gMCAmJiB0ZXN0QmxvY2tzID4gMCkge1xuICAgICAgaXNzdWVzLnB1c2goe1xuICAgICAgICBpZDogJ21pc3NpbmctZGVzY3JpYmUtYmxvY2tzJyxcbiAgICAgICAgdHlwZTogJ3dhcm5pbmcnLFxuICAgICAgICBtZXNzYWdlOiAnVGVzdHMgc2hvdWxkIGJlIG9yZ2FuaXplZCBpbiBkZXNjcmliZSBibG9ja3MnLFxuICAgICAgICBzZXZlcml0eTogJ21lZGl1bScsXG4gICAgICAgIGZpeGFibGU6IHRydWUsXG4gICAgICAgIHN1Z2dlc3RlZEZpeDogJ1dyYXAgdGVzdHMgaW4gZGVzY3JpYmUgYmxvY2tzIGZvciBiZXR0ZXIgb3JnYW5pemF0aW9uJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHN1Z2dlc3Rpb25zLnB1c2goJ0dyb3VwIHJlbGF0ZWQgdGVzdHMgdXNpbmcgZGVzY3JpYmUgYmxvY2tzJyk7XG4gICAgfVxuICAgIFxuICAgIGlmICh0ZXN0QmxvY2tzID09PSAwKSB7XG4gICAgICBpc3N1ZXMucHVzaCh7XG4gICAgICAgIGlkOiAnbm8tdGVzdHMnLFxuICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICBtZXNzYWdlOiAnTm8gdGVzdHMgZm91bmQgaW4gZmlsZScsXG4gICAgICAgIHNldmVyaXR5OiAnaGlnaCcsXG4gICAgICAgIGZpeGFibGU6IHRydWUsXG4gICAgICAgIHN1Z2dlc3RlZEZpeDogJ0FkZCB0ZXN0IGNhc2VzIHRvIHZlcmlmeSBmdW5jdGlvbmFsaXR5J1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciB0ZXN0IG5hbWluZyBjb252ZW50aW9uc1xuICAgIGNvbnN0IHRlc3ROYW1lcyA9IGNvbnRlbnQubWF0Y2goLyg/Oml0fHRlc3QpXFxzKlxcKFxccypbJ1wiYF0oW14nXCJgXSspWydcImBdL2cpIHx8IFtdO1xuICAgIGNvbnN0IHBvb3JUZXN0TmFtZXMgPSB0ZXN0TmFtZXMuZmlsdGVyKG5hbWUgPT4ge1xuICAgICAgY29uc3QgdGVzdE5hbWUgPSBuYW1lLm1hdGNoKC9bJ1wiYF0oW14nXCJgXSspWydcImBdLyk/LlsxXSB8fCAnJztcbiAgICAgIHJldHVybiB0ZXN0TmFtZS5sZW5ndGggPCAxMCB8fCAhdGVzdE5hbWUuaW5jbHVkZXMoJ3Nob3VsZCcpO1xuICAgIH0pO1xuICAgIFxuICAgIGlmIChwb29yVGVzdE5hbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGlzc3Vlcy5wdXNoKHtcbiAgICAgICAgaWQ6ICdwb29yLXRlc3QtbmFtZXMnLFxuICAgICAgICB0eXBlOiAnaW5mbycsXG4gICAgICAgIG1lc3NhZ2U6IGAke3Bvb3JUZXN0TmFtZXMubGVuZ3RofSB0ZXN0KHMpIGhhdmUgdW5jbGVhciBuYW1lc2AsXG4gICAgICAgIHNldmVyaXR5OiAnbG93JyxcbiAgICAgICAgZml4YWJsZTogdHJ1ZSxcbiAgICAgICAgc3VnZ2VzdGVkRml4OiAnVXNlIGRlc2NyaXB0aXZlIHRlc3QgbmFtZXMgdGhhdCBleHBsYWluIHRoZSBleHBlY3RlZCBiZWhhdmlvcidcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBzdWdnZXN0aW9ucy5wdXNoKCdVc2UgXCJzaG91bGRcIiBpbiB0ZXN0IG5hbWVzIHRvIGRlc2NyaWJlIGV4cGVjdGVkIGJlaGF2aW9yJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBpZDogJ3Rlc3Qtc3RydWN0dXJlLWFuYWx5c2lzJyxcbiAgICAgIHN1bW1hcnk6ICdUZXN0IHN0cnVjdHVyZSBhbmFseXNpcyBjb21wbGV0ZWQnLFxuICAgICAgaXNzdWVzLFxuICAgICAgbWV0cmljcyxcbiAgICAgIHN1Z2dlc3Rpb25zLFxuICAgICAgY29uZmlkZW5jZTogMC45XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZUNvdmVyYWdlKGNvbnRlbnQ6IHN0cmluZywgZmlsZVBhdGg6IHN0cmluZywgY29udGV4dDogUGx1Z2luQ29udGV4dCk6IFByb21pc2U8QW5hbHlzaXNSZXN1bHQ+IHtcbiAgICBjb25zdCBpc3N1ZXM6IElzc3VlW10gPSBbXTtcbiAgICBjb25zdCBtZXRyaWNzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gICAgY29uc3Qgc3VnZ2VzdGlvbnM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgLy8gU2ltdWxhdGUgY292ZXJhZ2UgYW5hbHlzaXNcbiAgICBjb25zdCBzb3VyY2VGaWxlID0gdGhpcy5nZXRTb3VyY2VGaWxlRm9yVGVzdChmaWxlUGF0aCk7XG4gICAgY29uc3QgY292ZXJhZ2UgPSBhd2FpdCB0aGlzLmdldENvdmVyYWdlRm9yRmlsZShzb3VyY2VGaWxlLCBjb250ZXh0KTtcbiAgICBcbiAgICBtZXRyaWNzWydsaW5lLWNvdmVyYWdlJ10gPSBjb3ZlcmFnZS5saW5lcztcbiAgICBtZXRyaWNzWydicmFuY2gtY292ZXJhZ2UnXSA9IGNvdmVyYWdlLmJyYW5jaGVzO1xuICAgIG1ldHJpY3NbJ2Z1bmN0aW9uLWNvdmVyYWdlJ10gPSBjb3ZlcmFnZS5mdW5jdGlvbnM7XG4gICAgXG4gICAgaWYgKGNvdmVyYWdlLmxpbmVzIDwgMC44KSB7XG4gICAgICBpc3N1ZXMucHVzaCh7XG4gICAgICAgIGlkOiAnbG93LWxpbmUtY292ZXJhZ2UnLFxuICAgICAgICB0eXBlOiAnd2FybmluZycsXG4gICAgICAgIG1lc3NhZ2U6IGBMaW5lIGNvdmVyYWdlIGlzICR7TWF0aC5yb3VuZChjb3ZlcmFnZS5saW5lcyAqIDEwMCl9JSAodGFyZ2V0OiA4MCUpYCxcbiAgICAgICAgc2V2ZXJpdHk6ICdtZWRpdW0nLFxuICAgICAgICBmaXhhYmxlOiB0cnVlLFxuICAgICAgICBzdWdnZXN0ZWRGaXg6ICdBZGQgbW9yZSB0ZXN0IGNhc2VzIHRvIGluY3JlYXNlIGxpbmUgY292ZXJhZ2UnXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgc3VnZ2VzdGlvbnMucHVzaCgnQWRkIHRlc3RzIGZvciB1bmNvdmVyZWQgY29kZSBwYXRocycpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoY292ZXJhZ2UuYnJhbmNoZXMgPCAwLjcpIHtcbiAgICAgIGlzc3Vlcy5wdXNoKHtcbiAgICAgICAgaWQ6ICdsb3ctYnJhbmNoLWNvdmVyYWdlJyxcbiAgICAgICAgdHlwZTogJ3dhcm5pbmcnLFxuICAgICAgICBtZXNzYWdlOiBgQnJhbmNoIGNvdmVyYWdlIGlzICR7TWF0aC5yb3VuZChjb3ZlcmFnZS5icmFuY2hlcyAqIDEwMCl9JSAodGFyZ2V0OiA3MCUpYCxcbiAgICAgICAgc2V2ZXJpdHk6ICdtZWRpdW0nLFxuICAgICAgICBmaXhhYmxlOiB0cnVlLFxuICAgICAgICBzdWdnZXN0ZWRGaXg6ICdBZGQgdGVzdHMgZm9yIGRpZmZlcmVudCBjb2RlIGJyYW5jaGVzIGFuZCBjb25kaXRpb25zJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHN1Z2dlc3Rpb25zLnB1c2goJ1Rlc3QgYm90aCB0cnVlIGFuZCBmYWxzZSBjb25kaXRpb25zIGluIHlvdXIgY29kZScpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoY292ZXJhZ2UuZnVuY3Rpb25zIDwgMC45KSB7XG4gICAgICBpc3N1ZXMucHVzaCh7XG4gICAgICAgIGlkOiAnbG93LWZ1bmN0aW9uLWNvdmVyYWdlJyxcbiAgICAgICAgdHlwZTogJ2luZm8nLFxuICAgICAgICBtZXNzYWdlOiBgRnVuY3Rpb24gY292ZXJhZ2UgaXMgJHtNYXRoLnJvdW5kKGNvdmVyYWdlLmZ1bmN0aW9ucyAqIDEwMCl9JSAodGFyZ2V0OiA5MCUpYCxcbiAgICAgICAgc2V2ZXJpdHk6ICdsb3cnLFxuICAgICAgICBmaXhhYmxlOiB0cnVlLFxuICAgICAgICBzdWdnZXN0ZWRGaXg6ICdBZGQgdGVzdHMgZm9yIHVuY292ZXJlZCBmdW5jdGlvbnMnXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiAndGVzdC1jb3ZlcmFnZS1hbmFseXNpcycsXG4gICAgICBzdW1tYXJ5OiAnVGVzdCBjb3ZlcmFnZSBhbmFseXNpcyBjb21wbGV0ZWQnLFxuICAgICAgaXNzdWVzLFxuICAgICAgbWV0cmljcyxcbiAgICAgIHN1Z2dlc3Rpb25zLFxuICAgICAgY29uZmlkZW5jZTogMC44NVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGFuYWx5emVUZXN0UGF0dGVybnMoY29udGVudDogc3RyaW5nLCBmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTxBbmFseXNpc1Jlc3VsdD4ge1xuICAgIGNvbnN0IGlzc3VlczogSXNzdWVbXSA9IFtdO1xuICAgIGNvbnN0IG1ldHJpY3M6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgICBjb25zdCBzdWdnZXN0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgYW50aS1wYXR0ZXJuc1xuICAgIGNvbnN0IGhhc09ubHlUZXN0cyA9IGNvbnRlbnQuaW5jbHVkZXMoJy5vbmx5KCcpO1xuICAgIGNvbnN0IGhhc1NraXBwZWRUZXN0cyA9IGNvbnRlbnQuaW5jbHVkZXMoJy5za2lwKCcpIHx8IGNvbnRlbnQuaW5jbHVkZXMoJ3guaXQoJykgfHwgY29udGVudC5pbmNsdWRlcygneC50ZXN0KCcpO1xuICAgIGNvbnN0IGhhc0NvbnNvbGVMb2cgPSBjb250ZW50LmluY2x1ZGVzKCdjb25zb2xlLmxvZycpO1xuICAgIGNvbnN0IGhhc0hhcmRjb2RlZFZhbHVlcyA9IChjb250ZW50Lm1hdGNoKC8oPzpleHBlY3R8dG9CZXx0b0VxdWFsKVxccypcXChbXildKig/OlxcZHs0fXxcXGR7Mn1cXC9cXGR7Mn1cXC9cXGR7NH0pL2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgXG4gICAgaWYgKGhhc09ubHlUZXN0cykge1xuICAgICAgaXNzdWVzLnB1c2goe1xuICAgICAgICBpZDogJ29ubHktdGVzdHMnLFxuICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICBtZXNzYWdlOiAnVGVzdCBmaWxlIGNvbnRhaW5zIC5vbmx5KCkgd2hpY2ggd2lsbCBza2lwIG90aGVyIHRlc3RzJyxcbiAgICAgICAgc2V2ZXJpdHk6ICdoaWdoJyxcbiAgICAgICAgZml4YWJsZTogdHJ1ZSxcbiAgICAgICAgc3VnZ2VzdGVkRml4OiAnUmVtb3ZlIC5vbmx5KCkgdG8gcnVuIGFsbCB0ZXN0cydcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBpZiAoaGFzU2tpcHBlZFRlc3RzKSB7XG4gICAgICBpc3N1ZXMucHVzaCh7XG4gICAgICAgIGlkOiAnc2tpcHBlZC10ZXN0cycsXG4gICAgICAgIHR5cGU6ICd3YXJuaW5nJyxcbiAgICAgICAgbWVzc2FnZTogJ1Rlc3QgZmlsZSBjb250YWlucyBza2lwcGVkIHRlc3RzJyxcbiAgICAgICAgc2V2ZXJpdHk6ICdtZWRpdW0nLFxuICAgICAgICBmaXhhYmxlOiB0cnVlLFxuICAgICAgICBzdWdnZXN0ZWRGaXg6ICdGaXggb3IgcmVtb3ZlIHNraXBwZWQgdGVzdHMnXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGhhc0NvbnNvbGVMb2cpIHtcbiAgICAgIGlzc3Vlcy5wdXNoKHtcbiAgICAgICAgaWQ6ICdjb25zb2xlLWxvZy1pbi10ZXN0cycsXG4gICAgICAgIHR5cGU6ICdpbmZvJyxcbiAgICAgICAgbWVzc2FnZTogJ1Rlc3QgZmlsZSBjb250YWlucyBjb25zb2xlLmxvZyBzdGF0ZW1lbnRzJyxcbiAgICAgICAgc2V2ZXJpdHk6ICdsb3cnLFxuICAgICAgICBmaXhhYmxlOiB0cnVlLFxuICAgICAgICBzdWdnZXN0ZWRGaXg6ICdSZW1vdmUgY29uc29sZS5sb2cgc3RhdGVtZW50cyBmcm9tIHRlc3RzJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGlmIChoYXNIYXJkY29kZWRWYWx1ZXMgPiAwKSB7XG4gICAgICBpc3N1ZXMucHVzaCh7XG4gICAgICAgIGlkOiAnaGFyZGNvZGVkLXZhbHVlcycsXG4gICAgICAgIHR5cGU6ICdpbmZvJyxcbiAgICAgICAgbWVzc2FnZTogYCR7aGFzSGFyZGNvZGVkVmFsdWVzfSBoYXJkY29kZWQgdmFsdWUocykgZm91bmQgaW4gYXNzZXJ0aW9uc2AsXG4gICAgICAgIHNldmVyaXR5OiAnbG93JyxcbiAgICAgICAgZml4YWJsZTogdHJ1ZSxcbiAgICAgICAgc3VnZ2VzdGVkRml4OiAnVXNlIHZhcmlhYmxlcyBvciBjb25zdGFudHMgaW5zdGVhZCBvZiBoYXJkY29kZWQgdmFsdWVzJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHN1Z2dlc3Rpb25zLnB1c2goJ0V4dHJhY3QgaGFyZGNvZGVkIHZhbHVlcyBpbnRvIHZhcmlhYmxlcyBmb3IgYmV0dGVyIG1haW50YWluYWJpbGl0eScpO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBmb3IgZ29vZCBwYXR0ZXJuc1xuICAgIGNvbnN0IGhhc1NldHVwID0gY29udGVudC5pbmNsdWRlcygnYmVmb3JlRWFjaCcpIHx8IGNvbnRlbnQuaW5jbHVkZXMoJ2JlZm9yZUFsbCcpO1xuICAgIGNvbnN0IGhhc0NsZWFudXAgPSBjb250ZW50LmluY2x1ZGVzKCdhZnRlckVhY2gnKSB8fCBjb250ZW50LmluY2x1ZGVzKCdhZnRlckFsbCcpO1xuICAgIGNvbnN0IGhhc01vY2tzID0gY29udGVudC5pbmNsdWRlcygnamVzdC5tb2NrJykgfHwgY29udGVudC5pbmNsdWRlcygnamVzdC5mbicpO1xuICAgIFxuICAgIG1ldHJpY3NbJ2hhcy1zZXR1cCddID0gaGFzU2V0dXAgPyAxIDogMDtcbiAgICBtZXRyaWNzWydoYXMtY2xlYW51cCddID0gaGFzQ2xlYW51cCA/IDEgOiAwO1xuICAgIG1ldHJpY3NbJ2hhcy1tb2NrcyddID0gaGFzTW9ja3MgPyAxIDogMDtcbiAgICBcbiAgICBpZiAoIWhhc1NldHVwICYmIG1ldHJpY3NbJ3Rlc3QtYmxvY2tzJ10gPiAxKSB7XG4gICAgICBzdWdnZXN0aW9ucy5wdXNoKCdDb25zaWRlciB1c2luZyBiZWZvcmVFYWNoL2JlZm9yZUFsbCBmb3IgdGVzdCBzZXR1cCcpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIWhhc0NsZWFudXAgJiYgaGFzTW9ja3MpIHtcbiAgICAgIHN1Z2dlc3Rpb25zLnB1c2goJ0NvbnNpZGVyIHVzaW5nIGFmdGVyRWFjaC9hZnRlckFsbCBmb3IgY2xlYW51cCcpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6ICd0ZXN0LXBhdHRlcm4tYW5hbHlzaXMnLFxuICAgICAgc3VtbWFyeTogJ1Rlc3QgcGF0dGVybiBhbmFseXNpcyBjb21wbGV0ZWQnLFxuICAgICAgaXNzdWVzLFxuICAgICAgbWV0cmljcyxcbiAgICAgIHN1Z2dlc3Rpb25zLFxuICAgICAgY29uZmlkZW5jZTogMC44XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVDb3ZlcmFnZVJlcG9ydChjb250ZXh0OiBQbHVnaW5Db250ZXh0KTogUHJvbWlzZTxhbnk+IHtcbiAgICAvLyBTaW11bGF0ZSBjb3ZlcmFnZSByZXBvcnQgZ2VuZXJhdGlvblxuICAgIGNvbnN0IHRlc3RGaWxlcyA9IGF3YWl0IHRoaXMuZ2V0VGVzdEZpbGVzKGNvbnRleHQpO1xuICAgIGNvbnN0IGNvdmVyYWdlID0ge1xuICAgICAgb3ZlcmFsbDoge1xuICAgICAgICBsaW5lczogMC44MixcbiAgICAgICAgYnJhbmNoZXM6IDAuNzUsXG4gICAgICAgIGZ1bmN0aW9uczogMC44OCxcbiAgICAgICAgc3RhdGVtZW50czogMC44MFxuICAgICAgfSxcbiAgICAgIGZpbGVzOiB0ZXN0RmlsZXMubWFwKGZpbGUgPT4gKHtcbiAgICAgICAgcGF0aDogZmlsZSxcbiAgICAgICAgbGluZXM6IE1hdGgucmFuZG9tKCkgKiAwLjQgKyAwLjYsXG4gICAgICAgIGJyYW5jaGVzOiBNYXRoLnJhbmRvbSgpICogMC40ICsgMC41LFxuICAgICAgICBmdW5jdGlvbnM6IE1hdGgucmFuZG9tKCkgKiAwLjMgKyAwLjcsXG4gICAgICAgIHN0YXRlbWVudHM6IE1hdGgucmFuZG9tKCkgKiAwLjQgKyAwLjZcbiAgICAgIH0pKSxcbiAgICAgIHRyZW5kczoge1xuICAgICAgICBsYXN0V2VlazogMC43OCxcbiAgICAgICAgbGFzdE1vbnRoOiAwLjc1LFxuICAgICAgICBpbXByb3ZlbWVudDogMC4wNFxuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIGNvdmVyYWdlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBhbmFseXplVGVzdFF1YWxpdHkoY29udGV4dDogUGx1Z2luQ29udGV4dCk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgcXVhbGl0eSA9IHtcbiAgICAgIHNjb3JlOiAwLjc4LFxuICAgICAgY2F0ZWdvcmllczoge1xuICAgICAgICBzdHJ1Y3R1cmU6IDAuODUsXG4gICAgICAgIGNvdmVyYWdlOiAwLjcyLFxuICAgICAgICBwYXR0ZXJuczogMC44MCxcbiAgICAgICAgcGVyZm9ybWFuY2U6IDAuNzVcbiAgICAgIH0sXG4gICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6ICdJbXByb3ZlIEJyYW5jaCBDb3ZlcmFnZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdBZGQgdGVzdHMgZm9yIG1pc3NpbmcgY29kZSBicmFuY2hlcycsXG4gICAgICAgICAgaW1wYWN0OiAnSGlnaCcsXG4gICAgICAgICAgZWZmb3J0OiAnTWVkaXVtJyxcbiAgICAgICAgICBjYXRlZ29yeTogJ2NvdmVyYWdlJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6ICdPcHRpbWl6ZSBUZXN0IFBlcmZvcm1hbmNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1JlZHVjZSB0ZXN0IGV4ZWN1dGlvbiB0aW1lIGJ5IG9wdGltaXppbmcgc2xvdyB0ZXN0cycsXG4gICAgICAgICAgaW1wYWN0OiAnTWVkaXVtJyxcbiAgICAgICAgICBlZmZvcnQ6ICdIaWdoJyxcbiAgICAgICAgICBjYXRlZ29yeTogJ3BlcmZvcm1hbmNlJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6ICdFbmhhbmNlIFRlc3QgT3JnYW5pemF0aW9uJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0JldHRlciBvcmdhbml6ZSB0ZXN0cyB3aXRoIGRlc2NyaWJlIGJsb2NrcycsXG4gICAgICAgICAgaW1wYWN0OiAnTG93JyxcbiAgICAgICAgICBlZmZvcnQ6ICdMb3cnLFxuICAgICAgICAgIGNhdGVnb3J5OiAnc3RydWN0dXJlJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gcXVhbGl0eTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZVRlc3RQZXJmb3JtYW5jZShjb250ZXh0OiBQbHVnaW5Db250ZXh0KTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCBwZXJmb3JtYW5jZSA9IHtcbiAgICAgIHRvdGFsVGltZTogMi41LFxuICAgICAgYXZlcmFnZVRpbWU6IDAuMTIsXG4gICAgICBzbG93VGVzdHM6IFtcbiAgICAgICAgeyBuYW1lOiAnY29tcGxleCBpbnRlZ3JhdGlvbiB0ZXN0JywgdGltZTogMC44LCBmaWxlOiAnaW50ZWdyYXRpb24udGVzdC50cycgfSxcbiAgICAgICAgeyBuYW1lOiAnZGF0YWJhc2Ugb3BlcmF0aW9ucycsIHRpbWU6IDAuNiwgZmlsZTogJ2RhdGFiYXNlLnRlc3QudHMnIH0sXG4gICAgICAgIHsgbmFtZTogJ2FwaSBlbmRwb2ludCB0ZXN0cycsIHRpbWU6IDAuNCwgZmlsZTogJ2FwaS50ZXN0LnRzJyB9XG4gICAgICBdLFxuICAgICAgcmVjb21tZW5kYXRpb25zOiBbXG4gICAgICAgICdNb2NrIGV4dGVybmFsIGRlcGVuZGVuY2llcyB0byBpbXByb3ZlIHRlc3Qgc3BlZWQnLFxuICAgICAgICAnVXNlIGJlZm9yZUFsbCBmb3IgZXhwZW5zaXZlIHNldHVwIG9wZXJhdGlvbnMnLFxuICAgICAgICAnQ29uc2lkZXIgc3BsaXR0aW5nIGxhcmdlIHRlc3QgZmlsZXMnLFxuICAgICAgICAnVXNlIHRlc3QuY29uY3VycmVudCBmb3IgaW5kZXBlbmRlbnQgdGVzdHMnXG4gICAgICBdXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gcGVyZm9ybWFuY2U7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdFRlc3RSZXN1bHRzKHRlc3RSZXN1bHRzOiBhbnkpOiBzdHJpbmcge1xuICAgIGNvbnN0IHsgc3RhdHMsIHRlc3RzIH0gPSB0ZXN0UmVzdWx0cztcbiAgICBcbiAgICBsZXQgZm9ybWF0dGVkID0gYCMgVGVzdCBSZXN1bHRzXFxuXFxuYDtcbiAgICBmb3JtYXR0ZWQgKz0gYCoqVG90YWwgVGVzdHM6KiogJHtzdGF0cy50b3RhbH1cXG5gO1xuICAgIGZvcm1hdHRlZCArPSBgKipQYXNzZWQ6KiogJHtzdGF0cy5wYXNzZWR9XFxuYDtcbiAgICBmb3JtYXR0ZWQgKz0gYCoqRmFpbGVkOioqICR7c3RhdHMuZmFpbGVkfVxcbmA7XG4gICAgZm9ybWF0dGVkICs9IGAqKlNraXBwZWQ6KiogJHtzdGF0cy5za2lwcGVkfVxcblxcbmA7XG4gICAgXG4gICAgaWYgKHN0YXRzLmZhaWxlZCA+IDApIHtcbiAgICAgIGZvcm1hdHRlZCArPSBgIyMgRmFpbGVkIFRlc3RzXFxuXFxuYDtcbiAgICAgIGNvbnN0IGZhaWxlZFRlc3RzID0gdGVzdHMuZmlsdGVyKCh0OiBhbnkpID0+IHQuc3RhdHVzID09PSAnZmFpbGVkJyk7XG4gICAgICBmb3IgKGNvbnN0IHRlc3Qgb2YgZmFpbGVkVGVzdHMpIHtcbiAgICAgICAgZm9ybWF0dGVkICs9IGAjIyMgJHt0ZXN0Lm5hbWV9XFxuYDtcbiAgICAgICAgZm9ybWF0dGVkICs9IGAqKkZpbGU6KiogJHt0ZXN0LmZpbGV9XFxuYDtcbiAgICAgICAgZm9ybWF0dGVkICs9IGAqKkVycm9yOioqICR7dGVzdC5lcnJvcn1cXG5cXG5gO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZm9ybWF0dGVkO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRDb3ZlcmFnZVJlcG9ydChjb3ZlcmFnZTogYW55KTogc3RyaW5nIHtcbiAgICBsZXQgcmVwb3J0ID0gYCMgVGVzdCBDb3ZlcmFnZSBSZXBvcnRcXG5cXG5gO1xuICAgIFxuICAgIHJlcG9ydCArPSBgIyMgT3ZlcmFsbCBDb3ZlcmFnZVxcbmA7XG4gICAgcmVwb3J0ICs9IGAtICoqTGluZXM6KiogJHtNYXRoLnJvdW5kKGNvdmVyYWdlLm92ZXJhbGwubGluZXMgKiAxMDApfSVcXG5gO1xuICAgIHJlcG9ydCArPSBgLSAqKkJyYW5jaGVzOioqICR7TWF0aC5yb3VuZChjb3ZlcmFnZS5vdmVyYWxsLmJyYW5jaGVzICogMTAwKX0lXFxuYDtcbiAgICByZXBvcnQgKz0gYC0gKipGdW5jdGlvbnM6KiogJHtNYXRoLnJvdW5kKGNvdmVyYWdlLm92ZXJhbGwuZnVuY3Rpb25zICogMTAwKX0lXFxuYDtcbiAgICByZXBvcnQgKz0gYC0gKipTdGF0ZW1lbnRzOioqICR7TWF0aC5yb3VuZChjb3ZlcmFnZS5vdmVyYWxsLnN0YXRlbWVudHMgKiAxMDApfSVcXG5cXG5gO1xuICAgIFxuICAgIHJlcG9ydCArPSBgIyMgRmlsZSBDb3ZlcmFnZVxcbmA7XG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGNvdmVyYWdlLmZpbGVzKSB7XG4gICAgICByZXBvcnQgKz0gYCMjIyAke2ZpbGUucGF0aH1cXG5gO1xuICAgICAgcmVwb3J0ICs9IGAtIExpbmVzOiAke01hdGgucm91bmQoZmlsZS5saW5lcyAqIDEwMCl9JVxcbmA7XG4gICAgICByZXBvcnQgKz0gYC0gQnJhbmNoZXM6ICR7TWF0aC5yb3VuZChmaWxlLmJyYW5jaGVzICogMTAwKX0lXFxuYDtcbiAgICAgIHJlcG9ydCArPSBgLSBGdW5jdGlvbnM6ICR7TWF0aC5yb3VuZChmaWxlLmZ1bmN0aW9ucyAqIDEwMCl9JVxcblxcbmA7XG4gICAgfVxuICAgIFxuICAgIHJlcG9ydCArPSBgIyMgVHJlbmRzXFxuYDtcbiAgICByZXBvcnQgKz0gYC0gTGFzdCBXZWVrOiAke01hdGgucm91bmQoY292ZXJhZ2UudHJlbmRzLmxhc3RXZWVrICogMTAwKX0lXFxuYDtcbiAgICByZXBvcnQgKz0gYC0gTGFzdCBNb250aDogJHtNYXRoLnJvdW5kKGNvdmVyYWdlLnRyZW5kcy5sYXN0TW9udGggKiAxMDApfSVcXG5gO1xuICAgIHJlcG9ydCArPSBgLSBJbXByb3ZlbWVudDogKyR7TWF0aC5yb3VuZChjb3ZlcmFnZS50cmVuZHMuaW1wcm92ZW1lbnQgKiAxMDApfSVcXG5cXG5gO1xuICAgIFxuICAgIHJldHVybiByZXBvcnQ7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdFBlcmZvcm1hbmNlUmVwb3J0KHBlcmZvcm1hbmNlOiBhbnkpOiBzdHJpbmcge1xuICAgIGxldCByZXBvcnQgPSBgIyBUZXN0IFBlcmZvcm1hbmNlIFJlcG9ydFxcblxcbmA7XG4gICAgXG4gICAgcmVwb3J0ICs9IGAjIyBPdmVyYWxsIFBlcmZvcm1hbmNlXFxuYDtcbiAgICByZXBvcnQgKz0gYC0gKipUb3RhbCBUaW1lOioqICR7cGVyZm9ybWFuY2UudG90YWxUaW1lfXNcXG5gO1xuICAgIHJlcG9ydCArPSBgLSAqKkF2ZXJhZ2UgVGltZToqKiAke3BlcmZvcm1hbmNlLmF2ZXJhZ2VUaW1lfXNcXG5cXG5gO1xuICAgIFxuICAgIHJlcG9ydCArPSBgIyMgU2xvd2VzdCBUZXN0c1xcbmA7XG4gICAgZm9yIChjb25zdCB0ZXN0IG9mIHBlcmZvcm1hbmNlLnNsb3dUZXN0cykge1xuICAgICAgcmVwb3J0ICs9IGAtICoqJHt0ZXN0Lm5hbWV9KiogKCR7dGVzdC50aW1lfXMpIC0gJHt0ZXN0LmZpbGV9XFxuYDtcbiAgICB9XG4gICAgXG4gICAgcmVwb3J0ICs9IGBcXG4jIyBSZWNvbW1lbmRhdGlvbnNcXG5gO1xuICAgIGZvciAoY29uc3QgcmVjIG9mIHBlcmZvcm1hbmNlLnJlY29tbWVuZGF0aW9ucykge1xuICAgICAgcmVwb3J0ICs9IGAtICR7cmVjfVxcbmA7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZXBvcnQ7XG4gIH1cblxuICBwcml2YXRlIGdldFNvdXJjZUZpbGVGb3JUZXN0KHRlc3RGaWxlUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBDb252ZXJ0IHRlc3QgZmlsZSBwYXRoIHRvIHNvdXJjZSBmaWxlIHBhdGhcbiAgICByZXR1cm4gdGVzdEZpbGVQYXRoXG4gICAgICAucmVwbGFjZSgvXFwudGVzdFxcLih0c3xqcykkLywgJy4kMScpXG4gICAgICAucmVwbGFjZSgvXFwuc3BlY1xcLih0c3xqcykkLywgJy4kMScpXG4gICAgICAucmVwbGFjZSgvXFwvdGVzdFxcLy8sICcvc3JjLycpXG4gICAgICAucmVwbGFjZSgvXFwvdGVzdHNcXC8vLCAnL3NyYy8nKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0Q292ZXJhZ2VGb3JGaWxlKGZpbGVQYXRoOiBzdHJpbmcsIGNvbnRleHQ6IFBsdWdpbkNvbnRleHQpOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIFNpbXVsYXRlIGNvdmVyYWdlIGRhdGFcbiAgICByZXR1cm4ge1xuICAgICAgbGluZXM6IE1hdGgucmFuZG9tKCkgKiAwLjQgKyAwLjYsXG4gICAgICBicmFuY2hlczogTWF0aC5yYW5kb20oKSAqIDAuNCArIDAuNSxcbiAgICAgIGZ1bmN0aW9uczogTWF0aC5yYW5kb20oKSAqIDAuMyArIDAuN1xuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldFRlc3RGaWxlcyhjb250ZXh0OiBQbHVnaW5Db250ZXh0KTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIC8vIFNpbXVsYXRlIHRlc3QgZmlsZSBkaXNjb3ZlcnlcbiAgICByZXR1cm4gW1xuICAgICAgJ3NyYy9jb21wb25lbnRzL0J1dHRvbi50ZXN0LnRzJyxcbiAgICAgICdzcmMvc2VydmljZXMvQXBpU2VydmljZS50ZXN0LnRzJyxcbiAgICAgICdzcmMvdXRpbHMvaGVscGVycy50ZXN0LnRzJyxcbiAgICAgICdzcmMvaG9va3MvdXNlQXV0aC50ZXN0LnRzJ1xuICAgIF07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGFwcGx5U3VnZ2VzdGlvbihzdWdnZXN0aW9uOiBhbnksIGNvbnRleHQ6IFBsdWdpbkNvbnRleHQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBJbXBsZW1lbnRhdGlvbiBmb3IgYXBwbHlpbmcgc3VnZ2VzdGlvbnNcbiAgICB0aGlzLmFwaT8uc2hvd05vdGlmaWNhdGlvbj8uKGBBcHBsaWVkIHN1Z2dlc3Rpb246ICR7c3VnZ2VzdGlvbi50aXRsZX1gLCAnaW5mbycpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBvblRlc3RSdW4oZGF0YTogYW55LCBjb250ZXh0OiBQbHVnaW5Db250ZXh0KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gSGFuZGxlIHRlc3QgcnVuIGV2ZW50c1xuICAgIGNvbnNvbGUubG9nKCdUZXN0IHJ1biBzdGFydGVkOicsIGRhdGEpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBvblRlc3RDb21wbGV0ZShkYXRhOiBhbnksIGNvbnRleHQ6IFBsdWdpbkNvbnRleHQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBIYW5kbGUgdGVzdCBjb21wbGV0aW9uIGV2ZW50c1xuICAgIGNvbnNvbGUubG9nKCdUZXN0IHJ1biBjb21wbGV0ZWQ6JywgZGF0YSk7XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==