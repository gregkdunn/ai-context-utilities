ae5ba60f7fe08d9a8a7cdac932839711
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createMockContext = exports.createMockWebviewView = exports.EventEmitter = exports.Diagnostic = exports.Location = exports.Selection = exports.Position = exports.Range = exports.DiagnosticSeverity = exports.ConfigurationTarget = exports.TreeItemCollapsibleState = exports.tasks = exports.debug = exports.languages = exports.env = exports.extensions = exports.commands = exports.window = exports.workspace = exports.Uri = exports.ViewColumn = exports.StatusBarAlignment = void 0;
const events_1 = require("events");
// Mock VSCode API for testing
const mockStatusBarItem = {
    show: jest.fn(),
    hide: jest.fn(),
    dispose: jest.fn(),
    text: '',
    tooltip: '',
    command: '',
    alignment: 1,
    priority: 100
};
const mockWebview = {
    html: '',
    options: {},
    onDidReceiveMessage: jest.fn(),
    postMessage: jest.fn(),
    asWebviewUri: jest.fn().mockReturnValue({ toString: () => 'mock://uri' })
};
const mockWebviewView = {
    webview: mockWebview,
    show: jest.fn(),
    title: '',
    description: '',
    onDidDispose: jest.fn(),
    onDidChangeVisibility: jest.fn()
};
const mockDocument = {
    uri: { fsPath: '/mock/path' },
    getText: jest.fn().mockReturnValue('mock text'),
    save: jest.fn(),
    lineCount: 10
};
const mockTerminal = {
    sendText: jest.fn(),
    show: jest.fn(),
    hide: jest.fn(),
    dispose: jest.fn(),
    name: 'Mock Terminal'
};
exports.StatusBarAlignment = {
    Left: 1,
    Right: 2
};
exports.ViewColumn = {
    Active: -1,
    Beside: -2,
    One: 1,
    Two: 2,
    Three: 3
};
exports.Uri = {
    file: jest.fn().mockReturnValue({ toString: () => 'mock://file' }),
    parse: jest.fn().mockReturnValue({ toString: () => 'mock://uri' }),
    joinPath: jest.fn().mockReturnValue({ toString: () => 'mock://joined' })
};
exports.workspace = {
    workspaceFolders: [{ uri: { fsPath: '/test/workspace' } }],
    getConfiguration: jest.fn().mockReturnValue({
        get: jest.fn().mockReturnValue(true),
        update: jest.fn(),
        has: jest.fn().mockReturnValue(true),
        inspect: jest.fn()
    }),
    openTextDocument: jest.fn().mockResolvedValue(mockDocument),
    findFiles: jest.fn().mockResolvedValue([]),
    createFileSystemWatcher: jest.fn().mockReturnValue({
        onDidCreate: jest.fn(),
        onDidChange: jest.fn(),
        onDidDelete: jest.fn(),
        dispose: jest.fn()
    }),
    fs: {
        readFile: jest.fn(),
        writeFile: jest.fn(),
        stat: jest.fn(),
        readDirectory: jest.fn()
    }
};
exports.window = {
    createStatusBarItem: jest.fn().mockReturnValue(mockStatusBarItem),
    registerWebviewViewProvider: jest.fn(),
    showInformationMessage: jest.fn(),
    showWarningMessage: jest.fn(),
    showErrorMessage: jest.fn(),
    showQuickPick: jest.fn(),
    showInputBox: jest.fn(),
    showTextDocument: jest.fn(),
    createOutputChannel: jest.fn().mockReturnValue({
        append: jest.fn(),
        appendLine: jest.fn(),
        show: jest.fn(),
        hide: jest.fn(),
        dispose: jest.fn()
    }),
    createTerminal: jest.fn().mockReturnValue(mockTerminal),
    terminals: [],
    activeTextEditor: null,
    visibleTextEditors: [],
    onDidChangeActiveTextEditor: jest.fn(),
    onDidChangeVisibleTextEditors: jest.fn()
};
exports.commands = {
    registerCommand: jest.fn(),
    executeCommand: jest.fn(),
    getCommands: jest.fn().mockResolvedValue([])
};
exports.extensions = {
    getExtension: jest.fn().mockReturnValue({
        isActive: true,
        exports: {
            getAPI: jest.fn().mockReturnValue({
                getRepository: jest.fn().mockReturnValue({
                    getCommits: jest.fn().mockResolvedValue([]),
                    getBranches: jest.fn().mockResolvedValue([]),
                    getDiff: jest.fn().mockResolvedValue('')
                })
            })
        }
    })
};
exports.env = {
    clipboard: {
        readText: jest.fn(),
        writeText: jest.fn()
    },
    openExternal: jest.fn(),
    machineId: 'mock-machine-id',
    sessionId: 'mock-session-id'
};
exports.languages = {
    createDiagnosticCollection: jest.fn(),
    registerCompletionItemProvider: jest.fn(),
    registerHoverProvider: jest.fn()
};
exports.debug = {
    startDebugging: jest.fn(),
    stopDebugging: jest.fn(),
    onDidStartDebugSession: jest.fn(),
    onDidTerminateDebugSession: jest.fn()
};
exports.tasks = {
    executeTask: jest.fn(),
    fetchTasks: jest.fn(),
    onDidStartTask: jest.fn(),
    onDidEndTask: jest.fn()
};
exports.TreeItemCollapsibleState = {
    None: 0,
    Collapsed: 1,
    Expanded: 2
};
exports.ConfigurationTarget = {
    Global: 1,
    Workspace: 2,
    WorkspaceFolder: 3
};
exports.DiagnosticSeverity = {
    Error: 0,
    Warning: 1,
    Information: 2,
    Hint: 3
};
const Range = class MockRange {
    start;
    end;
    constructor(start, end) {
        this.start = start;
        this.end = end;
    }
};
exports.Range = Range;
const Position = class MockPosition {
    line;
    character;
    constructor(line, character) {
        this.line = line;
        this.character = character;
    }
};
exports.Position = Position;
const Selection = class MockSelection extends exports.Range {
    anchor;
    active;
    constructor(anchor, active) {
        super(anchor, active);
        this.anchor = anchor;
        this.active = active;
    }
};
exports.Selection = Selection;
const Location = class MockLocation {
    uri;
    range;
    constructor(uri, range) {
        this.uri = uri;
        this.range = range;
    }
};
exports.Location = Location;
const Diagnostic = class MockDiagnostic {
    range;
    message;
    severity;
    constructor(range, message, severity) {
        this.range = range;
        this.message = message;
        this.severity = severity;
    }
};
exports.Diagnostic = Diagnostic;
const EventEmitter = class MockEventEmitter {
    _event = new events_1.EventEmitter();
    fire(data) {
        this._event.emit('event', data);
    }
    get event() {
        return (listener) => {
            this._event.on('event', listener);
            return { dispose: () => this._event.removeListener('event', listener) };
        };
    }
    dispose() {
        this._event.removeAllListeners();
    }
};
exports.EventEmitter = EventEmitter;
// Create a mock that can be used by individual tests
const createMockWebviewView = () => ({
    webview: {
        html: '',
        options: {},
        onDidReceiveMessage: jest.fn(),
        postMessage: jest.fn(),
        asWebviewUri: jest.fn().mockReturnValue({ toString: () => 'mock://uri' })
    },
    show: jest.fn(),
    title: '',
    description: '',
    onDidDispose: jest.fn(),
    onDidChangeVisibility: jest.fn()
});
exports.createMockWebviewView = createMockWebviewView;
const createMockContext = () => ({
    subscriptions: [],
    workspaceState: {
        get: jest.fn(),
        update: jest.fn(),
        keys: jest.fn().mockReturnValue([])
    },
    globalState: {
        get: jest.fn(),
        update: jest.fn(),
        keys: jest.fn().mockReturnValue([])
    },
    extensionUri: exports.Uri.parse('mock://extension'),
    extensionPath: '/mock/extension/path',
    storagePath: '/mock/storage/path',
    globalStoragePath: '/mock/global/storage/path',
    logPath: '/mock/log/path',
    environmentVariableCollection: {
        persistent: true,
        replace: jest.fn(),
        append: jest.fn(),
        prepend: jest.fn(),
        get: jest.fn(),
        forEach: jest.fn(),
        delete: jest.fn(),
        clear: jest.fn()
    }
});
exports.createMockContext = createMockContext;
exports.default = {
    StatusBarAlignment: exports.StatusBarAlignment,
    ViewColumn: exports.ViewColumn,
    Uri: exports.Uri,
    workspace: exports.workspace,
    window: exports.window,
    commands: exports.commands,
    extensions: exports.extensions,
    env: exports.env,
    languages: exports.languages,
    debug: exports.debug,
    tasks: exports.tasks,
    TreeItemCollapsibleState: exports.TreeItemCollapsibleState,
    ConfigurationTarget: exports.ConfigurationTarget,
    DiagnosticSeverity: exports.DiagnosticSeverity,
    Range: exports.Range,
    Position: exports.Position,
    Selection: exports.Selection,
    Location: exports.Location,
    Diagnostic: exports.Diagnostic,
    EventEmitter: exports.EventEmitter,
    createMockWebviewView: exports.createMockWebviewView,
    createMockContext: exports.createMockContext
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2dyZWdkdW5uL3NyYy90ZXN0L2FpX2RlYnVnX2NvbnRleHQvdnNjb2RlL3NyYy90ZXN0L19fbW9ja3NfXy92c2NvZGUudHMiLCJtYXBwaW5ncyI6Ijs7O0FBQUEsbUNBQTBEO0FBRTFELDhCQUE4QjtBQUM5QixNQUFNLGlCQUFpQixHQUFHO0lBQ3RCLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0lBQ2YsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDZixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNsQixJQUFJLEVBQUUsRUFBRTtJQUNSLE9BQU8sRUFBRSxFQUFFO0lBQ1gsT0FBTyxFQUFFLEVBQUU7SUFDWCxTQUFTLEVBQUUsQ0FBQztJQUNaLFFBQVEsRUFBRSxHQUFHO0NBQ2hCLENBQUM7QUFFRixNQUFNLFdBQVcsR0FBRztJQUNoQixJQUFJLEVBQUUsRUFBRTtJQUNSLE9BQU8sRUFBRSxFQUFFO0lBQ1gsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUM5QixXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUN0QixZQUFZLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztDQUM1RSxDQUFDO0FBRUYsTUFBTSxlQUFlLEdBQUc7SUFDcEIsT0FBTyxFQUFFLFdBQVc7SUFDcEIsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDZixLQUFLLEVBQUUsRUFBRTtJQUNULFdBQVcsRUFBRSxFQUFFO0lBQ2YsWUFBWSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDdkIscUJBQXFCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtDQUNuQyxDQUFDO0FBRUYsTUFBTSxZQUFZLEdBQUc7SUFDakIsR0FBRyxFQUFFLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRTtJQUM3QixPQUFPLEVBQUUsSUFBSSxDQUFDLEVB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QkFBUTtJQUNSLFVBQVUsRUFBVixrQkFBVTtJQUNWLFlBQVksRUFBWixvQkFBWTtJQUNaLHFCQUFxQixFQUFyQiw2QkFBcUI7SUFDckIsaUJBQWlCLEVBQWpCLHlCQUFpQjtDQUNwQixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9ncmVnZHVubi9zcmMvdGVzdC9haV9kZWJ1Z19jb250ZXh0L3ZzY29kZS9zcmMvdGVzdC9fX21vY2tzX18vdnNjb2RlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50RW1pdHRlciBhcyBOb2RlRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJztcblxuLy8gTW9jayBWU0NvZGUgQVBJIGZvciB0ZXN0aW5nXG5jb25zdCBtb2NrU3RhdHVzQmFySXRlbSA9IHtcbiAgICBzaG93OiBqZXN0LmZuKCksXG4gICAgaGlkZTogamVzdC5mbigpLFxuICAgIGRpc3Bvc2U6IGplc3QuZm4oKSxcbiAgICB0ZXh0OiAnJyxcbiAgICB0b29sdGlwOiAnJyxcbiAgICBjb21tYW5kOiAnJyxcbiAgICBhbGlnbm1lbnQ6IDEsXG4gICAgcHJpb3JpdHk6IDEwMFxufTtcblxuY29uc3QgbW9ja1dlYnZpZXcgPSB7XG4gICAgaHRtbDogJycsXG4gICAgb3B0aW9uczoge30sXG4gICAgb25EaWRSZWNlaXZlTWVzc2FnZTogamVzdC5mbigpLFxuICAgIHBvc3RNZXNzYWdlOiBqZXN0LmZuKCksXG4gICAgYXNXZWJ2aWV3VXJpOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgdG9TdHJpbmc6ICgpID0+ICdtb2NrOi8vdXJpJyB9KVxufTtcblxuY29uc3QgbW9ja1dlYnZpZXdWaWV3ID0ge1xuICAgIHdlYnZpZXc6IG1vY2tXZWJ2aWV3LFxuICAgIHNob3c6IGplc3QuZm4oKSxcbiAgICB0aXRsZTogJycsXG4gICAgZGVzY3JpcHRpb246ICcnLFxuICAgIG9uRGlkRGlzcG9zZTogamVzdC5mbigpLFxuICAgIG9uRGlkQ2hhbmdlVmlzaWJpbGl0eTogamVzdC5mbigpXG59O1xuXG5jb25zdCBtb2NrRG9jdW1lbnQgPSB7XG4gICAgdXJpOiB7IGZzUGF0aDogJy9tb2NrL3BhdGgnIH0sXG4gICAgZ2V0VGV4dDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSgnbW9jayB0ZXh0JyksXG4gICAgc2F2ZTogamVzdC5mbigpLFxuICAgIGxpbmVDb3VudDogMTBcbn07XG5cbmNvbnN0IG1vY2tUZXJtaW5hbCA9IHtcbiAgICBzZW5kVGV4dDogamVzdC5mbigpLFxuICAgIHNob3c6IGplc3QuZm4oKSxcbiAgICBoaWRlOiBqZXN0LmZuKCksXG4gICAgZGlzcG9zZTogamVzdC5mbigpLFxuICAgIG5hbWU6ICdNb2NrIFRlcm1pbmFsJ1xufTtcblxuZXhwb3J0IGNvbnN0IFN0YXR1c0JhckFsaWdubWVudCA9IHtcbiAgICBMZWZ0OiAxLFxuICAgIFJpZ2h0OiAyXG59O1xuXG5leHBvcnQgY29uc3QgVmlld0NvbHVtbiA9IHtcbiAgICBBY3RpdmU6IC0xLFxuICAgIEJlc2lkZTogLTIsXG4gICAgT25lOiAxLFxuICAgIFR3bzogMixcbiAgICBUaHJlZTogM1xufTtcblxuZXhwb3J0IGNvbnN0IFVyaSA9IHtcbiAgICBmaWxlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgdG9TdHJpbmc6ICgpID0+ICdtb2NrOi8vZmlsZScgfSksXG4gICAgcGFyc2U6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyB0b1N0cmluZzogKCkgPT4gJ21vY2s6Ly91cmknIH0pLFxuICAgIGpvaW5QYXRoOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgdG9TdHJpbmc6ICgpID0+ICdtb2NrOi8vam9pbmVkJyB9KVxufTtcblxuZXhwb3J0IGNvbnN0IHdvcmtzcGFjZSA9IHtcbiAgICB3b3Jrc3BhY2VGb2xkZXJzOiBbeyB1cmk6IHsgZnNQYXRoOiAnL3Rlc3Qvd29ya3NwYWNlJyB9IH1dLFxuICAgIGdldENvbmZpZ3VyYXRpb246IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSksXG4gICAgICAgIHVwZGF0ZTogamVzdC5mbigpLFxuICAgICAgICBoYXM6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSksXG4gICAgICAgIGluc3BlY3Q6IGplc3QuZm4oKVxuICAgIH0pLFxuICAgIG9wZW5UZXh0RG9jdW1lbnQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRG9jdW1lbnQpLFxuICAgIGZpbmRGaWxlczogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtdKSxcbiAgICBjcmVhdGVGaWxlU3lzdGVtV2F0Y2hlcjogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIG9uRGlkQ3JlYXRlOiBqZXN0LmZuKCksXG4gICAgICAgIG9uRGlkQ2hhbmdlOiBqZXN0LmZuKCksXG4gICAgICAgIG9uRGlkRGVsZXRlOiBqZXN0LmZuKCksXG4gICAgICAgIGRpc3Bvc2U6IGplc3QuZm4oKVxuICAgIH0pLFxuICAgIGZzOiB7XG4gICAgICAgIHJlYWRGaWxlOiBqZXN0LmZuKCksXG4gICAgICAgIHdyaXRlRmlsZTogamVzdC5mbigpLFxuICAgICAgICBzdGF0OiBqZXN0LmZuKCksXG4gICAgICAgIHJlYWREaXJlY3Rvcnk6IGplc3QuZm4oKVxuICAgIH1cbn07XG5cbmV4cG9ydCBjb25zdCB3aW5kb3cgPSB7XG4gICAgY3JlYXRlU3RhdHVzQmFySXRlbTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3RhdHVzQmFySXRlbSksXG4gICAgcmVnaXN0ZXJXZWJ2aWV3Vmlld1Byb3ZpZGVyOiBqZXN0LmZuKCksXG4gICAgc2hvd0luZm9ybWF0aW9uTWVzc2FnZTogamVzdC5mbigpLFxuICAgIHNob3dXYXJuaW5nTWVzc2FnZTogamVzdC5mbigpLFxuICAgIHNob3dFcnJvck1lc3NhZ2U6IGplc3QuZm4oKSxcbiAgICBzaG93UXVpY2tQaWNrOiBqZXN0LmZuKCksXG4gICAgc2hvd0lucHV0Qm94OiBqZXN0LmZuKCksXG4gICAgc2hvd1RleHREb2N1bWVudDogamVzdC5mbigpLFxuICAgIGNyZWF0ZU91dHB1dENoYW5uZWw6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBhcHBlbmQ6IGplc3QuZm4oKSxcbiAgICAgICAgYXBwZW5kTGluZTogamVzdC5mbigpLFxuICAgICAgICBzaG93OiBqZXN0LmZuKCksXG4gICAgICAgIGhpZGU6IGplc3QuZm4oKSxcbiAgICAgICAgZGlzcG9zZTogamVzdC5mbigpXG4gICAgfSksXG4gICAgY3JlYXRlVGVybWluYWw6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUobW9ja1Rlcm1pbmFsKSxcbiAgICB0ZXJtaW5hbHM6IFtdLFxuICAgIGFjdGl2ZVRleHRFZGl0b3I6IG51bGwsXG4gICAgdmlzaWJsZVRleHRFZGl0b3JzOiBbXSxcbiAgICBvbkRpZENoYW5nZUFjdGl2ZVRleHRFZGl0b3I6IGplc3QuZm4oKSxcbiAgICBvbkRpZENoYW5nZVZpc2libGVUZXh0RWRpdG9yczogamVzdC5mbigpXG59O1xuXG5leHBvcnQgY29uc3QgY29tbWFuZHMgPSB7XG4gICAgcmVnaXN0ZXJDb21tYW5kOiBqZXN0LmZuKCksXG4gICAgZXhlY3V0ZUNvbW1hbmQ6IGplc3QuZm4oKSxcbiAgICBnZXRDb21tYW5kczogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtdKVxufTtcblxuZXhwb3J0IGNvbnN0IGV4dGVuc2lvbnMgPSB7XG4gICAgZ2V0RXh0ZW5zaW9uOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIGV4cG9ydHM6IHtcbiAgICAgICAgICAgIGdldEFQSTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICAgICAgZ2V0UmVwb3NpdG9yeTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgIGdldENvbW1pdHM6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSksXG4gICAgICAgICAgICAgICAgICAgIGdldEJyYW5jaGVzOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW10pLFxuICAgICAgICAgICAgICAgICAgICBnZXREaWZmOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJycpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KVxufTtcblxuZXhwb3J0IGNvbnN0IGVudiA9IHtcbiAgICBjbGlwYm9hcmQ6IHtcbiAgICAgICAgcmVhZFRleHQ6IGplc3QuZm4oKSxcbiAgICAgICAgd3JpdGVUZXh0OiBqZXN0LmZuKClcbiAgICB9LFxuICAgIG9wZW5FeHRlcm5hbDogamVzdC5mbigpLFxuICAgIG1hY2hpbmVJZDogJ21vY2stbWFjaGluZS1pZCcsXG4gICAgc2Vzc2lvbklkOiAnbW9jay1zZXNzaW9uLWlkJ1xufTtcblxuZXhwb3J0IGNvbnN0IGxhbmd1YWdlcyA9IHtcbiAgICBjcmVhdGVEaWFnbm9zdGljQ29sbGVjdGlvbjogamVzdC5mbigpLFxuICAgIHJlZ2lzdGVyQ29tcGxldGlvbkl0ZW1Qcm92aWRlcjogamVzdC5mbigpLFxuICAgIHJlZ2lzdGVySG92ZXJQcm92aWRlcjogamVzdC5mbigpXG59O1xuXG5leHBvcnQgY29uc3QgZGVidWcgPSB7XG4gICAgc3RhcnREZWJ1Z2dpbmc6IGplc3QuZm4oKSxcbiAgICBzdG9wRGVidWdnaW5nOiBqZXN0LmZuKCksXG4gICAgb25EaWRTdGFydERlYnVnU2Vzc2lvbjogamVzdC5mbigpLFxuICAgIG9uRGlkVGVybWluYXRlRGVidWdTZXNzaW9uOiBqZXN0LmZuKClcbn07XG5cbmV4cG9ydCBjb25zdCB0YXNrcyA9IHtcbiAgICBleGVjdXRlVGFzazogamVzdC5mbigpLFxuICAgIGZldGNoVGFza3M6IGplc3QuZm4oKSxcbiAgICBvbkRpZFN0YXJ0VGFzazogamVzdC5mbigpLFxuICAgIG9uRGlkRW5kVGFzazogamVzdC5mbigpXG59O1xuXG5leHBvcnQgY29uc3QgVHJlZUl0ZW1Db2xsYXBzaWJsZVN0YXRlID0ge1xuICAgIE5vbmU6IDAsXG4gICAgQ29sbGFwc2VkOiAxLFxuICAgIEV4cGFuZGVkOiAyXG59O1xuXG5leHBvcnQgY29uc3QgQ29uZmlndXJhdGlvblRhcmdldCA9IHtcbiAgICBHbG9iYWw6IDEsXG4gICAgV29ya3NwYWNlOiAyLFxuICAgIFdvcmtzcGFjZUZvbGRlcjogM1xufTtcblxuZXhwb3J0IGNvbnN0IERpYWdub3N0aWNTZXZlcml0eSA9IHtcbiAgICBFcnJvcjogMCxcbiAgICBXYXJuaW5nOiAxLFxuICAgIEluZm9ybWF0aW9uOiAyLFxuICAgIEhpbnQ6IDNcbn07XG5cbmV4cG9ydCBjb25zdCBSYW5nZSA9IGNsYXNzIE1vY2tSYW5nZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBzdGFydDogYW55LFxuICAgICAgICBwdWJsaWMgZW5kOiBhbnlcbiAgICApIHt9XG59O1xuXG5leHBvcnQgY29uc3QgUG9zaXRpb24gPSBjbGFzcyBNb2NrUG9zaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgbGluZTogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgY2hhcmFjdGVyOiBudW1iZXJcbiAgICApIHt9XG59O1xuXG5leHBvcnQgY29uc3QgU2VsZWN0aW9uID0gY2xhc3MgTW9ja1NlbGVjdGlvbiBleHRlbmRzIFJhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGFuY2hvcjogYW55LFxuICAgICAgICBwdWJsaWMgYWN0aXZlOiBhbnlcbiAgICApIHtcbiAgICAgICAgc3VwZXIoYW5jaG9yLCBhY3RpdmUpO1xuICAgIH1cbn07XG5cbmV4cG9ydCBjb25zdCBMb2NhdGlvbiA9IGNsYXNzIE1vY2tMb2NhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyB1cmk6IGFueSxcbiAgICAgICAgcHVibGljIHJhbmdlOiBhbnlcbiAgICApIHt9XG59O1xuXG5leHBvcnQgY29uc3QgRGlhZ25vc3RpYyA9IGNsYXNzIE1vY2tEaWFnbm9zdGljIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHJhbmdlOiBhbnksXG4gICAgICAgIHB1YmxpYyBtZXNzYWdlOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyBzZXZlcml0eT86IGFueVxuICAgICkge31cbn07XG5cbmV4cG9ydCBjb25zdCBFdmVudEVtaXR0ZXIgPSBjbGFzcyBNb2NrRXZlbnRFbWl0dGVyPFQ+IHtcbiAgICBwcml2YXRlIF9ldmVudCA9IG5ldyBOb2RlRXZlbnRFbWl0dGVyKCk7XG4gICAgXG4gICAgZmlyZShkYXRhOiBUKSB7XG4gICAgICAgIHRoaXMuX2V2ZW50LmVtaXQoJ2V2ZW50JywgZGF0YSk7XG4gICAgfVxuICAgIFxuICAgIGdldCBldmVudCgpIHtcbiAgICAgICAgcmV0dXJuIChsaXN0ZW5lcjogKGRhdGE6IFQpID0+IHZvaWQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50Lm9uKCdldmVudCcsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIHJldHVybiB7IGRpc3Bvc2U6ICgpID0+IHRoaXMuX2V2ZW50LnJlbW92ZUxpc3RlbmVyKCdldmVudCcsIGxpc3RlbmVyKSB9O1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLl9ldmVudC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICB9XG59O1xuXG4vLyBDcmVhdGUgYSBtb2NrIHRoYXQgY2FuIGJlIHVzZWQgYnkgaW5kaXZpZHVhbCB0ZXN0c1xuZXhwb3J0IGNvbnN0IGNyZWF0ZU1vY2tXZWJ2aWV3VmlldyA9ICgpID0+ICh7XG4gICAgd2Vidmlldzoge1xuICAgICAgICBodG1sOiAnJyxcbiAgICAgICAgb3B0aW9uczoge30sXG4gICAgICAgIG9uRGlkUmVjZWl2ZU1lc3NhZ2U6IGplc3QuZm4oKSxcbiAgICAgICAgcG9zdE1lc3NhZ2U6IGplc3QuZm4oKSxcbiAgICAgICAgYXNXZWJ2aWV3VXJpOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgdG9TdHJpbmc6ICgpID0+ICdtb2NrOi8vdXJpJyB9KVxuICAgIH0sXG4gICAgc2hvdzogamVzdC5mbigpLFxuICAgIHRpdGxlOiAnJyxcbiAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgb25EaWREaXNwb3NlOiBqZXN0LmZuKCksXG4gICAgb25EaWRDaGFuZ2VWaXNpYmlsaXR5OiBqZXN0LmZuKClcbn0pO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlTW9ja0NvbnRleHQgPSAoKSA9PiAoe1xuICAgIHN1YnNjcmlwdGlvbnM6IFtdLFxuICAgIHdvcmtzcGFjZVN0YXRlOiB7XG4gICAgICAgIGdldDogamVzdC5mbigpLFxuICAgICAgICB1cGRhdGU6IGplc3QuZm4oKSxcbiAgICAgICAga2V5czogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbXSlcbiAgICB9LFxuICAgIGdsb2JhbFN0YXRlOiB7XG4gICAgICAgIGdldDogamVzdC5mbigpLFxuICAgICAgICB1cGRhdGU6IGplc3QuZm4oKSxcbiAgICAgICAga2V5czogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbXSlcbiAgICB9LFxuICAgIGV4dGVuc2lvblVyaTogVXJpLnBhcnNlKCdtb2NrOi8vZXh0ZW5zaW9uJyksXG4gICAgZXh0ZW5zaW9uUGF0aDogJy9tb2NrL2V4dGVuc2lvbi9wYXRoJyxcbiAgICBzdG9yYWdlUGF0aDogJy9tb2NrL3N0b3JhZ2UvcGF0aCcsXG4gICAgZ2xvYmFsU3RvcmFnZVBhdGg6ICcvbW9jay9nbG9iYWwvc3RvcmFnZS9wYXRoJyxcbiAgICBsb2dQYXRoOiAnL21vY2svbG9nL3BhdGgnLFxuICAgIGVudmlyb25tZW50VmFyaWFibGVDb2xsZWN0aW9uOiB7XG4gICAgICAgIHBlcnNpc3RlbnQ6IHRydWUsXG4gICAgICAgIHJlcGxhY2U6IGplc3QuZm4oKSxcbiAgICAgICAgYXBwZW5kOiBqZXN0LmZuKCksXG4gICAgICAgIHByZXBlbmQ6IGplc3QuZm4oKSxcbiAgICAgICAgZ2V0OiBqZXN0LmZuKCksXG4gICAgICAgIGZvckVhY2g6IGplc3QuZm4oKSxcbiAgICAgICAgZGVsZXRlOiBqZXN0LmZuKCksXG4gICAgICAgIGNsZWFyOiBqZXN0LmZuKClcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIFN0YXR1c0JhckFsaWdubWVudCxcbiAgICBWaWV3Q29sdW1uLFxuICAgIFVyaSxcbiAgICB3b3Jrc3BhY2UsXG4gICAgd2luZG93LFxuICAgIGNvbW1hbmRzLFxuICAgIGV4dGVuc2lvbnMsXG4gICAgZW52LFxuICAgIGxhbmd1YWdlcyxcbiAgICBkZWJ1ZyxcbiAgICB0YXNrcyxcbiAgICBUcmVlSXRlbUNvbGxhcHNpYmxlU3RhdGUsXG4gICAgQ29uZmlndXJhdGlvblRhcmdldCxcbiAgICBEaWFnbm9zdGljU2V2ZXJpdHksXG4gICAgUmFuZ2UsXG4gICAgUG9zaXRpb24sXG4gICAgU2VsZWN0aW9uLFxuICAgIExvY2F0aW9uLFxuICAgIERpYWdub3N0aWMsXG4gICAgRXZlbnRFbWl0dGVyLFxuICAgIGNyZWF0ZU1vY2tXZWJ2aWV3VmlldyxcbiAgICBjcmVhdGVNb2NrQ29udGV4dFxufTtcbiJdLCJ2ZXJzaW9uIjozfQ==