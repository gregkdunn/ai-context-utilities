1997134062d15b4da6c03c2b03ac1e88
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Mock all dependencies
jest.mock('../webview/provider');
jest.mock('../utils/projectDetector');
jest.mock('../utils/shellRunner');
jest.mock('../utils/fileManager');
// Mock additional dependencies
jest.mock('../utils/statusTracker');
jest.mock('../utils/commandCoordinator');
jest.mock('../services/plugins/pluginManager');
jest.mock('../services/plugins/pluginMarketplace');
jest.mock('../services/plugins/pluginDiscovery');
jest.mock('../services/nx/NxAffectedManager');
jest.mock('../services/nx/NxCommandProvider', () => ({
    NxCommandProvider: jest.fn().mockImplementation(() => ({
        register: jest.fn().mockReturnValue([{ dispose: jest.fn() }])
    }))
}));
jest.mock('../services/nx/NxStatusBar');
jest.mock('../services/git/GitDiffManager');
jest.mock('../services/git/GitCommandProvider', () => ({
    GitCommandProvider: jest.fn().mockImplementation(() => ({
        register: jest.fn().mockReturnValue([{ dispose: jest.fn() }])
    }))
}));
jest.mock('../services/flipper/FlipperDetectionManager');
// Mock vscode module
jest.mock('vscode', () => ({
    window: {
        registerWebviewViewProvider: jest.fn(),
        showInformationMessage: jest.fn(() => Promise.resolve(undefined)),
        showWarningMessage: jest.fn(),
        createOutputChannel: jest.fn(() => ({
            appendLine: jest.fn(),
            show: jest.fn()
        }))
    },
    commands: {
        registerCommand: jest.fn(() => ({ dispose: jest.fn() })),
        executeCommand: jest.fn()
    },
    workspace: {
        workspaceFolders: [{ uri: { fsPath: '/test/workspace' } }],
        getConfiguration: jest.fn((section) => ({
            get: jest.fn((key) => {
                if (key === 'showNotifications') {
                    return true;
                }
                return undefined;
            })
        }))
    }
}));
const extension_1 = require("../extension");
const provider_1 = require("../webview/provider");
const projectDetector_1 = require("../utils/projectDetector");
const shellRunner_1 = require("../utils/shellRunner");
const fileManager_1 = require("../utils/fileManager");
const MockedWebviewProvider = provider_1.WebviewProvider;
const MockedProjectDetector = projectDetector_1.ProjectDetector;
const MockedCommandRunner = shellRunner_1.CommandRunner;
const MockedFileManager = fileManager_1.FileManager;
describe('Extension', () => {
    let mockContext;
    let mockProjectDetector;
    let mockCommandRunner;
    let mockFileManager;
    let mockWebviewProvider;
    beforeEach(() => {
        jest.clearAllMocks();
        // Setup mock context
        mockContext = {
            subscriptions: [],
            extensionUri: { fsPath: '/extension/path' }
        };
        // Setup mock instances
        mockProjectDetector = new MockedProjectDetector('test-workspace');
        mockCommandRunner = new MockedCommandRunner({});
        mockFileManager = new MockedFileManager({});
        // Mock methods that are called in the tests
        mockProjectDetector.findNxWorkspace = jest.fn();
        mockProjectDetector.getCurrentProject = jest.fn();
        // Setup mock return values for constructors
        MockedProjectDetector.mockImplementation(() => mockProjectDetector);
        MockedCommandRunner.mockImplementation(() => mockCommandRunner);
        MockedFileManager.mockImplementation(() => mockFileManager);
        // Create a mock webview provider that will be returned by the constructor
        mockWebviewProvider = {
            show: jest.fn(),
            runCommand: jest.fn(),
            resolveWebviewView: jest.fn()
        };
        MockedWebviewProvider.mockImplementation(() => mockWebviewProvider);
    });
    describe('activate', () => {
        it('should activate extension when NX workspace is detected', async () => {
            const vscode = require('vscode');
            // Mock NX workspace detection
            mockProjectDetector.findNxWorkspace.mockResolvedValue('/workspace/nx.json');
            await (0, extension_1.activate)(mockContext);
            expect(vscode.commands.executeCommand).toHaveBeenCalledWith('setContext', 'workspaceHasNxProject', true);
            expect(vscode.window.registerWebviewViewProvider).toHaveBeenCalledWith('aiDebugUtilities', mockWebviewProvider);
            expect(vscode.commands.registerCommand).toHaveBeenCalled();
            expect(mockContext.subscriptions.length).toBeGreaterThan(0);
        });
        it('should remain dormant when no NX workspace is detected', async () => {
            const vscode = require('vscode');
            // Mock no NX workspace
            mockProjectDetector.findNxWorkspace.mockResolvedValue(null);
            await (0, extension_1.activate)(mockContext);
            expect(vscode.commands.executeCommand).toHaveBeenCalledWith('setContext', 'workspaceHasNxProject', false);
            expect(vscode.window.registerWebviewViewProvider).not.toHaveBeenCalled();
        });
        it('should show welcome notification when notifications are enabled', async () => {
            const vscode = require('vscode');
            mockProjectDetector.findNxWorkspace.mockResolvedValue('/workspace/nx.json');
            // Create a simple resolved promise for the notification
            vscode.window.showInformationMessage.mockResolvedValue('Open Panel');
            await (0, extension_1.activate)(mockContext);
            expect(vscode.window.showInformationMessage).toHaveBeenCalledWith('AI Debug Utilities activated! Open the panel to get started.', 'Open Panel');
            // Give some time for async operations to complete
            await new Promise(resolve => setTimeout(resolve, 10));
            expect(vscode.commands.executeCommand).toHaveBeenCalledWith('aiDebugUtilities.openPanel');
        }, 10000);
        it('should register all required commands', async () => {
            const vscode = require('vscode');
            mockProjectDetector.findNxWorkspace.mockResolvedValue('/workspace/nx.json');
            await (0, extension_1.activate)(mockContext);
            const registeredCommands = vscode.commands.registerCommand.mock.calls.map((call) => call[0]);
            expect(registeredCommands).toContain('aiDebugUtilities.openPanel');
            expect(registeredCommands).toContain('aiDebugUtilities.runAiDebug');
            expect(registeredCommands).toContain('aiDebugUtilities.runNxTest');
            expect(registeredCommands).toContain('aiDebugUtilities.runGitDiff');
            expect(registeredCommands).toContain('aiDebugUtilities.runPrepareToPush');
        });
    });
    describe('registered commands', () => {
        beforeEach(async () => {
            const vscode = require('vscode');
            mockProjectDetector.findNxWorkspace.mockResolvedValue('/workspace/nx.json');
            await (0, extension_1.activate)(mockContext);
        });
        it('should register openPanel command', async () => {
            const vscode = require('vscode');
            const openPanelCall = vscode.commands.registerCommand.mock.calls
                .find((call) => call[0] === 'aiDebugUtilities.openPanel');
            if (openPanelCall && openPanelCall[1]) {
                openPanelCall[1]();
                expect(mockWebviewProvider.show).toHaveBeenCalled();
            }
        });
        it('should register runAiDebug command with project detection', async () => {
            const vscode = require('vscode');
            const runAiDebugCall = vscode.commands.registerCommand.mock.calls
                .find((call) => call[0] === 'aiDebugUtilities.runAiDebug');
            mockProjectDetector.getCurrentProject.mockResolvedValue({
                name: 'my-app',
                root: 'apps/my-app',
                projectType: 'application',
                type: 'nx',
                packageJsonPath: 'apps/my-app/package.json'
            });
            if (runAiDebugCall && runAiDebugCall[1]) {
                await runAiDebugCall[1]();
                expect(mockProjectDetector.getCurrentProject).toHaveBeenCalled();
                expect(mockWebviewProvider.runCommand).toHaveBeenCalledWith('aiDebug', { project: 'my-app' });
            }
        });
        it('should register runAiDebug command and show warning when no project detected', async () => {
            const vscode = require('vscode');
            const runAiDebugCall = vscode.commands.registerCommand.mock.calls
                .find((call) => call[0] === 'aiDebugUtilities.runAiDebug');
            mockProjectDetector.getCurrentProject.mockResolvedValue(undefined);
            if (runAiDebugCall && runAiDebugCall[1]) {
                await runAiDebugCall[1]();
                expect(vscode.window.showWarningMessage).toHaveBeenCalledWith('No NX project detected. Please select a project first.');
                expect(mockWebviewProvider.runCommand).not.toHaveBeenCalled();
            }
        });
        it('should register runNxTest command with project detection', async () => {
            const vscode = require('vscode');
            const runNxTestCall = vscode.commands.registerCommand.mock.calls
                .find((call) => call[0] === 'aiDebugUtilities.runNxTest');
            mockProjectDetector.getCurrentProject.mockResolvedValue({
                name: 'my-lib',
                root: 'libs/my-lib',
                projectType: 'library',
                type: 'nx',
                packageJsonPath: 'libs/my-lib/package.json'
            });
            if (runNxTestCall && runNxTestCall[1]) {
                await runNxTestCall[1]();
                expect(mockProjectDetector.getCurrentProject).toHaveBeenCalled();
                expect(mockWebviewProvider.runCommand).toHaveBeenCalledWith('nxTest', { project: 'my-lib' });
            }
        });
        it('should register runNxTest command and show warning when no project detected', async () => {
            const vscode = require('vscode');
            const runNxTestCall = vscode.commands.registerCommand.mock.calls
                .find((call) => call[0] === 'aiDebugUtilities.runNxTest');
            mockProjectDetector.getCurrentProject.mockResolvedValue(undefined);
            if (runNxTestCall && runNxTestCall[1]) {
                await runNxTestCall[1]();
                expect(vscode.window.showWarningMessage).toHaveBeenCalledWith('No NX project detected. Please select a project first.');
                expect(mockWebviewProvider.runCommand).not.toHaveBeenCalled();
            }
        });
        it('should register runGitDiff command', async () => {
            const vscode = require('vscode');
            const runGitDiffCall = vscode.commands.registerCommand.mock.calls
                .find((call) => call[0] === 'aiDebugUtilities.runGitDiff');
            if (runGitDiffCall && runGitDiffCall[1]) {
                await runGitDiffCall[1]();
                expect(mockWebviewProvider.runCommand).toHaveBeenCalledWith('gitDiff', {});
            }
        });
        it('should register runPrepareToPush command with project detection', async () => {
            const vscode = require('vscode');
            const runPrepareToPushCall = vscode.commands.registerCommand.mock.calls
                .find((call) => call[0] === 'aiDebugUtilities.runPrepareToPush');
            mockProjectDetector.getCurrentProject.mockResolvedValue({
                name: 'my-app',
                root: 'apps/my-app',
                projectType: 'application',
                type: 'nx',
                packageJsonPath: 'apps/my-app/package.json'
            });
            if (runPrepareToPushCall && runPrepareToPushCall[1]) {
                await runPrepareToPushCall[1]();
                expect(mockProjectDetector.getCurrentProject).toHaveBeenCalled();
                expect(mockWebviewProvider.runCommand).toHaveBeenCalledWith('prepareToPush', { project: 'my-app' });
            }
        });
        it('should register runPrepareToPush command and show warning when no project detected', async () => {
            const vscode = require('vscode');
            const runPrepareToPushCall = vscode.commands.registerCommand.mock.calls
                .find((call) => call[0] === 'aiDebugUtilities.runPrepareToPush');
            mockProjectDetector.getCurrentProject.mockResolvedValue(undefined);
            if (runPrepareToPushCall && runPrepareToPushCall[1]) {
                await runPrepareToPushCall[1]();
                expect(vscode.window.showWarningMessage).toHaveBeenCalledWith('No NX project detected. Please select a project first.');
                expect(mockWebviewProvider.runCommand).not.toHaveBeenCalled();
            }
        });
    });
    describe('error handling', () => {
        it('should handle workspace detection errors gracefully', async () => {
            const vscode = require('vscode');
            mockProjectDetector.findNxWorkspace.mockRejectedValue(new Error('Workspace detection failed'));
            await (0, extension_1.activate)(mockContext);
            // The extension should set context to false when workspace detection fails
            expect(vscode.commands.executeCommand).toHaveBeenCalledWith('setContext', 'workspaceHasNxProject', false);
        });
        it('should handle command registration errors gracefully', async () => {
            const vscode = require('vscode');
            mockProjectDetector.findNxWorkspace.mockResolvedValue('/workspace/nx.json');
            vscode.commands.registerCommand.mockImplementation(() => {
                throw new Error('Command registration failed');
            });
            await (0, extension_1.activate)(mockContext);
            // The extension should set context to false when command registration fails
            expect(vscode.commands.executeCommand).toHaveBeenCalledWith('setContext', 'workspaceHasNxProject', false);
        });
    });
    describe('deactivate', () => {
        it('should deactivate extension cleanly', () => {
            // Should not throw
            expect(() => (0, extension_1.deactivate)()).not.toThrow();
        });
    });
    describe('integration', () => {
        it('should create all necessary instances with correct dependencies', async () => {
            // Clear previous mock calls
            MockedProjectDetector.mockClear();
            MockedCommandRunner.mockClear();
            MockedFileManager.mockClear();
            MockedWebviewProvider.mockClear();
            mockProjectDetector.findNxWorkspace.mockResolvedValue('/workspace/nx.json');
            await (0, extension_1.activate)(mockContext);
            expect(MockedProjectDetector).toHaveBeenCalledTimes(1);
            expect(MockedCommandRunner).toHaveBeenCalledTimes(1);
            expect(MockedFileManager).toHaveBeenCalledTimes(1);
            expect(MockedWebviewProvider).toHaveBeenCalledWith(mockContext.extensionUri, mockProjectDetector, mockCommandRunner, mockFileManager, expect.anything() // statusTracker
            );
        });
        it('should properly dispose of resources through context subscriptions', async () => {
            mockProjectDetector.findNxWorkspace.mockResolvedValue('/workspace/nx.json');
            await (0, extension_1.activate)(mockContext);
            expect(mockContext.subscriptions.length).toBeGreaterThan(0);
            // All subscriptions should be disposable objects
            mockContext.subscriptions.forEach(subscription => {
                if (subscription) {
                    expect(subscription).toHaveProperty('dispose');
                }
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2dyZWdkdW5uL3NyYy90ZXN0L2FpX2RlYnVnX2NvbnRleHQvdnNjb2RlL3NyYy9fX3Rlc3RzX18vZXh0ZW5zaW9uLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFPQSx3QkFBd0I7QUFDeEIsSUFBSSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0FBQ2pDLElBQUksQ0FBQyxJQUFJLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUN0QyxJQUFJLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUM7QUFDbEMsSUFBSSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0FBRWxDLCtCQUErQjtBQUMvQixJQUFJLENBQUMsSUFBSSxDQUFDLHdCQUF3QixDQUFDLENBQUM7QUFDcEMsSUFBSSxDQUFDLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO0FBQ3pDLElBQUksQ0FBQyxJQUFJLENBQUMsbUNBQW1DLENBQUMsQ0FBQztBQUMvQyxJQUFJLENBQUMsSUFBSSxDQUFDLHVDQUF1QyxDQUFDLENBQUM7QUFDbkQsSUFBSSxDQUFDLElBQUksQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDO0FBQ2pELElBQUksQ0FBQyxJQUFJLENBQUMsa0NBQWtDLENBQUMsQ0FBQztBQUM5QyxJQUFJLENBQUMsSUFBSSxDQUFDLGtDQUFrQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDbkQsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDckQsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0tBQzlELENBQUMsQ0FBQztDQUNKLENBQUMsQ0FBQyxDQUFDO0FBQ0osSUFBSSxDQUFDLElBQUksQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO0FBQ3hDLElBQUksQ0FBQyxJQUFJLENB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Q0FBQyxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQztnQkFDbkQsQ0FBQztZQUNMLENBQUMsQ0FBQyxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9ncmVnZHVubi9zcmMvdGVzdC9haV9kZWJ1Z19jb250ZXh0L3ZzY29kZS9zcmMvX190ZXN0c19fL2V4dGVuc2lvbi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHZzY29kZSBmcm9tICd2c2NvZGUnO1xuaW1wb3J0IHsgYWN0aXZhdGUsIGRlYWN0aXZhdGUgfSBmcm9tICcuLi9leHRlbnNpb24nO1xuaW1wb3J0IHsgV2Vidmlld1Byb3ZpZGVyIH0gZnJvbSAnLi4vd2Vidmlldy9wcm92aWRlcic7XG5pbXBvcnQgeyBQcm9qZWN0RGV0ZWN0b3IgfSBmcm9tICcuLi91dGlscy9wcm9qZWN0RGV0ZWN0b3InO1xuaW1wb3J0IHsgQ29tbWFuZFJ1bm5lciB9IGZyb20gJy4uL3V0aWxzL3NoZWxsUnVubmVyJztcbmltcG9ydCB7IEZpbGVNYW5hZ2VyIH0gZnJvbSAnLi4vdXRpbHMvZmlsZU1hbmFnZXInO1xuXG4vLyBNb2NrIGFsbCBkZXBlbmRlbmNpZXNcbmplc3QubW9jaygnLi4vd2Vidmlldy9wcm92aWRlcicpO1xuamVzdC5tb2NrKCcuLi91dGlscy9wcm9qZWN0RGV0ZWN0b3InKTtcbmplc3QubW9jaygnLi4vdXRpbHMvc2hlbGxSdW5uZXInKTtcbmplc3QubW9jaygnLi4vdXRpbHMvZmlsZU1hbmFnZXInKTtcblxuLy8gTW9jayBhZGRpdGlvbmFsIGRlcGVuZGVuY2llc1xuamVzdC5tb2NrKCcuLi91dGlscy9zdGF0dXNUcmFja2VyJyk7XG5qZXN0Lm1vY2soJy4uL3V0aWxzL2NvbW1hbmRDb29yZGluYXRvcicpO1xuamVzdC5tb2NrKCcuLi9zZXJ2aWNlcy9wbHVnaW5zL3BsdWdpbk1hbmFnZXInKTtcbmplc3QubW9jaygnLi4vc2VydmljZXMvcGx1Z2lucy9wbHVnaW5NYXJrZXRwbGFjZScpO1xuamVzdC5tb2NrKCcuLi9zZXJ2aWNlcy9wbHVnaW5zL3BsdWdpbkRpc2NvdmVyeScpO1xuamVzdC5tb2NrKCcuLi9zZXJ2aWNlcy9ueC9OeEFmZmVjdGVkTWFuYWdlcicpO1xuamVzdC5tb2NrKCcuLi9zZXJ2aWNlcy9ueC9OeENvbW1hbmRQcm92aWRlcicsICgpID0+ICh7XG4gIE54Q29tbWFuZFByb3ZpZGVyOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7XG4gICAgcmVnaXN0ZXI6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoW3sgZGlzcG9zZTogamVzdC5mbigpIH1dKVxuICB9KSlcbn0pKTtcbmplc3QubW9jaygnLi4vc2VydmljZXMvbngvTnhTdGF0dXNCYXInKTtcbmplc3QubW9jaygnLi4vc2VydmljZXMvZ2l0L0dpdERpZmZNYW5hZ2VyJyk7XG5qZXN0Lm1vY2soJy4uL3NlcnZpY2VzL2dpdC9HaXRDb21tYW5kUHJvdmlkZXInLCAoKSA9PiAoe1xuICBHaXRDb21tYW5kUHJvdmlkZXI6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gKHtcbiAgICByZWdpc3RlcjogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbeyBkaXNwb3NlOiBqZXN0LmZuKCkgfV0pXG4gIH0pKVxufSkpO1xuamVzdC5tb2NrKCcuLi9zZXJ2aWNlcy9mbGlwcGVyL0ZsaXBwZXJEZXRlY3Rpb25NYW5hZ2VyJyk7XG5cbi8vIE1vY2sgdnNjb2RlIG1vZHVsZVxuamVzdC5tb2NrKCd2c2NvZGUnLCAoKSA9PiAoe1xuICB3aW5kb3c6IHtcbiAgICByZWdpc3RlcldlYnZpZXdWaWV3UHJvdmlkZXI6IGplc3QuZm4oKSxcbiAgICBzaG93SW5mb3JtYXRpb25NZXNzYWdlOiBqZXN0LmZuKCgpID0+IFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpKSxcbiAgICBzaG93V2FybmluZ01lc3NhZ2U6IGplc3QuZm4oKSxcbiAgICBjcmVhdGVPdXRwdXRDaGFubmVsOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICBhcHBlbmRMaW5lOiBqZXN0LmZuKCksXG4gICAgICBzaG93OiBqZXN0LmZuKClcbiAgICB9KSlcbiAgfSxcbiAgY29tbWFuZHM6IHtcbiAgICByZWdpc3RlckNvbW1hbmQ6IGplc3QuZm4oKCkgPT4gKHsgZGlzcG9zZTogamVzdC5mbigpIH0pKSxcbiAgICBleGVjdXRlQ29tbWFuZDogamVzdC5mbigpXG4gIH0sXG4gIHdvcmtzcGFjZToge1xuICAgIHdvcmtzcGFjZUZvbGRlcnM6IFt7IHVyaTogeyBmc1BhdGg6ICcvdGVzdC93b3Jrc3BhY2UnIH0gfV0sXG4gICAgZ2V0Q29uZmlndXJhdGlvbjogamVzdC5mbigoc2VjdGlvbj86IHN0cmluZykgPT4gKHtcbiAgICAgIGdldDogamVzdC5mbigoa2V5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ3Nob3dOb3RpZmljYXRpb25zJykge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9KVxuICAgIH0pKVxuICB9XG59KSk7XG5cbmNvbnN0IE1vY2tlZFdlYnZpZXdQcm92aWRlciA9IFdlYnZpZXdQcm92aWRlciBhcyBqZXN0Lk1vY2tlZENsYXNzPHR5cGVvZiBXZWJ2aWV3UHJvdmlkZXI+O1xuY29uc3QgTW9ja2VkUHJvamVjdERldGVjdG9yID0gUHJvamVjdERldGVjdG9yIGFzIGplc3QuTW9ja2VkQ2xhc3M8dHlwZW9mIFByb2plY3REZXRlY3Rvcj47XG5jb25zdCBNb2NrZWRDb21tYW5kUnVubmVyID0gQ29tbWFuZFJ1bm5lciBhcyBqZXN0Lk1vY2tlZENsYXNzPHR5cGVvZiBDb21tYW5kUnVubmVyPjtcbmNvbnN0IE1vY2tlZEZpbGVNYW5hZ2VyID0gRmlsZU1hbmFnZXIgYXMgamVzdC5Nb2NrZWRDbGFzczx0eXBlb2YgRmlsZU1hbmFnZXI+O1xuXG5kZXNjcmliZSgnRXh0ZW5zaW9uJywgKCkgPT4ge1xuICBsZXQgbW9ja0NvbnRleHQ6IHZzY29kZS5FeHRlbnNpb25Db250ZXh0O1xuICBsZXQgbW9ja1Byb2plY3REZXRlY3RvcjogamVzdC5Nb2NrZWQ8UHJvamVjdERldGVjdG9yPjtcbiAgbGV0IG1vY2tDb21tYW5kUnVubmVyOiBqZXN0Lk1vY2tlZDxDb21tYW5kUnVubmVyPjtcbiAgbGV0IG1vY2tGaWxlTWFuYWdlcjogamVzdC5Nb2NrZWQ8RmlsZU1hbmFnZXI+O1xuICBsZXQgbW9ja1dlYnZpZXdQcm92aWRlcjogYW55O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuXG4gICAgLy8gU2V0dXAgbW9jayBjb250ZXh0XG4gICAgbW9ja0NvbnRleHQgPSB7XG4gICAgICBzdWJzY3JpcHRpb25zOiBbXSxcbiAgICAgIGV4dGVuc2lvblVyaTogeyBmc1BhdGg6ICcvZXh0ZW5zaW9uL3BhdGgnIH1cbiAgICB9IGFzIGFueTtcblxuICAgIC8vIFNldHVwIG1vY2sgaW5zdGFuY2VzXG4gICAgbW9ja1Byb2plY3REZXRlY3RvciA9IG5ldyBNb2NrZWRQcm9qZWN0RGV0ZWN0b3IoJ3Rlc3Qtd29ya3NwYWNlJykgYXMgamVzdC5Nb2NrZWQ8UHJvamVjdERldGVjdG9yPjtcbiAgICBtb2NrQ29tbWFuZFJ1bm5lciA9IG5ldyBNb2NrZWRDb21tYW5kUnVubmVyKHt9IGFzIGFueSkgYXMgamVzdC5Nb2NrZWQ8Q29tbWFuZFJ1bm5lcj47XG4gICAgbW9ja0ZpbGVNYW5hZ2VyID0gbmV3IE1vY2tlZEZpbGVNYW5hZ2VyKHt9IGFzIGFueSkgYXMgamVzdC5Nb2NrZWQ8RmlsZU1hbmFnZXI+O1xuICAgIFxuICAgIC8vIE1vY2sgbWV0aG9kcyB0aGF0IGFyZSBjYWxsZWQgaW4gdGhlIHRlc3RzXG4gICAgbW9ja1Byb2plY3REZXRlY3Rvci5maW5kTnhXb3Jrc3BhY2UgPSBqZXN0LmZuKCk7XG4gICAgbW9ja1Byb2plY3REZXRlY3Rvci5nZXRDdXJyZW50UHJvamVjdCA9IGplc3QuZm4oKTtcbiAgICBcbiAgICAvLyBTZXR1cCBtb2NrIHJldHVybiB2YWx1ZXMgZm9yIGNvbnN0cnVjdG9yc1xuICAgIE1vY2tlZFByb2plY3REZXRlY3Rvci5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gbW9ja1Byb2plY3REZXRlY3Rvcik7XG4gICAgTW9ja2VkQ29tbWFuZFJ1bm5lci5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gbW9ja0NvbW1hbmRSdW5uZXIpO1xuICAgIE1vY2tlZEZpbGVNYW5hZ2VyLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBtb2NrRmlsZU1hbmFnZXIpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBhIG1vY2sgd2VidmlldyBwcm92aWRlciB0aGF0IHdpbGwgYmUgcmV0dXJuZWQgYnkgdGhlIGNvbnN0cnVjdG9yXG4gICAgbW9ja1dlYnZpZXdQcm92aWRlciA9IHtcbiAgICAgIHNob3c6IGplc3QuZm4oKSxcbiAgICAgIHJ1bkNvbW1hbmQ6IGplc3QuZm4oKSxcbiAgICAgIHJlc29sdmVXZWJ2aWV3VmlldzogamVzdC5mbigpXG4gICAgfSBhcyBhbnk7XG4gICAgXG4gICAgTW9ja2VkV2Vidmlld1Byb3ZpZGVyLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBtb2NrV2Vidmlld1Byb3ZpZGVyKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FjdGl2YXRlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWN0aXZhdGUgZXh0ZW5zaW9uIHdoZW4gTlggd29ya3NwYWNlIGlzIGRldGVjdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdnNjb2RlID0gcmVxdWlyZSgndnNjb2RlJyk7XG4gICAgICBcbiAgICAgIC8vIE1vY2sgTlggd29ya3NwYWNlIGRldGVjdGlvblxuICAgICAgbW9ja1Byb2plY3REZXRlY3Rvci5maW5kTnhXb3Jrc3BhY2UubW9ja1Jlc29sdmVkVmFsdWUoJy93b3Jrc3BhY2UvbnguanNvbicpO1xuXG4gICAgICBhd2FpdCBhY3RpdmF0ZShtb2NrQ29udGV4dCk7XG5cbiAgICAgIGV4cGVjdCh2c2NvZGUuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdzZXRDb250ZXh0JywgJ3dvcmtzcGFjZUhhc054UHJvamVjdCcsIHRydWUpO1xuICAgICAgZXhwZWN0KHZzY29kZS53aW5kb3cucmVnaXN0ZXJXZWJ2aWV3Vmlld1Byb3ZpZGVyKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnYWlEZWJ1Z1V0aWxpdGllcycsIG1vY2tXZWJ2aWV3UHJvdmlkZXIpO1xuICAgICAgZXhwZWN0KHZzY29kZS5jb21tYW5kcy5yZWdpc3RlckNvbW1hbmQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrQ29udGV4dC5zdWJzY3JpcHRpb25zLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZW1haW4gZG9ybWFudCB3aGVuIG5vIE5YIHdvcmtzcGFjZSBpcyBkZXRlY3RlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHZzY29kZSA9IHJlcXVpcmUoJ3ZzY29kZScpO1xuICAgICAgXG4gICAgICAvLyBNb2NrIG5vIE5YIHdvcmtzcGFjZVxuICAgICAgbW9ja1Byb2plY3REZXRlY3Rvci5maW5kTnhXb3Jrc3BhY2UubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIGF3YWl0IGFjdGl2YXRlKG1vY2tDb250ZXh0KTtcblxuICAgICAgZXhwZWN0KHZzY29kZS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3NldENvbnRleHQnLCAnd29ya3NwYWNlSGFzTnhQcm9qZWN0JywgZmFsc2UpO1xuICAgICAgZXhwZWN0KHZzY29kZS53aW5kb3cucmVnaXN0ZXJXZWJ2aWV3Vmlld1Byb3ZpZGVyKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzaG93IHdlbGNvbWUgbm90aWZpY2F0aW9uIHdoZW4gbm90aWZpY2F0aW9ucyBhcmUgZW5hYmxlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZzY29kZSA9IHJlcXVpcmUoJ3ZzY29kZScpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBtb2NrUHJvamVjdERldGVjdG9yLmZpbmROeFdvcmtzcGFjZS5tb2NrUmVzb2x2ZWRWYWx1ZSgnL3dvcmtzcGFjZS9ueC5qc29uJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIHNpbXBsZSByZXNvbHZlZCBwcm9taXNlIGZvciB0aGUgbm90aWZpY2F0aW9uXG4gICAgICAgICAgICB2c2NvZGUud2luZG93LnNob3dJbmZvcm1hdGlvbk1lc3NhZ2UubW9ja1Jlc29sdmVkVmFsdWUoJ09wZW4gUGFuZWwnKTtcblxuICAgICAgICAgICAgYXdhaXQgYWN0aXZhdGUobW9ja0NvbnRleHQpO1xuXG4gICAgICAgICAgICBleHBlY3QodnNjb2RlLndpbmRvdy5zaG93SW5mb3JtYXRpb25NZXNzYWdlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAgICAgICAnQUkgRGVidWcgVXRpbGl0aWVzIGFjdGl2YXRlZCEgT3BlbiB0aGUgcGFuZWwgdG8gZ2V0IHN0YXJ0ZWQuJyxcbiAgICAgICAgICAgICAgICAnT3BlbiBQYW5lbCdcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEdpdmUgc29tZSB0aW1lIGZvciBhc3luYyBvcGVyYXRpb25zIHRvIGNvbXBsZXRlXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTApKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHZzY29kZS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2FpRGVidWdVdGlsaXRpZXMub3BlblBhbmVsJyk7XG4gICAgfSwgMTAwMDApO1xuXG4gICAgaXQoJ3Nob3VsZCByZWdpc3RlciBhbGwgcmVxdWlyZWQgY29tbWFuZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB2c2NvZGUgPSByZXF1aXJlKCd2c2NvZGUnKTtcbiAgICAgIFxuICAgICAgbW9ja1Byb2plY3REZXRlY3Rvci5maW5kTnhXb3Jrc3BhY2UubW9ja1Jlc29sdmVkVmFsdWUoJy93b3Jrc3BhY2UvbnguanNvbicpO1xuXG4gICAgICBhd2FpdCBhY3RpdmF0ZShtb2NrQ29udGV4dCk7XG5cbiAgICAgIGNvbnN0IHJlZ2lzdGVyZWRDb21tYW5kcyA9IHZzY29kZS5jb21tYW5kcy5yZWdpc3RlckNvbW1hbmQubW9jay5jYWxscy5tYXAoKGNhbGw6IGFueSkgPT4gY2FsbFswXSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZWdpc3RlcmVkQ29tbWFuZHMpLnRvQ29udGFpbignYWlEZWJ1Z1V0aWxpdGllcy5vcGVuUGFuZWwnKTtcbiAgICAgIGV4cGVjdChyZWdpc3RlcmVkQ29tbWFuZHMpLnRvQ29udGFpbignYWlEZWJ1Z1V0aWxpdGllcy5ydW5BaURlYnVnJyk7XG4gICAgICBleHBlY3QocmVnaXN0ZXJlZENvbW1hbmRzKS50b0NvbnRhaW4oJ2FpRGVidWdVdGlsaXRpZXMucnVuTnhUZXN0Jyk7XG4gICAgICBleHBlY3QocmVnaXN0ZXJlZENvbW1hbmRzKS50b0NvbnRhaW4oJ2FpRGVidWdVdGlsaXRpZXMucnVuR2l0RGlmZicpO1xuICAgICAgZXhwZWN0KHJlZ2lzdGVyZWRDb21tYW5kcykudG9Db250YWluKCdhaURlYnVnVXRpbGl0aWVzLnJ1blByZXBhcmVUb1B1c2gnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3JlZ2lzdGVyZWQgY29tbWFuZHMnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB2c2NvZGUgPSByZXF1aXJlKCd2c2NvZGUnKTtcbiAgICAgIG1vY2tQcm9qZWN0RGV0ZWN0b3IuZmluZE54V29ya3NwYWNlLm1vY2tSZXNvbHZlZFZhbHVlKCcvd29ya3NwYWNlL254Lmpzb24nKTtcbiAgICAgIGF3YWl0IGFjdGl2YXRlKG1vY2tDb250ZXh0KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVnaXN0ZXIgb3BlblBhbmVsIGNvbW1hbmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB2c2NvZGUgPSByZXF1aXJlKCd2c2NvZGUnKTtcbiAgICAgIGNvbnN0IG9wZW5QYW5lbENhbGwgPSB2c2NvZGUuY29tbWFuZHMucmVnaXN0ZXJDb21tYW5kLm1vY2suY2FsbHNcbiAgICAgICAgLmZpbmQoKGNhbGw6IGFueSkgPT4gY2FsbFswXSA9PT0gJ2FpRGVidWdVdGlsaXRpZXMub3BlblBhbmVsJyk7XG4gICAgICBcbiAgICAgIGlmIChvcGVuUGFuZWxDYWxsICYmIG9wZW5QYW5lbENhbGxbMV0pIHtcbiAgICAgICAgb3BlblBhbmVsQ2FsbFsxXSgpO1xuICAgICAgICBleHBlY3QobW9ja1dlYnZpZXdQcm92aWRlci5zaG93KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlZ2lzdGVyIHJ1bkFpRGVidWcgY29tbWFuZCB3aXRoIHByb2plY3QgZGV0ZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdnNjb2RlID0gcmVxdWlyZSgndnNjb2RlJyk7XG4gICAgICBjb25zdCBydW5BaURlYnVnQ2FsbCA9IHZzY29kZS5jb21tYW5kcy5yZWdpc3RlckNvbW1hbmQubW9jay5jYWxsc1xuICAgICAgICAuZmluZCgoY2FsbDogYW55KSA9PiBjYWxsWzBdID09PSAnYWlEZWJ1Z1V0aWxpdGllcy5ydW5BaURlYnVnJyk7XG5cbiAgICAgIG1vY2tQcm9qZWN0RGV0ZWN0b3IuZ2V0Q3VycmVudFByb2plY3QubW9ja1Jlc29sdmVkVmFsdWUoeyBcbiAgICAgICAgbmFtZTogJ215LWFwcCcsIFxuICAgICAgICByb290OiAnYXBwcy9teS1hcHAnLCBcbiAgICAgICAgcHJvamVjdFR5cGU6ICdhcHBsaWNhdGlvbicsXG4gICAgICAgIHR5cGU6ICdueCcsXG4gICAgICAgIHBhY2thZ2VKc29uUGF0aDogJ2FwcHMvbXktYXBwL3BhY2thZ2UuanNvbidcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocnVuQWlEZWJ1Z0NhbGwgJiYgcnVuQWlEZWJ1Z0NhbGxbMV0pIHtcbiAgICAgICAgYXdhaXQgcnVuQWlEZWJ1Z0NhbGxbMV0oKTtcblxuICAgICAgICBleHBlY3QobW9ja1Byb2plY3REZXRlY3Rvci5nZXRDdXJyZW50UHJvamVjdCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgICBleHBlY3QobW9ja1dlYnZpZXdQcm92aWRlci5ydW5Db21tYW5kKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnYWlEZWJ1ZycsIHsgcHJvamVjdDogJ215LWFwcCcgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlZ2lzdGVyIHJ1bkFpRGVidWcgY29tbWFuZCBhbmQgc2hvdyB3YXJuaW5nIHdoZW4gbm8gcHJvamVjdCBkZXRlY3RlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHZzY29kZSA9IHJlcXVpcmUoJ3ZzY29kZScpO1xuICAgICAgY29uc3QgcnVuQWlEZWJ1Z0NhbGwgPSB2c2NvZGUuY29tbWFuZHMucmVnaXN0ZXJDb21tYW5kLm1vY2suY2FsbHNcbiAgICAgICAgLmZpbmQoKGNhbGw6IGFueSkgPT4gY2FsbFswXSA9PT0gJ2FpRGVidWdVdGlsaXRpZXMucnVuQWlEZWJ1ZycpO1xuXG4gICAgICBtb2NrUHJvamVjdERldGVjdG9yLmdldEN1cnJlbnRQcm9qZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGlmIChydW5BaURlYnVnQ2FsbCAmJiBydW5BaURlYnVnQ2FsbFsxXSkge1xuICAgICAgICBhd2FpdCBydW5BaURlYnVnQ2FsbFsxXSgpO1xuXG4gICAgICAgIGV4cGVjdCh2c2NvZGUud2luZG93LnNob3dXYXJuaW5nTWVzc2FnZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgJ05vIE5YIHByb2plY3QgZGV0ZWN0ZWQuIFBsZWFzZSBzZWxlY3QgYSBwcm9qZWN0IGZpcnN0LidcbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KG1vY2tXZWJ2aWV3UHJvdmlkZXIucnVuQ29tbWFuZCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVnaXN0ZXIgcnVuTnhUZXN0IGNvbW1hbmQgd2l0aCBwcm9qZWN0IGRldGVjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHZzY29kZSA9IHJlcXVpcmUoJ3ZzY29kZScpO1xuICAgICAgY29uc3QgcnVuTnhUZXN0Q2FsbCA9IHZzY29kZS5jb21tYW5kcy5yZWdpc3RlckNvbW1hbmQubW9jay5jYWxsc1xuICAgICAgICAuZmluZCgoY2FsbDogYW55KSA9PiBjYWxsWzBdID09PSAnYWlEZWJ1Z1V0aWxpdGllcy5ydW5OeFRlc3QnKTtcblxuICAgICAgbW9ja1Byb2plY3REZXRlY3Rvci5nZXRDdXJyZW50UHJvamVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IFxuICAgICAgICBuYW1lOiAnbXktbGliJywgXG4gICAgICAgIHJvb3Q6ICdsaWJzL215LWxpYicsIFxuICAgICAgICBwcm9qZWN0VHlwZTogJ2xpYnJhcnknLFxuICAgICAgICB0eXBlOiAnbngnLFxuICAgICAgICBwYWNrYWdlSnNvblBhdGg6ICdsaWJzL215LWxpYi9wYWNrYWdlLmpzb24nXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJ1bk54VGVzdENhbGwgJiYgcnVuTnhUZXN0Q2FsbFsxXSkge1xuICAgICAgICBhd2FpdCBydW5OeFRlc3RDYWxsWzFdKCk7XG5cbiAgICAgICAgZXhwZWN0KG1vY2tQcm9qZWN0RGV0ZWN0b3IuZ2V0Q3VycmVudFByb2plY3QpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgICAgZXhwZWN0KG1vY2tXZWJ2aWV3UHJvdmlkZXIucnVuQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ254VGVzdCcsIHsgcHJvamVjdDogJ215LWxpYicgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlZ2lzdGVyIHJ1bk54VGVzdCBjb21tYW5kIGFuZCBzaG93IHdhcm5pbmcgd2hlbiBubyBwcm9qZWN0IGRldGVjdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdnNjb2RlID0gcmVxdWlyZSgndnNjb2RlJyk7XG4gICAgICBjb25zdCBydW5OeFRlc3RDYWxsID0gdnNjb2RlLmNvbW1hbmRzLnJlZ2lzdGVyQ29tbWFuZC5tb2NrLmNhbGxzXG4gICAgICAgIC5maW5kKChjYWxsOiBhbnkpID0+IGNhbGxbMF0gPT09ICdhaURlYnVnVXRpbGl0aWVzLnJ1bk54VGVzdCcpO1xuXG4gICAgICBtb2NrUHJvamVjdERldGVjdG9yLmdldEN1cnJlbnRQcm9qZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGlmIChydW5OeFRlc3RDYWxsICYmIHJ1bk54VGVzdENhbGxbMV0pIHtcbiAgICAgICAgYXdhaXQgcnVuTnhUZXN0Q2FsbFsxXSgpO1xuXG4gICAgICAgIGV4cGVjdCh2c2NvZGUud2luZG93LnNob3dXYXJuaW5nTWVzc2FnZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgJ05vIE5YIHByb2plY3QgZGV0ZWN0ZWQuIFBsZWFzZSBzZWxlY3QgYSBwcm9qZWN0IGZpcnN0LidcbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KG1vY2tXZWJ2aWV3UHJvdmlkZXIucnVuQ29tbWFuZCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVnaXN0ZXIgcnVuR2l0RGlmZiBjb21tYW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdnNjb2RlID0gcmVxdWlyZSgndnNjb2RlJyk7XG4gICAgICBjb25zdCBydW5HaXREaWZmQ2FsbCA9IHZzY29kZS5jb21tYW5kcy5yZWdpc3RlckNvbW1hbmQubW9jay5jYWxsc1xuICAgICAgICAuZmluZCgoY2FsbDogYW55KSA9PiBjYWxsWzBdID09PSAnYWlEZWJ1Z1V0aWxpdGllcy5ydW5HaXREaWZmJyk7XG5cbiAgICAgIGlmIChydW5HaXREaWZmQ2FsbCAmJiBydW5HaXREaWZmQ2FsbFsxXSkge1xuICAgICAgICBhd2FpdCBydW5HaXREaWZmQ2FsbFsxXSgpO1xuICAgICAgICBleHBlY3QobW9ja1dlYnZpZXdQcm92aWRlci5ydW5Db21tYW5kKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnZ2l0RGlmZicsIHt9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVnaXN0ZXIgcnVuUHJlcGFyZVRvUHVzaCBjb21tYW5kIHdpdGggcHJvamVjdCBkZXRlY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB2c2NvZGUgPSByZXF1aXJlKCd2c2NvZGUnKTtcbiAgICAgIGNvbnN0IHJ1blByZXBhcmVUb1B1c2hDYWxsID0gdnNjb2RlLmNvbW1hbmRzLnJlZ2lzdGVyQ29tbWFuZC5tb2NrLmNhbGxzXG4gICAgICAgIC5maW5kKChjYWxsOiBhbnkpID0+IGNhbGxbMF0gPT09ICdhaURlYnVnVXRpbGl0aWVzLnJ1blByZXBhcmVUb1B1c2gnKTtcblxuICAgICAgbW9ja1Byb2plY3REZXRlY3Rvci5nZXRDdXJyZW50UHJvamVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IFxuICAgICAgICBuYW1lOiAnbXktYXBwJywgXG4gICAgICAgIHJvb3Q6ICdhcHBzL215LWFwcCcsIFxuICAgICAgICBwcm9qZWN0VHlwZTogJ2FwcGxpY2F0aW9uJyxcbiAgICAgICAgdHlwZTogJ254JyxcbiAgICAgICAgcGFja2FnZUpzb25QYXRoOiAnYXBwcy9teS1hcHAvcGFja2FnZS5qc29uJ1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChydW5QcmVwYXJlVG9QdXNoQ2FsbCAmJiBydW5QcmVwYXJlVG9QdXNoQ2FsbFsxXSkge1xuICAgICAgICBhd2FpdCBydW5QcmVwYXJlVG9QdXNoQ2FsbFsxXSgpO1xuXG4gICAgICAgIGV4cGVjdChtb2NrUHJvamVjdERldGVjdG9yLmdldEN1cnJlbnRQcm9qZWN0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICAgIGV4cGVjdChtb2NrV2Vidmlld1Byb3ZpZGVyLnJ1bkNvbW1hbmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdwcmVwYXJlVG9QdXNoJywgeyBwcm9qZWN0OiAnbXktYXBwJyB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVnaXN0ZXIgcnVuUHJlcGFyZVRvUHVzaCBjb21tYW5kIGFuZCBzaG93IHdhcm5pbmcgd2hlbiBubyBwcm9qZWN0IGRldGVjdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdnNjb2RlID0gcmVxdWlyZSgndnNjb2RlJyk7XG4gICAgICBjb25zdCBydW5QcmVwYXJlVG9QdXNoQ2FsbCA9IHZzY29kZS5jb21tYW5kcy5yZWdpc3RlckNvbW1hbmQubW9jay5jYWxsc1xuICAgICAgICAuZmluZCgoY2FsbDogYW55KSA9PiBjYWxsWzBdID09PSAnYWlEZWJ1Z1V0aWxpdGllcy5ydW5QcmVwYXJlVG9QdXNoJyk7XG5cbiAgICAgIG1vY2tQcm9qZWN0RGV0ZWN0b3IuZ2V0Q3VycmVudFByb2plY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcblxuICAgICAgaWYgKHJ1blByZXBhcmVUb1B1c2hDYWxsICYmIHJ1blByZXBhcmVUb1B1c2hDYWxsWzFdKSB7XG4gICAgICAgIGF3YWl0IHJ1blByZXBhcmVUb1B1c2hDYWxsWzFdKCk7XG5cbiAgICAgICAgZXhwZWN0KHZzY29kZS53aW5kb3cuc2hvd1dhcm5pbmdNZXNzYWdlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAnTm8gTlggcHJvamVjdCBkZXRlY3RlZC4gUGxlYXNlIHNlbGVjdCBhIHByb2plY3QgZmlyc3QuJ1xuICAgICAgICApO1xuICAgICAgICBleHBlY3QobW9ja1dlYnZpZXdQcm92aWRlci5ydW5Db21tYW5kKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZXJyb3IgaGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgd29ya3NwYWNlIGRldGVjdGlvbiBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHZzY29kZSA9IHJlcXVpcmUoJ3ZzY29kZScpO1xuICAgICAgXG4gICAgICBtb2NrUHJvamVjdERldGVjdG9yLmZpbmROeFdvcmtzcGFjZS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1dvcmtzcGFjZSBkZXRlY3Rpb24gZmFpbGVkJykpO1xuXG4gICAgICBhd2FpdCBhY3RpdmF0ZShtb2NrQ29udGV4dCk7XG4gICAgICBcbiAgICAgIC8vIFRoZSBleHRlbnNpb24gc2hvdWxkIHNldCBjb250ZXh0IHRvIGZhbHNlIHdoZW4gd29ya3NwYWNlIGRldGVjdGlvbiBmYWlsc1xuICAgICAgZXhwZWN0KHZzY29kZS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3NldENvbnRleHQnLCAnd29ya3NwYWNlSGFzTnhQcm9qZWN0JywgZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29tbWFuZCByZWdpc3RyYXRpb24gZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB2c2NvZGUgPSByZXF1aXJlKCd2c2NvZGUnKTtcbiAgICAgIFxuICAgICAgbW9ja1Byb2plY3REZXRlY3Rvci5maW5kTnhXb3Jrc3BhY2UubW9ja1Jlc29sdmVkVmFsdWUoJy93b3Jrc3BhY2UvbnguanNvbicpO1xuICAgICAgdnNjb2RlLmNvbW1hbmRzLnJlZ2lzdGVyQ29tbWFuZC5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbW1hbmQgcmVnaXN0cmF0aW9uIGZhaWxlZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGFjdGl2YXRlKG1vY2tDb250ZXh0KTtcbiAgICAgIFxuICAgICAgLy8gVGhlIGV4dGVuc2lvbiBzaG91bGQgc2V0IGNvbnRleHQgdG8gZmFsc2Ugd2hlbiBjb21tYW5kIHJlZ2lzdHJhdGlvbiBmYWlsc1xuICAgICAgZXhwZWN0KHZzY29kZS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3NldENvbnRleHQnLCAnd29ya3NwYWNlSGFzTnhQcm9qZWN0JywgZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZGVhY3RpdmF0ZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRlYWN0aXZhdGUgZXh0ZW5zaW9uIGNsZWFubHknLCAoKSA9PiB7XG4gICAgICAvLyBTaG91bGQgbm90IHRocm93XG4gICAgICBleHBlY3QoKCkgPT4gZGVhY3RpdmF0ZSgpKS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnaW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgYWxsIG5lY2Vzc2FyeSBpbnN0YW5jZXMgd2l0aCBjb3JyZWN0IGRlcGVuZGVuY2llcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENsZWFyIHByZXZpb3VzIG1vY2sgY2FsbHNcbiAgICAgIE1vY2tlZFByb2plY3REZXRlY3Rvci5tb2NrQ2xlYXIoKTtcbiAgICAgIE1vY2tlZENvbW1hbmRSdW5uZXIubW9ja0NsZWFyKCk7XG4gICAgICBNb2NrZWRGaWxlTWFuYWdlci5tb2NrQ2xlYXIoKTtcbiAgICAgIE1vY2tlZFdlYnZpZXdQcm92aWRlci5tb2NrQ2xlYXIoKTtcbiAgICAgIFxuICAgICAgbW9ja1Byb2plY3REZXRlY3Rvci5maW5kTnhXb3Jrc3BhY2UubW9ja1Jlc29sdmVkVmFsdWUoJy93b3Jrc3BhY2UvbnguanNvbicpO1xuICAgICAgXG4gICAgICBhd2FpdCBhY3RpdmF0ZShtb2NrQ29udGV4dCk7XG5cbiAgICAgIGV4cGVjdChNb2NrZWRQcm9qZWN0RGV0ZWN0b3IpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgIGV4cGVjdChNb2NrZWRDb21tYW5kUnVubmVyKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICBleHBlY3QoTW9ja2VkRmlsZU1hbmFnZXIpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgIGV4cGVjdChNb2NrZWRXZWJ2aWV3UHJvdmlkZXIpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgbW9ja0NvbnRleHQuZXh0ZW5zaW9uVXJpLFxuICAgICAgbW9ja1Byb2plY3REZXRlY3RvcixcbiAgICAgIG1vY2tDb21tYW5kUnVubmVyLFxuICAgICAgbW9ja0ZpbGVNYW5hZ2VyLFxuICAgICAgZXhwZWN0LmFueXRoaW5nKCkgLy8gc3RhdHVzVHJhY2tlclxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJvcGVybHkgZGlzcG9zZSBvZiByZXNvdXJjZXMgdGhyb3VnaCBjb250ZXh0IHN1YnNjcmlwdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBtb2NrUHJvamVjdERldGVjdG9yLmZpbmROeFdvcmtzcGFjZS5tb2NrUmVzb2x2ZWRWYWx1ZSgnL3dvcmtzcGFjZS9ueC5qc29uJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGF3YWl0IGFjdGl2YXRlKG1vY2tDb250ZXh0KTtcblxuICAgICAgICAgICAgZXhwZWN0KG1vY2tDb250ZXh0LnN1YnNjcmlwdGlvbnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFsbCBzdWJzY3JpcHRpb25zIHNob3VsZCBiZSBkaXNwb3NhYmxlIG9iamVjdHNcbiAgICAgICAgICAgIG1vY2tDb250ZXh0LnN1YnNjcmlwdGlvbnMuZm9yRWFjaChzdWJzY3JpcHRpb24gPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGV4cGVjdChzdWJzY3JpcHRpb24pLnRvSGF2ZVByb3BlcnR5KCdkaXNwb3NlJyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==