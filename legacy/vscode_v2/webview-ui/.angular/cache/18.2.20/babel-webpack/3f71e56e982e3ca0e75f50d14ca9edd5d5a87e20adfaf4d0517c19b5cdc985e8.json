{"ast":null,"code":"import _asyncToGenerator from \"/Users/gregdunn/src/test/ai_debug_context/vscode_2/webview-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { CopilotDiagnosticsComponent } from '../../components/copilot-diagnostics/copilot-diagnostics.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/vscode.service\";\nconst _forTrack0 = ($index, $item) => $item.key;\nconst _forTrack1 = ($index, $item) => $item.name;\nfunction AIDebugComponent_Conditional_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" (\", ctx_r0.fileSelection.mode, \": \", ctx_r0.getFileSelectionSummary(), \") \");\n  }\n}\nfunction AIDebugComponent_Conditional_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" (\", ctx_r0.testConfiguration.mode, \": \", ctx_r0.getTestConfigSummary(), \") \");\n  }\n}\nfunction AIDebugComponent_Conditional_31_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function AIDebugComponent_Conditional_31_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.showDiagnostics = !ctx_r0.showDiagnostics);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.showDiagnostics ? \"Hide\" : \"Diagnose\", \" \");\n  }\n}\nfunction AIDebugComponent_Conditional_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵelement(1, \"app-copilot-diagnostics\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AIDebugComponent_Conditional_33_Conditional_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 17);\n    i0.ɵɵtext(1, \" Complete file selection and test configuration to continue \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AIDebugComponent_Conditional_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function AIDebugComponent_Conditional_33_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.startAIDebugWorkflow());\n    });\n    i0.ɵɵelementStart(2, \"span\", 16)(3, \"span\", 3);\n    i0.ɵɵtext(4, \"\\uD83D\\uDE80\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6, \"Run AI Test Debug\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(7, AIDebugComponent_Conditional_33_Conditional_7_Template, 2, 0, \"p\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.canStartWorkflow());\n    i0.ɵɵadvance(6);\n    i0.ɵɵconditional(!ctx_r0.canStartWorkflow() ? 7 : -1);\n  }\n}\nfunction AIDebugComponent_Conditional_34_For_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const phase_r4 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMap(ctx_r0.getPhaseIndicatorClass(phase_r4.key));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(phase_r4.icon);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(phase_r4.label);\n  }\n}\nfunction AIDebugComponent_Conditional_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 18)(2, \"div\", 19)(3, \"span\", 20);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 10);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 21);\n    i0.ɵɵelement(8, \"div\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\", 23);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 24);\n    i0.ɵɵrepeaterCreate(12, AIDebugComponent_Conditional_34_For_13_Template, 5, 4, \"div\", 25, _forTrack0);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getPhaseDisplayName(), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.workflowState().progress, \"% \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"width\", ctx_r0.workflowState().progress, \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.workflowState().message, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵrepeater(ctx_r0.workflowPhases);\n  }\n}\nfunction AIDebugComponent_Conditional_35_Conditional_19_For_2_Conditional_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 44);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const test_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(test_r5.error);\n  }\n}\nfunction AIDebugComponent_Conditional_35_Conditional_19_For_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39)(1, \"div\", 40)(2, \"div\", 41)(3, \"div\", 42);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 43);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, AIDebugComponent_Conditional_35_Conditional_19_For_2_Conditional_7_Template, 2, 1, \"div\", 44);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 45);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const test_r5 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(test_r5.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(test_r5.file);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(test_r5.error ? 7 : -1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", test_r5.duration, \"ms\");\n  }\n}\nfunction AIDebugComponent_Conditional_35_Conditional_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 38);\n    i0.ɵɵrepeaterCreate(1, AIDebugComponent_Conditional_35_Conditional_19_For_2_Template, 10, 4, \"div\", 39, _forTrack1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵrepeater(ctx_r0.getFailedTests());\n  }\n}\nfunction AIDebugComponent_Conditional_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"h4\", 27);\n    i0.ɵɵtext(2, \"Test Results\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 28)(4, \"div\", 29)(5, \"div\", 30);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 31);\n    i0.ɵɵtext(8, \"Passed\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 32)(10, \"div\", 33);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 34);\n    i0.ɵɵtext(13, \"Failed\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 35)(15, \"div\", 36);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 37);\n    i0.ɵɵtext(18, \"Skipped\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(19, AIDebugComponent_Conditional_35_Conditional_19_Template, 3, 0, \"div\", 38);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r0.getPassedTestsCount());\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.getFailedTestsCount());\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.getSkippedTestsCount());\n    i0.ɵɵadvance(3);\n    i0.ɵɵconditional(ctx_r0.getFailedTests().length > 0 ? 19 : -1);\n  }\n}\nfunction AIDebugComponent_Conditional_36_Conditional_3_Conditional_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 48)(1, \"h5\", 50);\n    i0.ɵɵtext(2, \"\\uD83D\\uDD0D Root Cause Analysis\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 51);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.workflowState().aiAnalysis.rootCause, \" \");\n  }\n}\nfunction AIDebugComponent_Conditional_36_Conditional_3_Conditional_2_For_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 53)(1, \"span\", 54);\n    i0.ɵɵtext(2, \"\\u2022\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const fix_r6 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(fix_r6);\n  }\n}\nfunction AIDebugComponent_Conditional_36_Conditional_3_Conditional_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 49)(1, \"h5\", 50);\n    i0.ɵɵtext(2, \"\\uD83D\\uDD27 Suggested Fixes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\", 52);\n    i0.ɵɵrepeaterCreate(4, AIDebugComponent_Conditional_36_Conditional_3_Conditional_2_For_5_Template, 5, 1, \"li\", 53, i0.ɵɵrepeaterTrackByIdentity);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵrepeater(ctx_r0.workflowState().aiAnalysis.suggestedFixes);\n  }\n}\nfunction AIDebugComponent_Conditional_36_Conditional_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 46);\n    i0.ɵɵtemplate(1, AIDebugComponent_Conditional_36_Conditional_3_Conditional_1_Template, 5, 1, \"div\", 48)(2, AIDebugComponent_Conditional_36_Conditional_3_Conditional_2_Template, 6, 0, \"div\", 49);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(ctx_r0.workflowState().aiAnalysis.rootCause ? 1 : -1);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(ctx_r0.workflowState().aiAnalysis.suggestedFixes && ctx_r0.workflowState().aiAnalysis.suggestedFixes.length > 0 ? 2 : -1);\n  }\n}\nfunction AIDebugComponent_Conditional_36_Conditional_4_Conditional_1_For_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 53)(1, \"span\", 57);\n    i0.ɵɵtext(2, \"\\u2022\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const warning_r7 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(warning_r7);\n  }\n}\nfunction AIDebugComponent_Conditional_36_Conditional_4_Conditional_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 55)(1, \"h5\", 50);\n    i0.ɵɵtext(2, \"\\u26A0\\uFE0F Potential False Positives\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\", 52);\n    i0.ɵɵrepeaterCreate(4, AIDebugComponent_Conditional_36_Conditional_4_Conditional_1_For_5_Template, 5, 1, \"li\", 53, i0.ɵɵrepeaterTrackByIdentity);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵrepeater(ctx_r0.workflowState().aiAnalysis.falsePositiveWarnings);\n  }\n}\nfunction AIDebugComponent_Conditional_36_Conditional_4_Conditional_2_For_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 53)(1, \"span\", 58);\n    i0.ɵɵtext(2, \"\\u2022\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const improvement_r8 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(improvement_r8);\n  }\n}\nfunction AIDebugComponent_Conditional_36_Conditional_4_Conditional_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 56)(1, \"h5\", 50);\n    i0.ɵɵtext(2, \"\\uD83D\\uDCA1 Code Improvements\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\", 52);\n    i0.ɵɵrepeaterCreate(4, AIDebugComponent_Conditional_36_Conditional_4_Conditional_2_For_5_Template, 5, 1, \"li\", 53, i0.ɵɵrepeaterTrackByIdentity);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵrepeater(ctx_r0.workflowState().aiAnalysis.codeImprovements);\n  }\n}\nfunction AIDebugComponent_Conditional_36_Conditional_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 46);\n    i0.ɵɵtemplate(1, AIDebugComponent_Conditional_36_Conditional_4_Conditional_1_Template, 6, 0, \"div\", 55)(2, AIDebugComponent_Conditional_36_Conditional_4_Conditional_2_Template, 6, 0, \"div\", 56);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(ctx_r0.workflowState().aiAnalysis.falsePositiveWarnings && ctx_r0.workflowState().aiAnalysis.falsePositiveWarnings.length > 0 ? 1 : -1);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(ctx_r0.workflowState().aiAnalysis.codeImprovements && ctx_r0.workflowState().aiAnalysis.codeImprovements.length > 0 ? 2 : -1);\n  }\n}\nfunction AIDebugComponent_Conditional_36_Conditional_5_For_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 53)(1, \"span\", 59);\n    i0.ɵɵtext(2, \"\\u2022\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const suggestion_r9 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(suggestion_r9);\n  }\n}\nfunction AIDebugComponent_Conditional_36_Conditional_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 47)(1, \"h5\", 50);\n    i0.ɵɵtext(2, \"\\uD83E\\uDDEA New Test Suggestions\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\", 52);\n    i0.ɵɵrepeaterCreate(4, AIDebugComponent_Conditional_36_Conditional_5_For_5_Template, 5, 1, \"li\", 53, i0.ɵɵrepeaterTrackByIdentity);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵrepeater(ctx_r0.workflowState().aiAnalysis.newTestSuggestions);\n  }\n}\nfunction AIDebugComponent_Conditional_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"h4\", 27);\n    i0.ɵɵtext(2, \"AI Analysis\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, AIDebugComponent_Conditional_36_Conditional_3_Template, 3, 2, \"div\", 46)(4, AIDebugComponent_Conditional_36_Conditional_4_Template, 3, 2, \"div\", 46)(5, AIDebugComponent_Conditional_36_Conditional_5_Template, 6, 0, \"div\", 47);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵconditional(ctx_r0.workflowState().aiAnalysis.type === \"failure-analysis\" ? 3 : 4);\n    i0.ɵɵadvance(2);\n    i0.ɵɵconditional(ctx_r0.workflowState().aiAnalysis.newTestSuggestions && ctx_r0.workflowState().aiAnalysis.newTestSuggestions.length > 0 ? 5 : -1);\n  }\n}\nfunction AIDebugComponent_Conditional_37_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 60)(2, \"h4\", 61);\n    i0.ɵɵtext(3, \"\\u274C Error Occurred\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 34);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 62);\n    i0.ɵɵlistener(\"click\", function AIDebugComponent_Conditional_37_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.resetWorkflow());\n    });\n    i0.ɵɵtext(7, \" Try Again \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.workflowState().error || \"An unexpected error occurred during the AI debug workflow.\", \" \");\n  }\n}\nfunction AIDebugComponent_Conditional_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 63)(2, \"h4\", 64);\n    i0.ɵɵtext(3, \"\\u2705 Analysis Complete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 65);\n    i0.ɵɵtext(5, \" AI debug workflow completed successfully. Review the analysis above. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 66)(7, \"button\", 67);\n    i0.ɵɵlistener(\"click\", function AIDebugComponent_Conditional_38_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.openContextFile());\n    });\n    i0.ɵɵtext(8, \" \\uD83D\\uDCC2 Open Context File \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 68);\n    i0.ɵɵlistener(\"click\", function AIDebugComponent_Conditional_38_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.resetWorkflow());\n    });\n    i0.ɵɵtext(10, \" \\uD83D\\uDD04 New Analysis \");\n    i0.ɵɵelementEnd()()()();\n  }\n}\nexport let AIDebugComponent = /*#__PURE__*/(() => {\n  class AIDebugComponent {\n    constructor(vscode) {\n      this.vscode = vscode;\n      this.fileSelection = null;\n      this.testConfiguration = null;\n      this.workflowComplete = new EventEmitter();\n      this.workflowState = signal({\n        phase: 'idle',\n        progress: 0,\n        message: 'Ready to start AI debug workflow'\n      });\n      this.copilotAvailable = signal(false);\n      this.showDiagnostics = false;\n      this.workflowPhases = [{\n        key: 'collecting-context',\n        label: 'Context',\n        icon: '📁'\n      }, {\n        key: 'running-tests',\n        label: 'Tests',\n        icon: '🧪'\n      }, {\n        key: 'analyzing-results',\n        label: 'Analysis',\n        icon: '🤖'\n      }, {\n        key: 'generating-report',\n        label: 'Report',\n        icon: '📄'\n      }];\n    }\n    ngOnInit() {\n      this.checkCopilotAvailability();\n      this.setupMessageHandlers();\n    }\n    setupMessageHandlers() {\n      // Listen for messages from the backend\n      this.vscode.onMessage().subscribe(message => {\n        if (!message) return;\n        switch (message.command) {\n          case 'copilotAvailability':\n            console.log('Received Copilot availability:', message.data);\n            this.copilotAvailable.set(message.data?.available || false);\n            break;\n          case 'copilotDiagnosticsComplete':\n            console.log('Received Copilot diagnostics:', message.data);\n            // Update availability based on diagnostic results - use same logic as CopilotDiagnosticsComponent\n            if (message.data?.modelsAvailable > 0) {\n              this.copilotAvailable.set(true);\n              console.log('Copilot is available: models found =', message.data.modelsAvailable);\n            } else {\n              this.copilotAvailable.set(false);\n              console.log('Copilot not available: models found =', message.data?.modelsAvailable || 0);\n            }\n            break;\n          case 'workflowStateUpdate':\n            // Handle workflow state updates from backend\n            this.handleWorkflowStateUpdate(message.data);\n            break;\n          case 'aiAnalysisComplete':\n            // Handled in performAIAnalysis method\n            break;\n          case 'testResults':\n            // Handled in runTests method\n            break;\n          case 'workflowError':\n            // Handle errors\n            console.error('Workflow error:', message.data?.error);\n            this.updateWorkflowState({\n              phase: 'error',\n              progress: 0,\n              message: 'Error occurred during workflow',\n              error: message.data?.error || 'Unknown error'\n            });\n            break;\n          case 'workflowComplete':\n            // Handle completion of AI debug workflow\n            this.handleAIDebugComplete(message.data);\n            break;\n        }\n      });\n    }\n    handleWorkflowStateUpdate(data) {\n      // Update local workflow state based on backend updates\n      if (data.step && data.progress !== undefined) {\n        this.updateWorkflowState({\n          phase: this.mapBackendStepToPhase(data.step),\n          progress: data.progress,\n          message: data.message\n        });\n      }\n    }\n    handleAIDebugComplete(data) {\n      // Update workflow state to complete\n      this.updateWorkflowState({\n        phase: 'complete',\n        progress: 100,\n        message: 'AI debug workflow completed successfully'\n      });\n      // If we have analysis results, emit workflow complete event\n      if (data?.analysis) {\n        const aiAnalysis = {\n          type: data.analysis.type || 'failure-analysis',\n          rootCause: data.analysis.rootCause,\n          suggestedFixes: data.analysis.suggestedFixes,\n          newTestSuggestions: data.analysis.newTestSuggestions,\n          falsePositiveWarnings: data.analysis.falsePositiveWarnings,\n          codeImprovements: data.analysis.codeImprovements\n        };\n        this.workflowComplete.emit({\n          testResults: data.testResults || [],\n          aiAnalysis\n        });\n      }\n    }\n    mapBackendStepToPhase(step) {\n      switch (step) {\n        case 'collecting-context':\n        case 'generating-context':\n          return 'collecting-context';\n        case 'running-tests':\n          return 'running-tests';\n        case 'analyzing-with-ai':\n          return 'analyzing-results';\n        case 'generating-pr':\n        case 'saving-context':\n          return 'generating-report';\n        case 'complete':\n          return 'complete';\n        case 'error':\n          return 'error';\n        default:\n          return 'idle';\n      }\n    }\n    canStartWorkflow() {\n      return !!(this.fileSelection && this.testConfiguration);\n    }\n    getStatusSummary() {\n      const state = this.workflowState();\n      switch (state.phase) {\n        case 'idle':\n          return 'Ready to start';\n        case 'complete':\n          return 'Analysis complete';\n        case 'error':\n          return 'Error occurred';\n        default:\n          return `${state.progress}% complete`;\n      }\n    }\n    getFileSelectionSummary() {\n      if (!this.fileSelection) return '';\n      switch (this.fileSelection.mode) {\n        case 'uncommitted':\n          return `${this.fileSelection.files.length} files`;\n        case 'commit':\n          const selectedCommits = this.fileSelection.commits;\n          if (selectedCommits && selectedCommits.length > 0) {\n            if (selectedCommits.length === 1) {\n              return selectedCommits[0].hash.substring(0, 7);\n            } else {\n              return `${selectedCommits.length} commits`;\n            }\n          }\n          return 'No commits';\n        case 'branch-diff':\n          return 'Branch to main';\n        default:\n          return '';\n      }\n    }\n    getTestConfigSummary() {\n      if (!this.testConfiguration) return '';\n      if (this.testConfiguration.mode === 'affected') {\n        return 'Affected tests';\n      } else {\n        return this.testConfiguration.project || 'No project';\n      }\n    }\n    getPhaseDisplayName() {\n      const state = this.workflowState();\n      switch (state.phase) {\n        case 'collecting-context':\n          return 'Collecting Context';\n        case 'running-tests':\n          return 'Running Tests';\n        case 'analyzing-results':\n          return 'Analyzing with AI';\n        case 'generating-report':\n          return 'Generating Report';\n        default:\n          return 'Processing';\n      }\n    }\n    getPhaseIndicatorClass(phaseKey) {\n      const currentPhase = this.workflowState().phase;\n      const phases = ['collecting-context', 'running-tests', 'analyzing-results', 'generating-report'];\n      const currentIndex = phases.indexOf(currentPhase);\n      const phaseIndex = phases.indexOf(phaseKey);\n      if (phaseIndex < currentIndex) {\n        return 'bg-green-100 text-green-800 border border-green-200';\n      } else if (phaseIndex === currentIndex) {\n        return 'bg-blue-100 text-blue-800 border border-blue-200';\n      } else {\n        return 'bg-gray-100 text-gray-600 border border-gray-200';\n      }\n    }\n    getPassedTestsCount() {\n      return this.workflowState().testResults?.filter(t => t.status === 'passed').length || 0;\n    }\n    getFailedTestsCount() {\n      return this.workflowState().testResults?.filter(t => t.status === 'failed').length || 0;\n    }\n    getSkippedTestsCount() {\n      return this.workflowState().testResults?.filter(t => t.status === 'skipped').length || 0;\n    }\n    getFailedTests() {\n      return this.workflowState().testResults?.filter(t => t.status === 'failed') || [];\n    }\n    startAIDebugWorkflow() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (!_this.canStartWorkflow()) return;\n        try {\n          // Initialize workflow state\n          _this.updateWorkflowState({\n            phase: 'collecting-context',\n            progress: 10,\n            message: 'Starting AI Test Debug workflow...'\n          });\n          // Send request to backend to run the real AI Test Debug workflow\n          _this.vscode.postMessage('runFullWorkflow', {\n            fileSelection: _this.fileSelection,\n            testConfiguration: _this.testConfiguration\n          });\n        } catch (error) {\n          _this.updateWorkflowState({\n            phase: 'error',\n            progress: 0,\n            message: 'Error occurred during workflow',\n            error: error instanceof Error ? error.message : 'Unknown error'\n          });\n        }\n      })();\n    }\n    resetWorkflow() {\n      this.workflowState.set({\n        phase: 'idle',\n        progress: 0,\n        message: 'Ready to start AI debug workflow'\n      });\n    }\n    openContextFile() {\n      // Send message to backend to open the context file in VSCode editor\n      this.vscode.postMessage('openContextFile', {});\n    }\n    updateWorkflowState(updates) {\n      this.workflowState.update(current => ({\n        ...current,\n        ...updates\n      }));\n    }\n    checkCopilotAvailability() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          // Request real Copilot availability check from backend\n          _this2.vscode.postMessage('checkCopilotAvailability', {});\n          // Also get diagnostic information for better troubleshooting\n          _this2.vscode.postMessage('runCopilotDiagnostics', {});\n          // Add a small delay then request diagnostics again to ensure we get the latest status\n          setTimeout(() => {\n            _this2.vscode.postMessage('runCopilotDiagnostics', {});\n          }, 1000);\n        } catch (error) {\n          console.error('Failed to check Copilot availability:', error);\n          _this2.copilotAvailable.set(false);\n        }\n      })();\n    }\n    static {\n      this.ɵfac = function AIDebugComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || AIDebugComponent)(i0.ɵɵdirectiveInject(i1.VscodeService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AIDebugComponent,\n        selectors: [[\"app-ai-debug\"]],\n        inputs: {\n          fileSelection: \"fileSelection\",\n          testConfiguration: \"testConfiguration\"\n        },\n        outputs: {\n          workflowComplete: \"workflowComplete\"\n        },\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 39,\n        vars: 21,\n        consts: [[1, \"bg-vscode-editor-background\", \"p-4\", \"rounded-lg\", \"border\", \"border-vscode-panel-border\"], [1, \"flex\", \"items-center\", \"justify-between\", \"mb-6\"], [1, \"text-vscode-foreground\", \"text-lg\", \"font-semibold\", \"flex\", \"items-center\", \"gap-2\"], [1, \"text-2xl\"], [1, \"text-vscode-descriptionForeground\", \"text-sm\"], [1, \"mb-6\", \"space-y-3\"], [1, \"text-vscode-foreground\", \"font-medium\"], [1, \"grid\", \"gap-2\"], [1, \"flex\", \"items-center\", \"gap-2\", \"text-sm\"], [1, \"text-vscode-foreground\"], [1, \"text-vscode-descriptionForeground\", \"text-xs\"], [1, \"ml-2\", \"px-2\", \"py-1\", \"text-xs\", \"bg-vscode-button-secondaryBackground\", \"text-vscode-button-secondaryForeground\", \"rounded\", \"hover:bg-vscode-button-secondaryHoverBackground\"], [1, \"mb-6\"], [1, \"mb-6\", \"text-center\"], [1, \"ml-2\", \"px-2\", \"py-1\", \"text-xs\", \"bg-vscode-button-secondaryBackground\", \"text-vscode-button-secondaryForeground\", \"rounded\", \"hover:bg-vscode-button-secondaryHoverBackground\", 3, \"click\"], [1, \"px-8\", \"py-4\", \"bg-vscode-button-background\", \"text-vscode-button-foreground\", \"rounded-lg\", \"font-medium\", \"text-lg\", \"hover:bg-vscode-button-hoverBackground\", \"disabled:opacity-50\", \"disabled:cursor-not-allowed\", \"transition-all\", \"duration-200\", 3, \"click\", \"disabled\"], [1, \"flex\", \"items-center\", \"gap-3\"], [1, \"text-vscode-descriptionForeground\", \"text-sm\", \"mt-2\"], [1, \"mb-4\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mb-2\"], [1, \"text-vscode-foreground\", \"text-sm\", \"font-medium\"], [1, \"w-full\", \"bg-vscode-progressBar-background\", \"rounded-full\", \"h-2\"], [1, \"bg-vscode-progressBar-foreground\", \"h-2\", \"rounded-full\", \"transition-all\", \"duration-300\"], [1, \"text-vscode-descriptionForeground\", \"text-xs\", \"mt-2\"], [1, \"grid\", \"grid-cols-2\", \"md:grid-cols-4\", \"gap-2\", \"text-xs\"], [1, \"flex\", \"items-center\", \"gap-2\", \"p-2\", \"rounded\", 3, \"class\"], [1, \"flex\", \"items-center\", \"gap-2\", \"p-2\", \"rounded\"], [1, \"text-vscode-foreground\", \"font-medium\", \"mb-3\"], [1, \"grid\", \"grid-cols-3\", \"gap-4\", \"mb-4\"], [1, \"bg-green-50\", \"border\", \"border-green-200\", \"rounded\", \"p-3\", \"text-center\"], [1, \"text-green-600\", \"text-xl\", \"font-bold\"], [1, \"text-green-700\", \"text-sm\"], [1, \"bg-red-50\", \"border\", \"border-red-200\", \"rounded\", \"p-3\", \"text-center\"], [1, \"text-red-600\", \"text-xl\", \"font-bold\"], [1, \"text-red-700\", \"text-sm\"], [1, \"bg-yellow-50\", \"border\", \"border-yellow-200\", \"rounded\", \"p-3\", \"text-center\"], [1, \"text-yellow-600\", \"text-xl\", \"font-bold\"], [1, \"text-yellow-700\", \"text-sm\"], [1, \"space-y-2\", \"max-h-64\", \"overflow-y-auto\", \"border\", \"border-vscode-panel-border\", \"rounded\", \"p-2\"], [1, \"bg-red-50\", \"border\", \"border-red-200\", \"rounded\", \"p-3\"], [1, \"flex\", \"items-start\", \"justify-between\"], [1, \"flex-1\"], [1, \"font-medium\", \"text-red-800\"], [1, \"text-red-600\", \"text-sm\", \"font-mono\"], [1, \"text-red-700\", \"text-sm\", \"mt-2\"], [1, \"text-red-500\", \"text-xs\"], [1, \"space-y-4\"], [1, \"bg-vscode-textBlockQuote-background\", \"border-l-4\", \"border-purple-400\", \"p-4\", \"rounded\"], [1, \"bg-vscode-textBlockQuote-background\", \"border-l-4\", \"border-red-400\", \"p-4\", \"rounded\"], [1, \"bg-vscode-textBlockQuote-background\", \"border-l-4\", \"border-blue-400\", \"p-4\", \"rounded\"], [1, \"text-vscode-foreground\", \"font-medium\", \"mb-2\"], [1, \"text-vscode-textBlockQuote-foreground\", \"text-sm\"], [1, \"space-y-2\"], [1, \"text-vscode-textBlockQuote-foreground\", \"text-sm\", \"flex\", \"items-start\", \"gap-2\"], [1, \"text-blue-500\", \"mt-1\"], [1, \"bg-vscode-textBlockQuote-background\", \"border-l-4\", \"border-yellow-400\", \"p-4\", \"rounded\"], [1, \"bg-vscode-textBlockQuote-background\", \"border-l-4\", \"border-green-400\", \"p-4\", \"rounded\"], [1, \"text-yellow-500\", \"mt-1\"], [1, \"text-green-500\", \"mt-1\"], [1, \"text-purple-500\", \"mt-1\"], [1, \"bg-red-50\", \"border\", \"border-red-200\", \"rounded\", \"p-4\"], [1, \"text-red-800\", \"font-medium\", \"mb-2\"], [1, \"mt-3\", \"px-4\", \"py-2\", \"bg-red-600\", \"text-white\", \"rounded\", \"text-sm\", \"hover:bg-red-700\", 3, \"click\"], [1, \"bg-green-50\", \"border\", \"border-green-200\", \"rounded\", \"p-4\", \"text-center\"], [1, \"text-green-800\", \"font-medium\", \"mb-2\"], [1, \"text-green-700\", \"text-sm\", \"mb-4\"], [1, \"flex\", \"gap-3\", \"justify-center\"], [1, \"px-4\", \"py-2\", \"bg-green-600\", \"text-white\", \"rounded\", \"text-sm\", \"hover:bg-green-700\", 3, \"click\"], [1, \"px-4\", \"py-2\", \"bg-vscode-button-secondaryBackground\", \"text-vscode-button-secondaryForeground\", \"rounded\", \"text-sm\", \"hover:bg-vscode-button-secondaryHoverBackground\", 3, \"click\"]],\n        template: function AIDebugComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\", 2)(3, \"span\", 3);\n            i0.ɵɵtext(4, \"\\uD83E\\uDD16\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(5, \" AI Test Debug \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"div\", 4);\n            i0.ɵɵtext(7);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(8, \"div\", 5)(9, \"h4\", 6);\n            i0.ɵɵtext(10, \"Prerequisites\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"div\", 7)(12, \"div\", 8)(13, \"span\");\n            i0.ɵɵtext(14);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"span\", 9);\n            i0.ɵɵtext(16, \"File selection configured\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(17, AIDebugComponent_Conditional_17_Template, 2, 2, \"span\", 10);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"div\", 8)(19, \"span\");\n            i0.ɵɵtext(20);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(21, \"span\", 9);\n            i0.ɵɵtext(22, \"Test configuration set\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(23, AIDebugComponent_Conditional_23_Template, 2, 2, \"span\", 10);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(24, \"div\", 8)(25, \"span\");\n            i0.ɵɵtext(26);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"span\", 9);\n            i0.ɵɵtext(28, \"GitHub Copilot\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(29, \"span\", 10);\n            i0.ɵɵtext(30);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(31, AIDebugComponent_Conditional_31_Template, 2, 1, \"button\", 11);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(32, AIDebugComponent_Conditional_32_Template, 2, 0, \"div\", 12)(33, AIDebugComponent_Conditional_33_Template, 8, 2, \"div\", 13)(34, AIDebugComponent_Conditional_34_Template, 14, 5, \"div\", 12)(35, AIDebugComponent_Conditional_35_Template, 20, 4, \"div\", 12)(36, AIDebugComponent_Conditional_36_Template, 6, 2, \"div\", 12)(37, AIDebugComponent_Conditional_37_Template, 8, 1, \"div\", 12)(38, AIDebugComponent_Conditional_38_Template, 11, 0, \"div\", 12);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵtextInterpolate1(\" \", ctx.getStatusSummary(), \" \");\n            i0.ɵɵadvance(6);\n            i0.ɵɵclassMap(ctx.fileSelection ? \"text-green-500\" : \"text-red-500\");\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.fileSelection ? \"\\u2705\" : \"\\u274C\", \" \");\n            i0.ɵɵadvance(3);\n            i0.ɵɵconditional(ctx.fileSelection ? 17 : -1);\n            i0.ɵɵadvance(2);\n            i0.ɵɵclassMap(ctx.testConfiguration ? \"text-green-500\" : \"text-red-500\");\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.testConfiguration ? \"\\u2705\" : \"\\u274C\", \" \");\n            i0.ɵɵadvance(3);\n            i0.ɵɵconditional(ctx.testConfiguration ? 23 : -1);\n            i0.ɵɵadvance(2);\n            i0.ɵɵclassMap(ctx.copilotAvailable() ? \"text-green-500\" : \"text-yellow-500\");\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.copilotAvailable() ? \"\\u2705\" : \"\\u26A0\\uFE0F\", \" \");\n            i0.ɵɵadvance(4);\n            i0.ɵɵtextInterpolate1(\" \", ctx.copilotAvailable() ? \"Available\" : \"Not available - will use fallback analysis\", \" \");\n            i0.ɵɵadvance();\n            i0.ɵɵconditional(!ctx.copilotAvailable() ? 31 : -1);\n            i0.ɵɵadvance();\n            i0.ɵɵconditional(ctx.showDiagnostics && !ctx.copilotAvailable() ? 32 : -1);\n            i0.ɵɵadvance();\n            i0.ɵɵconditional(ctx.workflowState().phase === \"idle\" ? 33 : -1);\n            i0.ɵɵadvance();\n            i0.ɵɵconditional(ctx.workflowState().phase !== \"idle\" ? 34 : -1);\n            i0.ɵɵadvance();\n            i0.ɵɵconditional(ctx.workflowState().testResults && ctx.workflowState().testResults.length > 0 ? 35 : -1);\n            i0.ɵɵadvance();\n            i0.ɵɵconditional(ctx.workflowState().aiAnalysis ? 36 : -1);\n            i0.ɵɵadvance();\n            i0.ɵɵconditional(ctx.workflowState().phase === \"error\" ? 37 : -1);\n            i0.ɵɵadvance();\n            i0.ɵɵconditional(ctx.workflowState().phase === \"complete\" ? 38 : -1);\n          }\n        },\n        dependencies: [CommonModule, FormsModule, CopilotDiagnosticsComponent],\n        encapsulation: 2,\n        changeDetection: 0\n      });\n    }\n  }\n  return AIDebugComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}