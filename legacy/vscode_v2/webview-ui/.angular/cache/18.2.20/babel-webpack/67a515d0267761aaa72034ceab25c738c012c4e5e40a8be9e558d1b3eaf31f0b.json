{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Output, EventEmitter, signal, ChangeDetectionStrategy } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet FileSelectorComponent = class FileSelectorComponent {\n  constructor() {\n    this.selectionChanged = new EventEmitter();\n    this.selectionModes = [{\n      type: 'uncommitted',\n      label: 'Uncommitted',\n      icon: 'üìù',\n      description: 'Changes not yet committed'\n    }, {\n      type: 'commit',\n      label: 'Previous Commit',\n      icon: 'üìö',\n      description: 'Select from git history'\n    }, {\n      type: 'branch-diff',\n      label: 'Branch Diff',\n      icon: 'üåø',\n      description: 'All changes from current branch'\n    }];\n    this.currentMode = signal('uncommitted');\n    this.uncommittedFiles = signal([]);\n    this.commits = signal([]);\n    this.filteredCommits = signal([]);\n    this.selectedCommit = signal(null);\n    this.branchDiffStats = signal(null);\n    this.commitSearch = '';\n  }\n  ngOnInit() {\n    this.loadInitialData();\n  }\n  selectMode(mode) {\n    this.currentMode.set(mode);\n    this.emitSelection();\n  }\n  getModeButtonClass(mode) {\n    const baseClass = 'border transition-all duration-200';\n    if (this.currentMode() === mode) {\n      return `${baseClass} bg-vscode-button-background text-vscode-button-foreground border-vscode-button-background`;\n    }\n    return `${baseClass} bg-vscode-button-secondaryBackground text-vscode-button-secondaryForeground border-vscode-panel-border hover:bg-vscode-list-hoverBackground`;\n  }\n  getStatusBadgeClass(status) {\n    switch (status) {\n      case 'added':\n        return 'bg-green-100 text-green-800 border border-green-200';\n      case 'modified':\n        return 'bg-blue-100 text-blue-800 border border-blue-200';\n      case 'deleted':\n        return 'bg-red-100 text-red-800 border border-red-200';\n      default:\n        return 'bg-gray-100 text-gray-800 border border-gray-200';\n    }\n  }\n  toggleFileSelection(file) {\n    const files = this.uncommittedFiles();\n    const index = files.findIndex(f => f.path === file.path);\n    if (index !== -1) {\n      files[index].selected = !files[index].selected;\n      this.uncommittedFiles.set([...files]);\n      this.emitSelection();\n    }\n  }\n  toggleSelectAll() {\n    const files = this.uncommittedFiles();\n    const allSelected = this.areAllSelected();\n    files.forEach(f => f.selected = !allSelected);\n    this.uncommittedFiles.set([...files]);\n    this.emitSelection();\n  }\n  areAllSelected() {\n    const files = this.uncommittedFiles();\n    return files.length > 0 && files.every(f => f.selected);\n  }\n  selectCommit(commit) {\n    this.selectedCommit.set(commit);\n    this.emitSelection();\n  }\n  filterCommits() {\n    const search = this.commitSearch.toLowerCase();\n    const filtered = this.commits().filter(commit => commit.message.toLowerCase().includes(search) || commit.hash.toLowerCase().includes(search) || commit.author.toLowerCase().includes(search));\n    this.filteredCommits.set(filtered);\n  }\n  formatDate(date) {\n    return new Intl.RelativeTimeFormat('en', {\n      numeric: 'auto'\n    }).format(Math.floor((date.getTime() - Date.now()) / (1000 * 60 * 60 * 24)), 'day');\n  }\n  hasValidSelection() {\n    switch (this.currentMode()) {\n      case 'uncommitted':\n        return this.uncommittedFiles().some(f => f.selected);\n      case 'commit':\n        return this.selectedCommit() !== null;\n      case 'branch-diff':\n        return this.branchDiffStats() !== null;\n      default:\n        return false;\n    }\n  }\n  getSelectionSummary() {\n    switch (this.currentMode()) {\n      case 'uncommitted':\n        const selected = this.uncommittedFiles().filter(f => f.selected).length;\n        const total = this.uncommittedFiles().length;\n        return `${selected}/${total} files selected`;\n      case 'commit':\n        return this.selectedCommit() ? `Commit ${this.selectedCommit().hash.substring(0, 7)} selected` : 'No commit selected';\n      case 'branch-diff':\n        return this.branchDiffStats() ? `${this.branchDiffStats().filesChanged} files in diff` : 'Loading diff...';\n      default:\n        return '';\n    }\n  }\n  refreshData() {\n    this.loadInitialData();\n  }\n  applySelection() {\n    this.emitSelection();\n  }\n  loadInitialData() {\n    // Mock data for now - will be replaced with actual VSCode integration\n    this.uncommittedFiles.set([{\n      path: 'src/app/components/test.component.ts',\n      status: 'modified',\n      selected: false\n    }, {\n      path: 'src/app/services/data.service.ts',\n      status: 'added',\n      selected: false\n    }, {\n      path: 'src/app/models/user.model.ts',\n      status: 'deleted',\n      selected: false\n    }]);\n    this.commits.set([{\n      hash: 'abc123def456',\n      message: 'Add new user authentication feature',\n      author: 'John Doe',\n      date: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000),\n      files: ['auth.service.ts', 'user.component.ts']\n    }, {\n      hash: 'def456ghi789',\n      message: 'Fix bug in data processing',\n      author: 'Jane Smith',\n      date: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000),\n      files: ['data.service.ts']\n    }]);\n    this.filteredCommits.set(this.commits());\n    this.branchDiffStats.set({\n      filesChanged: 7,\n      additions: 142,\n      deletions: 28\n    });\n  }\n  emitSelection() {\n    const selection = {\n      mode: this.currentMode(),\n      files: this.currentMode() === 'uncommitted' ? this.uncommittedFiles().filter(f => f.selected) : [],\n      commit: this.currentMode() === 'commit' ? this.selectedCommit() : undefined,\n      diff: this.getCurrentDiff()\n    };\n    this.selectionChanged.emit(selection);\n  }\n  getCurrentDiff() {\n    // Mock diff - will be replaced with actual git integration\n    switch (this.currentMode()) {\n      case 'uncommitted':\n        return 'diff --git a/src/app/test.ts b/src/app/test.ts\\n+added line\\n-removed line';\n      case 'commit':\n        return this.selectedCommit() ? `Diff for commit ${this.selectedCommit().hash}` : '';\n      case 'branch-diff':\n        return 'Full branch diff content...';\n      default:\n        return '';\n    }\n  }\n};\n__decorate([Output()], FileSelectorComponent.prototype, \"selectionChanged\", void 0);\nFileSelectorComponent = __decorate([Component({\n  selector: 'app-file-selector',\n  imports: [CommonModule, FormsModule],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <div class=\"bg-vscode-editor-background p-4 rounded-lg border border-vscode-panel-border\">\n      <div class=\"flex items-center justify-between mb-6\">\n        <h3 class=\"text-vscode-foreground text-lg font-semibold\">File Selection</h3>\n        <div class=\"text-vscode-descriptionForeground text-sm\">\n          {{ getSelectionSummary() }}\n        </div>\n      </div>\n\n      <!-- Mode Selection -->\n      <div class=\"mb-6\">\n        <label class=\"text-vscode-foreground text-sm font-medium mb-3 block\">\n          Select Changes From:\n        </label>\n        <div class=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n          @for (mode of selectionModes; track mode.type) {\n            <button \n              (click)=\"selectMode(mode.type)\"\n              [class]=\"getModeButtonClass(mode.type)\"\n              class=\"px-4 py-3 rounded text-sm font-medium transition-colors\">\n              <div class=\"flex items-center gap-2\">\n                <span>{{ mode.icon }}</span>\n                <span>{{ mode.label }}</span>\n              </div>\n              <div class=\"text-xs opacity-75 mt-1\">{{ mode.description }}</div>\n            </button>\n          }\n        </div>\n      </div>\n\n      <!-- Uncommitted Changes View -->\n      @if (currentMode() === 'uncommitted') {\n        <div class=\"space-y-3\">\n          <div class=\"flex items-center justify-between\">\n            <h4 class=\"text-vscode-foreground font-medium\">Uncommitted Changes</h4>\n            <button \n              (click)=\"toggleSelectAll()\"\n              class=\"text-vscode-button-background hover:text-vscode-button-hoverBackground text-sm\">\n              {{ areAllSelected() ? 'Unselect All' : 'Select All' }}\n            </button>\n          </div>\n          \n          @if (uncommittedFiles().length === 0) {\n            <div class=\"text-vscode-descriptionForeground text-center py-8\">\n              <div class=\"text-4xl mb-2\">üìù</div>\n              <p>No uncommitted changes found</p>\n              <p class=\"text-xs\">Make some changes to see them here</p>\n            </div>\n          } @else {\n            <div class=\"space-y-2 max-h-64 overflow-y-auto border border-vscode-panel-border rounded p-2\">\n              @for (file of uncommittedFiles(); track file.path) {\n                <div class=\"flex items-center gap-3 p-2 rounded hover:bg-vscode-list-hoverBackground\">\n                  <input \n                    type=\"checkbox\" \n                    [checked]=\"file.selected\"\n                    (change)=\"toggleFileSelection(file)\"\n                    class=\"w-4 h-4 rounded border-vscode-checkbox-border bg-vscode-checkbox-background\">\n                  <span class=\"flex-1 text-vscode-foreground text-sm font-mono truncate\">\n                    {{ file.path }}\n                  </span>\n                  <span [class]=\"getStatusBadgeClass(file.status)\" class=\"px-2 py-1 text-xs rounded font-medium\">\n                    {{ file.status.toUpperCase() }}\n                  </span>\n                </div>\n              }\n            </div>\n          }\n        </div>\n      }\n\n      <!-- Commit Selection View -->\n      @if (currentMode() === 'commit') {\n        <div class=\"space-y-3\">\n          <h4 class=\"text-vscode-foreground font-medium\">Select Commit</h4>\n          \n          <div class=\"mb-3\">\n            <input \n              type=\"text\"\n              [(ngModel)]=\"commitSearch\"\n              (input)=\"filterCommits()\"\n              placeholder=\"Search commits by message or hash...\"\n              class=\"w-full px-3 py-2 bg-vscode-input-background text-vscode-input-foreground border border-vscode-input-border rounded focus:border-vscode-inputOption-activeBorder\">\n          </div>\n          \n          @if (filteredCommits().length === 0) {\n            <div class=\"text-vscode-descriptionForeground text-center py-8\">\n              <div class=\"text-4xl mb-2\">üîç</div>\n              <p>No commits found</p>\n              @if (commitSearch) {\n                <p class=\"text-xs\">Try a different search term</p>\n              }\n            </div>\n          } @else {\n            <div class=\"space-y-2 max-h-64 overflow-y-auto border border-vscode-panel-border rounded p-2\">\n              @for (commit of filteredCommits(); track commit.hash) {\n                <div \n                  (click)=\"selectCommit(commit)\"\n                  class=\"p-3 rounded hover:bg-vscode-list-hoverBackground cursor-pointer transition-colors\"\n                  [class.bg-vscode-list-activeSelectionBackground]=\"selectedCommit()?.hash === commit.hash\">\n                  <div class=\"flex items-start gap-3\">\n                    <span class=\"text-vscode-descriptionForeground text-xs font-mono mt-1\">\n                      {{ commit.hash.substring(0, 7) }}\n                    </span>\n                    <div class=\"flex-1 min-w-0\">\n                      <div class=\"text-vscode-foreground text-sm font-medium truncate\">\n                        {{ commit.message }}\n                      </div>\n                      <div class=\"text-vscode-descriptionForeground text-xs mt-1 flex items-center gap-4\">\n                        <span>{{ commit.author }}</span>\n                        <span>{{ formatDate(commit.date) }}</span>\n                        @if (commit.files.length > 0) {\n                          <span>{{ commit.files.length }} file(s)</span>\n                        }\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              }\n            </div>\n          }\n        </div>\n      }\n\n      <!-- Branch Diff View -->\n      @if (currentMode() === 'branch-diff') {\n        <div class=\"space-y-3\">\n          <h4 class=\"text-vscode-foreground font-medium\">Branch to Main Diff</h4>\n          \n          <div class=\"bg-vscode-textBlockQuote-background border border-vscode-panel-border rounded p-4\">\n            <div class=\"flex items-center gap-2 mb-3\">\n              <span class=\"text-2xl\">üåø</span>\n              <div>\n                <p class=\"text-vscode-textBlockQuote-foreground text-sm font-medium\">\n                  Comparing current branch to main\n                </p>\n                <p class=\"text-vscode-descriptionForeground text-xs\">\n                  All changes from your branch will be included\n                </p>\n              </div>\n            </div>\n            \n            @if (branchDiffStats()) {\n              <div class=\"flex flex-wrap gap-4 text-xs\">\n                <span class=\"text-vscode-foreground\">\n                  <span class=\"font-semibold\">{{ branchDiffStats()!.filesChanged }}</span> files changed\n                </span>\n                <span class=\"text-vscode-gitDecoration-addedResourceForeground\">\n                  +{{ branchDiffStats()!.additions }} additions\n                </span>\n                <span class=\"text-vscode-gitDecoration-deletedResourceForeground\">\n                  -{{ branchDiffStats()!.deletions }} deletions\n                </span>\n              </div>\n            }\n          </div>\n        </div>\n      }\n\n      <!-- Action Buttons -->\n      <div class=\"mt-6 flex gap-3 justify-end\">\n        <button \n          (click)=\"refreshData()\"\n          class=\"px-4 py-2 text-sm bg-vscode-button-secondaryBackground text-vscode-button-secondaryForeground rounded hover:bg-vscode-button-secondaryHoverBackground\">\n          üîÑ Refresh\n        </button>\n        <button \n          (click)=\"applySelection()\"\n          [disabled]=\"!hasValidSelection()\"\n          class=\"px-4 py-2 text-sm bg-vscode-button-background text-vscode-button-foreground rounded hover:bg-vscode-button-hoverBackground disabled:opacity-50 disabled:cursor-not-allowed\">\n          Apply Selection\n        </button>\n      </div>\n    </div>\n  `,\n  styles: []\n})], FileSelectorComponent);\nexport { FileSelectorComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}