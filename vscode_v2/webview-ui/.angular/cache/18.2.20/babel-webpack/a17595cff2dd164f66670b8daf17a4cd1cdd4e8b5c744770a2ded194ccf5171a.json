{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ChangeDetectionStrategy, signal, ViewChild } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Subscription } from 'rxjs';\nimport { FileSelectorComponent } from './modules/file-selection/file-selector.component';\nimport { TestSelectorComponent } from './modules/test-selection/test-selector.component';\nimport { AIDebugComponent } from './modules/ai-debug/ai-debug.component';\nimport { PRGeneratorComponent } from './modules/pr-generator/pr-generator.component';\nlet AppComponent = class AppComponent {\n  constructor(vscode) {\n    this.vscode = vscode;\n    this.subscription = new Subscription();\n    // Module navigation\n    this.activeModule = signal('overview');\n    // Module data\n    this.fileSelection = signal(null);\n    this.testConfiguration = signal(null);\n    this.testResults = signal(null);\n    this.aiAnalysis = signal(null);\n    this.prDescription = signal(null);\n  }\n  ngOnInit() {\n    this.subscription.add(this.vscode.onMessage().subscribe(message => {\n      if (message) {\n        this.internalHandleVscodeMessage(message);\n      }\n    }));\n    // Load any saved state\n    const savedState = this.vscode.getState();\n    if (savedState) {\n      this.restoreState(savedState);\n    }\n  }\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n  // Navigation methods\n  showOverview() {\n    this.activeModule.set('overview');\n    this.saveState();\n  }\n  showModule(module) {\n    this.activeModule.set(module);\n    this.saveState();\n  }\n  // Status methods\n  getFileSelectionStatus() {\n    const selection = this.fileSelection();\n    if (!selection) return 'Not configured';\n    switch (selection.mode) {\n      case 'uncommitted':\n        return `${selection.files.length} uncommitted files`;\n      case 'commit':\n        const selectedCommits = selection.commits;\n        if (selectedCommits && selectedCommits.length > 0) {\n          if (selectedCommits.length === 1) {\n            return `Commit: ${selectedCommits[0].hash.substring(0, 7)}`;\n          } else {\n            return `${selectedCommits.length} commits selected`;\n          }\n        }\n        return 'No commits selected';\n      case 'branch-diff':\n        return 'Branch to main diff';\n      default:\n        return 'Configured';\n    }\n  }\n  getTestConfigStatus() {\n    const config = this.testConfiguration();\n    if (!config) return 'Not configured';\n    if (config.mode === 'affected') {\n      return 'Affected tests';\n    } else {\n      return config.project ? `Project: ${config.project}` : 'Project mode';\n    }\n  }\n  getPRGeneratorStatus() {\n    if (!this.fileSelection()) return 'Requires file selection';\n    if (this.prDescription()) return 'Description generated';\n    return 'Ready to generate';\n  }\n  canRunAIDebug() {\n    return !!(this.fileSelection() && this.testConfiguration());\n  }\n  // Event handlers\n  onFileSelectionChanged(selection) {\n    this.fileSelection.set(selection);\n    // Reset test configuration when file selection changes\n    this.testConfiguration.set(null);\n    if (this.testSelector) {\n      this.testSelector.resetConfiguration();\n    }\n    this.saveState();\n    this.vscode.postMessage('fileSelectionChanged', selection);\n  }\n  onTestConfigurationChanged(config) {\n    this.testConfiguration.set(config);\n    this.saveState();\n    this.vscode.postMessage('testConfigurationChanged', config);\n  }\n  onAIDebugComplete(result) {\n    this.testResults.set(result.testResults);\n    this.aiAnalysis.set(result.aiAnalysis);\n    this.saveState();\n    this.vscode.postMessage('aiDebugComplete', result);\n  }\n  onPRDescriptionGenerated(description) {\n    this.prDescription.set(description);\n    this.saveState();\n    this.vscode.postMessage('prDescriptionGenerated', description);\n  }\n  internalHandleVscodeMessage(message) {\n    switch (message.command) {\n      case 'showModule':\n        if (message.data?.moduleType) {\n          this.showModule(message.data.moduleType);\n        }\n        break;\n      case 'resetState':\n        this.resetAllState();\n        break;\n      case 'navigateToModule':\n        if (message.data?.module) {\n          this.showModule(message.data.module);\n        }\n        break;\n      // Note: gitDiffGenerated is now handled within file-selection module\n      // No need to navigate to separate git-diff module\n    }\n  }\n  // Public method for testing\n  handleVscodeMessage(message) {\n    this.internalHandleVscodeMessage(message);\n  }\n  saveState() {\n    const state = {\n      activeModule: this.activeModule(),\n      fileSelection: this.fileSelection(),\n      testConfiguration: this.testConfiguration(),\n      testResults: this.testResults(),\n      aiAnalysis: this.aiAnalysis(),\n      prDescription: this.prDescription()\n    };\n    this.vscode.setState(state);\n  }\n  restoreState(state) {\n    if (state.activeModule) this.activeModule.set(state.activeModule);\n    if (state.fileSelection) this.fileSelection.set(state.fileSelection);\n    if (state.testConfiguration) this.testConfiguration.set(state.testConfiguration);\n    if (state.testResults) this.testResults.set(state.testResults);\n    if (state.aiAnalysis) this.aiAnalysis.set(state.aiAnalysis);\n    if (state.prDescription) this.prDescription.set(state.prDescription);\n  }\n  resetAllState() {\n    this.activeModule.set('overview');\n    this.fileSelection.set(null);\n    this.testConfiguration.set(null);\n    this.testResults.set(null);\n    this.aiAnalysis.set(null);\n    this.prDescription.set(null);\n    this.saveState();\n  }\n};\n__decorate([ViewChild('testSelector')], AppComponent.prototype, \"testSelector\", void 0);\nAppComponent = __decorate([Component({\n  selector: 'app-root',\n  standalone: true,\n  imports: [CommonModule, FileSelectorComponent, TestSelectorComponent, AIDebugComponent, PRGeneratorComponent],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <div class=\"min-h-screen bg-vscode-background text-vscode-foreground p-4\">\n      <!-- Header -->\n      <header class=\"flex items-center justify-between mb-6 pb-4 border-b border-vscode-panel-border\">\n        <h1 class=\"flex items-center gap-3 text-2xl font-bold\">\n          <span class=\"text-3xl\">ü§ñ</span>\n          AI Debug Context\n        </h1>\n        @if (activeModule() !== 'overview') {\n          <button\n            (click)=\"showOverview()\"\n            class=\"px-4 py-2 bg-vscode-button-secondaryBackground text-vscode-button-secondaryForeground rounded hover:bg-vscode-button-secondaryHoverBackground\">\n            ‚Üê Back to Overview\n          </button>\n        }\n      </header>\n\n      <!-- Module Overview -->\n      @if (activeModule() === 'overview') {\n        <main class=\"max-w-4xl mx-auto\">\n          <!-- Status Summary -->\n          <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8\">\n            <div class=\"bg-vscode-editor-background border border-vscode-panel-border rounded-lg p-4\">\n              <div class=\"flex items-center gap-2 mb-2\">\n                <span class=\"text-xl\">üìÅ</span>\n                <h3 class=\"font-semibold\">File Selection</h3>\n              </div>\n              <p class=\"text-sm text-vscode-descriptionForeground mb-3\">{{ getFileSelectionStatus() }}</p>\n              <button\n                (click)=\"showModule('file-selection')\"\n                class=\"w-full px-3 py-2 bg-vscode-button-background text-vscode-button-foreground rounded hover:bg-vscode-button-hoverBackground\">\n                Configure\n              </button>\n            </div>\n\n            <div class=\"bg-vscode-editor-background border border-vscode-panel-border rounded-lg p-4\">\n              <div class=\"flex items-center gap-2 mb-2\">\n                <span class=\"text-xl\">üß™</span>\n                <h3 class=\"font-semibold\">Test Selection</h3>\n              </div>\n              <p class=\"text-sm text-vscode-descriptionForeground mb-3\">{{ getTestConfigStatus() }}</p>\n              <button\n                (click)=\"showModule('test-selection')\"\n                class=\"w-full px-3 py-2 bg-vscode-button-background text-vscode-button-foreground rounded hover:bg-vscode-button-hoverBackground\">\n                Configure\n              </button>\n            </div>\n\n            <div class=\"bg-vscode-editor-background border border-vscode-panel-border rounded-lg p-4\">\n              <div class=\"flex items-center gap-2 mb-2\">\n                <span class=\"text-xl\">üìã</span>\n                <h3 class=\"font-semibold\">PR Generator</h3>\n              </div>\n              <p class=\"text-sm text-vscode-descriptionForeground mb-3\">{{ getPRGeneratorStatus() }}</p>\n              <button\n                (click)=\"showModule('pr-generator')\"\n                [disabled]=\"!fileSelection()\"\n                class=\"w-full px-3 py-2 bg-vscode-button-background text-vscode-button-foreground rounded hover:bg-vscode-button-hoverBackground disabled:opacity-50\">\n                Configure\n              </button>\n            </div>\n          </div>\n\n          <!-- Main AI Debug Action -->\n          <div class=\"bg-vscode-editor-background border border-vscode-panel-border rounded-lg p-6 text-center\">\n            <div class=\"flex items-center justify-center gap-3 mb-4\">\n              <span class=\"text-4xl\">üöÄ</span>\n              <h2 class=\"text-xl font-bold\">AI Test Debug</h2>\n            </div>\n            <p class=\"text-vscode-descriptionForeground mb-6 max-w-md mx-auto\">\n              Run the complete AI-powered test debugging workflow with your configured settings.\n            </p>\n            <button\n              (click)=\"showModule('ai-debug')\"\n              [disabled]=\"!canRunAIDebug()\"\n              class=\"px-8 py-4 bg-vscode-button-background text-vscode-button-foreground rounded-lg font-semibold text-lg hover:bg-vscode-button-hoverBackground disabled:opacity-50 disabled:cursor-not-allowed\">\n              @if (!canRunAIDebug()) {\n                <span class=\"flex items-center gap-2\">\n                  <span>‚ö†Ô∏è</span>\n                  Configure Prerequisites First\n                </span>\n              } @else {\n                <span class=\"flex items-center gap-2\">\n                  <span>ü§ñ</span>\n                  Run AI Test Debug\n                </span>\n              }\n            </button>\n            @if (!canRunAIDebug()) {\n              <p class=\"text-vscode-descriptionForeground text-sm mt-3\">\n                Complete file selection and test selection to continue\n              </p>\n            }\n          </div>\n        </main>\n      }\n\n      <!-- File Selection Module -->\n      @if (activeModule() === 'file-selection') {\n        <app-file-selector\n          (selectionChanged)=\"onFileSelectionChanged($event)\">\n        </app-file-selector>\n      }\n\n      <!-- Test Selection Module -->\n      @if (activeModule() === 'test-selection') {\n        <app-test-selector\n          #testSelector\n          (configurationChanged)=\"onTestConfigurationChanged($event)\">\n        </app-test-selector>\n      }\n\n      <!-- AI Debug Module -->\n      @if (activeModule() === 'ai-debug') {\n        <app-ai-debug\n          [fileSelection]=\"fileSelection()\"\n          [testConfiguration]=\"testConfiguration()\"\n          (workflowComplete)=\"onAIDebugComplete($event)\">\n        </app-ai-debug>\n      }\n\n      <!-- PR Generator Module -->\n      @if (activeModule() === 'pr-generator') {\n        <app-pr-generator\n          [fileSelection]=\"fileSelection()\"\n          [testResults]=\"testResults()\"\n          [aiAnalysis]=\"aiAnalysis()\"\n          (descriptionGenerated)=\"onPRDescriptionGenerated($event)\">\n        </app-pr-generator>\n      }\n    </div>\n  `,\n  styles: [`\n    /* Minimal component-specific styles */\n    .spinner {\n      border: 2px solid var(--vscode-progressBar-background);\n      border-top: 2px solid var(--vscode-progressBar-foreground);\n      border-radius: 50%;\n      width: 16px;\n      height: 16px;\n      animation: spin 1s linear infinite;\n    }\n\n    @keyframes spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n  `]\n})], AppComponent);\nexport { AppComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}