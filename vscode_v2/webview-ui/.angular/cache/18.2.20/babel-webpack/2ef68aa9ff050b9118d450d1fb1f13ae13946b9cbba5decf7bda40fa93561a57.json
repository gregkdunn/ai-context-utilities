{"ast":null,"code":"import _asyncToGenerator from \"/Users/gregdunn/src/test/ai_debug_context/vscode_2/webview-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nconst _forTrack0 = ($index, $item) => $item.name;\nfunction PRGeneratorComponent_For_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function PRGeneratorComponent_For_13_Template_button_click_0_listener() {\n      const template_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.selectTemplate(template_r2.name));\n    });\n    i0.ɵɵelementStart(1, \"div\", 17);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 18);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const template_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r2.getTemplateButtonClass(template_r2.name));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(template_r2.displayName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(template_r2.description);\n  }\n}\nfunction PRGeneratorComponent_Conditional_21_For_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function PRGeneratorComponent_Conditional_21_For_2_Template_button_click_3_listener() {\n      const ticket_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.removeJiraTicket(ticket_r5));\n    });\n    i0.ɵɵtext(4, \" \\u2715 \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ticket_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ticket_r5);\n  }\n}\nfunction PRGeneratorComponent_Conditional_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵrepeaterCreate(1, PRGeneratorComponent_Conditional_21_For_2_Template, 5, 1, \"div\", 19, i0.ɵɵrepeaterTrackByIdentity);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵrepeater(ctx_r2.jiraTickets());\n  }\n}\nfunction PRGeneratorComponent_Conditional_22_For_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const flag_r6 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", flag_r6, \" \");\n  }\n}\nfunction PRGeneratorComponent_Conditional_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"label\", 6);\n    i0.ɵɵtext(2, \" Detected Feature Flags: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 21)(4, \"div\", 12);\n    i0.ɵɵrepeaterCreate(5, PRGeneratorComponent_Conditional_22_For_6_Template, 2, 1, \"span\", 22, i0.ɵɵrepeaterTrackByIdentity);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵrepeater(ctx_r2.detectedFeatureFlags());\n  }\n}\nfunction PRGeneratorComponent_Conditional_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15)(1, \"span\", 23);\n    i0.ɵɵtext(2, \"\\u23F3\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Generating... \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PRGeneratorComponent_Conditional_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15)(1, \"span\");\n    i0.ɵɵtext(2, \"\\uD83E\\uDD16\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Generate PR Description \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PRGeneratorComponent_Conditional_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 24)(2, \"label\", 25);\n    i0.ɵɵtext(3, \"Generated PR Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function PRGeneratorComponent_Conditional_27_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.copyToClipboard());\n    });\n    i0.ɵɵtext(5, \" \\uD83D\\uDCCB Copy \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 27)(7, \"pre\", 28);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(ctx_r2.generatedDescription());\n  }\n}\nexport let PRGeneratorComponent = /*#__PURE__*/(() => {\n  class PRGeneratorComponent {\n    constructor() {\n      this.fileSelection = null;\n      this.testResults = null;\n      this.aiAnalysis = null;\n      this.descriptionGenerated = new EventEmitter();\n      this.selectedTemplate = signal('standard');\n      this.jiraTickets = signal([]);\n      this.detectedFeatureFlags = signal([]);\n      this.isGenerating = signal(false);\n      this.generatedDescription = signal('');\n      this.jiraTicketInput = '';\n      this.availableTemplates = [{\n        name: 'standard',\n        displayName: 'Standard PR',\n        description: 'General purpose template',\n        template: 'Standard PR template'\n      }, {\n        name: 'feature',\n        displayName: 'Feature PR',\n        description: 'For new features',\n        template: 'Feature PR template'\n      }, {\n        name: 'bugfix',\n        displayName: 'Bug Fix PR',\n        description: 'For bug fixes',\n        template: 'Bug fix PR template'\n      }, {\n        name: 'hotfix',\n        displayName: 'Hotfix PR',\n        description: 'For urgent fixes',\n        template: 'Hotfix PR template'\n      }];\n    }\n    ngOnInit() {\n      this.detectFeatureFlags();\n    }\n    canGenerate() {\n      return !!this.fileSelection;\n    }\n    getGenerationStatus() {\n      if (this.isGenerating()) return 'Generating...';\n      if (this.generatedDescription()) return 'Generated';\n      return 'Ready to generate';\n    }\n    selectTemplate(templateName) {\n      this.selectedTemplate.set(templateName);\n    }\n    getTemplateButtonClass(templateName) {\n      const baseClass = 'transition-all duration-200';\n      if (this.selectedTemplate() === templateName) {\n        return `${baseClass} bg-vscode-button-background text-vscode-button-foreground border-vscode-button-background`;\n      }\n      return `${baseClass} bg-vscode-button-secondaryBackground text-vscode-button-secondaryForeground border-vscode-panel-border hover:bg-vscode-list-hoverBackground`;\n    }\n    addJiraTicket() {\n      const input = this.jiraTicketInput.trim();\n      if (!input) return;\n      const tickets = input.split(',').map(t => t.trim().toUpperCase()).filter(t => t);\n      const validTickets = tickets.filter(t => /^[A-Z]+-\\d+$/.test(t));\n      if (validTickets.length > 0) {\n        const currentTickets = this.jiraTickets();\n        const newTickets = validTickets.filter(t => !currentTickets.includes(t));\n        this.jiraTickets.set([...currentTickets, ...newTickets]);\n      }\n      this.jiraTicketInput = '';\n    }\n    removeJiraTicket(ticket) {\n      this.jiraTickets.update(tickets => tickets.filter(t => t !== ticket));\n    }\n    generatePRDescription() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (!_this.canGenerate() || _this.isGenerating()) return;\n        _this.isGenerating.set(true);\n        try {\n          // Mock generation - would use Copilot API\n          yield _this.simulateDelay(2000);\n          const description = _this.buildMockDescription();\n          _this.generatedDescription.set(description);\n          _this.descriptionGenerated.emit(description);\n        } catch (error) {\n          console.error('Failed to generate description:', error);\n        } finally {\n          _this.isGenerating.set(false);\n        }\n      })();\n    }\n    copyToClipboard() {\n      const description = this.generatedDescription();\n      if (description) {\n        navigator.clipboard.writeText(description);\n      }\n    }\n    detectFeatureFlags() {\n      if (!this.fileSelection?.diff) {\n        this.detectedFeatureFlags.set([]);\n        return;\n      }\n      // Mock feature flag detection\n      this.detectedFeatureFlags.set(['USER_DASHBOARD_V2', 'ENHANCED_AUTH']);\n    }\n    buildMockDescription() {\n      const template = this.selectedTemplate();\n      const jiraSection = this.jiraTickets().length > 0 ? `\\n\\n## Related Issues\\n${this.jiraTickets().map(t => `- ${t}`).join('\\n')}` : '';\n      const flagSection = this.detectedFeatureFlags().length > 0 ? `\\n\\n## Feature Flags\\n${this.detectedFeatureFlags().map(f => `- \\`${f}\\``).join('\\n')}` : '';\n      return `## Summary\nThis PR implements ${template} changes based on the selected file modifications.\n\n## Changes Made\n- Updated components and services\n- Enhanced test coverage\n- Improved error handling\n\n## Testing\n- All automated tests passing\n- Manual testing completed${jiraSection}${flagSection}\n\n## Deployment Notes\nStandard deployment process applies.`;\n    }\n    simulateDelay(ms) {\n      return new Promise(resolve => setTimeout(resolve, ms));\n    }\n    static {\n      this.ɵfac = function PRGeneratorComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PRGeneratorComponent)();\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: PRGeneratorComponent,\n        selectors: [[\"app-pr-generator\"]],\n        inputs: {\n          fileSelection: \"fileSelection\",\n          testResults: \"testResults\",\n          aiAnalysis: \"aiAnalysis\"\n        },\n        outputs: {\n          descriptionGenerated: \"descriptionGenerated\"\n        },\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 28,\n        vars: 8,\n        consts: [[1, \"bg-vscode-editor-background\", \"p-4\", \"rounded-lg\", \"border\", \"border-vscode-panel-border\"], [1, \"flex\", \"items-center\", \"justify-between\", \"mb-6\"], [1, \"text-vscode-foreground\", \"text-lg\", \"font-semibold\", \"flex\", \"items-center\", \"gap-2\"], [1, \"text-2xl\"], [1, \"text-vscode-descriptionForeground\", \"text-sm\"], [1, \"mb-6\"], [1, \"text-vscode-foreground\", \"text-sm\", \"font-medium\", \"mb-3\", \"block\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-2\", \"gap-3\"], [1, \"p-3\", \"rounded\", \"border\", \"transition-all\", \"duration-200\", \"text-left\", 3, \"class\"], [1, \"flex\", \"gap-2\", \"mb-3\"], [\"placeholder\", \"PROJ-123, FEATURE-456\", 1, \"flex-1\", \"px-3\", \"py-2\", \"bg-vscode-input-background\", \"text-vscode-input-foreground\", \"border\", \"border-vscode-input-border\", \"rounded\", \"focus:border-vscode-inputOption-activeBorder\", 3, \"ngModelChange\", \"keyup.enter\", \"ngModel\"], [1, \"px-4\", \"py-2\", \"bg-vscode-button-background\", \"text-vscode-button-foreground\", \"rounded\", \"hover:bg-vscode-button-hoverBackground\", \"disabled:opacity-50\", 3, \"click\", \"disabled\"], [1, \"flex\", \"flex-wrap\", \"gap-2\"], [1, \"mb-6\", \"flex\", \"gap-3\"], [1, \"flex-1\", \"px-4\", \"py-3\", \"bg-vscode-button-background\", \"text-vscode-button-foreground\", \"rounded\", \"font-medium\", \"hover:bg-vscode-button-hoverBackground\", \"disabled:opacity-50\", \"disabled:cursor-not-allowed\", 3, \"click\", \"disabled\"], [1, \"flex\", \"items-center\", \"justify-center\", \"gap-2\"], [1, \"p-3\", \"rounded\", \"border\", \"transition-all\", \"duration-200\", \"text-left\", 3, \"click\"], [1, \"font-medium\", \"mb-1\"], [1, \"text-xs\", \"opacity-75\"], [1, \"inline-flex\", \"items-center\", \"gap-2\", \"px-3\", \"py-1\", \"bg-vscode-badge-background\", \"text-vscode-badge-foreground\", \"text-sm\", \"rounded\", \"border\"], [1, \"text-vscode-badge-foreground\", \"hover:text-red-500\", \"text-xs\", 3, \"click\"], [1, \"bg-vscode-textBlockQuote-background\", \"border\", \"border-vscode-panel-border\", \"rounded\", \"p-3\"], [1, \"px-2\", \"py-1\", \"bg-vscode-textPreformat-background\", \"text-vscode-textPreformat-foreground\", \"text-xs\", \"font-mono\", \"rounded\", \"border\"], [1, \"animate-spin\"], [1, \"flex\", \"items-center\", \"justify-between\", \"mb-3\"], [1, \"text-vscode-foreground\", \"text-sm\", \"font-medium\"], [1, \"px-3\", \"py-1\", \"text-xs\", \"bg-vscode-button-secondaryBackground\", \"text-vscode-button-secondaryForeground\", \"rounded\", \"hover:bg-vscode-button-secondaryHoverBackground\", 3, \"click\"], [1, \"bg-vscode-editor-background\", \"border\", \"border-vscode-panel-border\", \"rounded\", \"p-4\"], [1, \"text-vscode-editor-foreground\", \"text-sm\", \"whitespace-pre-wrap\", \"font-sans\", \"leading-relaxed\"]],\n        template: function PRGeneratorComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\", 2)(3, \"span\", 3);\n            i0.ɵɵtext(4, \"\\uD83D\\uDCCB\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(5, \" PR Description Generator \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"div\", 4);\n            i0.ɵɵtext(7);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(8, \"div\", 5)(9, \"label\", 6);\n            i0.ɵɵtext(10, \" PR Template: \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"div\", 7);\n            i0.ɵɵrepeaterCreate(12, PRGeneratorComponent_For_13_Template, 5, 4, \"button\", 8, _forTrack0);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(14, \"div\", 5)(15, \"label\", 6);\n            i0.ɵɵtext(16, \" Jira Tickets: \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"div\", 9)(18, \"input\", 10);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function PRGeneratorComponent_Template_input_ngModelChange_18_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.jiraTicketInput, $event) || (ctx.jiraTicketInput = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"keyup.enter\", function PRGeneratorComponent_Template_input_keyup_enter_18_listener() {\n              return ctx.addJiraTicket();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"button\", 11);\n            i0.ɵɵlistener(\"click\", function PRGeneratorComponent_Template_button_click_19_listener() {\n              return ctx.addJiraTicket();\n            });\n            i0.ɵɵtext(20, \" Add \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(21, PRGeneratorComponent_Conditional_21_Template, 3, 0, \"div\", 12);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(22, PRGeneratorComponent_Conditional_22_Template, 7, 0, \"div\", 5);\n            i0.ɵɵelementStart(23, \"div\", 13)(24, \"button\", 14);\n            i0.ɵɵlistener(\"click\", function PRGeneratorComponent_Template_button_click_24_listener() {\n              return ctx.generatePRDescription();\n            });\n            i0.ɵɵtemplate(25, PRGeneratorComponent_Conditional_25_Template, 4, 0, \"span\", 15)(26, PRGeneratorComponent_Conditional_26_Template, 4, 0, \"span\", 15);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(27, PRGeneratorComponent_Conditional_27_Template, 9, 1, \"div\", 5);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵtextInterpolate1(\" \", ctx.getGenerationStatus(), \" \");\n            i0.ɵɵadvance(5);\n            i0.ɵɵrepeater(ctx.availableTemplates);\n            i0.ɵɵadvance(6);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.jiraTicketInput);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", !ctx.jiraTicketInput.trim());\n            i0.ɵɵadvance(2);\n            i0.ɵɵconditional(ctx.jiraTickets().length > 0 ? 21 : -1);\n            i0.ɵɵadvance();\n            i0.ɵɵconditional(ctx.detectedFeatureFlags().length > 0 ? 22 : -1);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ctx.isGenerating() || !ctx.canGenerate());\n            i0.ɵɵadvance();\n            i0.ɵɵconditional(ctx.isGenerating() ? 25 : 26);\n            i0.ɵɵadvance(2);\n            i0.ɵɵconditional(ctx.generatedDescription() ? 27 : -1);\n          }\n        },\n        dependencies: [CommonModule, FormsModule, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgModel],\n        encapsulation: 2,\n        changeDetection: 0\n      });\n    }\n  }\n  return PRGeneratorComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}